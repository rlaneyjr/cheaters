<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Finding Processes with ps</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part63.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part65.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark124">Finding Processes with ps</a></p><p style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">The <span class="s33">ps </span>utility displays a list of processes. Unfortunately, different systems have very different versions of <span class="s33">ps</span>. Some will show all of your processes on all terminals, some show only your current terminal (unless you add options), some hide “uninteresting” processes, and so on. Explaining all of the versions, and how to use them, is beyond the scope of this book, but let’s look at an example. Try the command <span class="s33">ps l </span>(a lowercase letter “L”) or, if that doesn’t work,</p><p class="s33" style="padding-left: 42pt;text-indent: 0pt;line-height: 10pt;text-align: left;">ps -f<span class="p">. You’ll get a listing something like this:</span></p><p class="s33" style="padding-top: 8pt;padding-bottom: 2pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">$ <b>ps -f</b></p><table style="border-collapse:collapse;margin-left:39.5009pt" cellspacing="0"><tr style="height:11pt"><td style="width:32pt"><p class="s49" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">UID</p></td><td style="width:29pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: right;">PID</p></td><td style="width:27pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: right;">PPID</p></td><td style="width:72pt"><p class="s49" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">C STIME TTY</p></td><td style="width:146pt"><p class="s49" style="padding-left: 26pt;text-indent: 0pt;line-height: 10pt;text-align: left;">TIME CMD</p></td></tr><tr style="height:12pt"><td style="width:32pt"><p class="s49" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">jpeek</p></td><td style="width:29pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;text-align: right;">673</p></td><td style="width:27pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;text-align: right;">666</p></td><td style="width:72pt"><p class="s49" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">0 Nov21 pts/1</p></td><td style="width:146pt"><p class="s49" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">00:00:04 bash</p></td></tr><tr style="height:12pt"><td style="width:32pt"><p class="s49" style="padding-left: 2pt;text-indent: 0pt;text-align: left;">jpeek</p></td><td style="width:29pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;text-align: right;">2224</p></td><td style="width:27pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;text-align: right;">673</p></td><td style="width:72pt"><p class="s49" style="padding-left: 4pt;text-indent: 0pt;text-align: left;">0 Nov24 pts/1</p></td><td style="width:146pt"><p class="s49" style="padding-left: 8pt;text-indent: 0pt;text-align: left;">00:00:19 vim p1c1.xml p1c2.xml</p></td></tr><tr style="height:11pt"><td style="width:32pt"><p class="s49" style="padding-left: 2pt;text-indent: 0pt;line-height: 10pt;text-align: left;">jpeek</p></td><td style="width:29pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: right;">2514</p></td><td style="width:27pt"><p class="s49" style="padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: right;">673</p></td><td style="width:72pt"><p class="s49" style="padding-left: 4pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0 10:36 pts/1</p></td><td style="width:146pt"><p class="s49" style="padding-left: 8pt;text-indent: 0pt;line-height: 10pt;text-align: left;">00:00:00 ps -f</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">Each line shows information about a process of yours. The format varies from system to system; we’ll discuss the example that’s shown here. Some of the most important columns are</p><p style="padding-top: 7pt;padding-left: 67pt;text-indent: -10pt;line-height: 115%;text-align: left;">• The name of each process is in the rightmost column, followed, in some versions of <span class="s33">ps</span>, by its command-line arguments.</p><p style="padding-top: 7pt;padding-left: 57pt;text-indent: 0pt;text-align: left;">• The second column shows the PID (process ID) number.</p><p style="padding-top: 8pt;padding-left: 67pt;text-indent: -10pt;line-height: 115%;text-align: left;">• The third column shows the PPID, the parent PID. It’s the PID of the process that started this process.</p><p class="s29" style="padding-top: 3pt;padding-left: 269pt;text-indent: 0pt;text-align: left;"><a name="bookmark135">CHAPTER 3 </a><span class="s28">■ </span>MORE SHELL FEATURES <span class="s27">61</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 66pt;text-indent: -10pt;line-height: 115%;text-align: left;">• The TTY column shows the terminal (actually, <i>teletype</i>) where the process is running. Each terminal, or terminal window, has its own name. If you have several open, you can find which is which by running the command <span class="s33">tty </span>from a shell prompt inside the window.</p><p style="padding-top: 7pt;padding-left: 66pt;text-indent: -10pt;line-height: 115%;text-align: left;">• The TIME column shows how much CPU time the process has used. A runaway process often accumulates a lot of CPU time.</p><p style="padding-top: 7pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Comparing the PID and PPID columns tells you which process started which. The first process, the <span class="s33">bash </span>shell, has PID 673. (It was started by a process owned by another user, <i>root</i>. By default, you won’t see other users’ processes in your <span class="s33">ps </span>list.) The other two processes have 673 as their PPID—which shows that the shell started <span class="s33">vi </span>and <span class="s33">ps</span>. This means that you should be able to see these processes in the listing from that shell’s <span class="s33">jobs </span>command.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">A process might have a PPID of 1. Process number 1 is <span class="s33">init</span>, the parent (or grandparent, or...) of all processes, as we mentioned in Chapter 1. These processes won’t be in your shell’s <span class="s33">jobs </span>list. (One way to get a process with a PPID of 1 is to log out without ending your background jobs. If the shell doesn’t kill those jobs, they’ll be “inherited” by <span class="s33">init</span>.)</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Once you’ve found the process you need to terminate (for which you may need to use other <span class="s33">ps </span>options), the simplest command is <span class="s33">kill </span>followed by the PID. For instance, if you started Mozilla from a menu (not from your shell) and it’s now frozen, you might find that there are actually several <span class="s33">mozilla </span>processes. It might be best to kill them one by one, the highest-numbered first; the others may go away by themselves. Or you can give all the PIDs at once, on a single command line:</p><p class="s33" style="padding-top: 6pt;padding-bottom: 2pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">$ <b>ps</b></p><table style="border-collapse:collapse;margin-left:46.7009pt" cellspacing="0"><tr style="height:11pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: center;">...</p></td><td style="width:277pt" colspan="2"><p style="text-indent: 0pt;text-align: left;"><br/></p></td></tr><tr style="height:12pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: center;">773 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">0:00 sh /usr/local/bin/mozilla</p></td></tr><tr style="height:12pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: center;">774 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">0:00  sh  /usr/local/mozilla/run-mozilla.sh  ./mozilla-bin</p></td></tr><tr style="height:12pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: center;">783 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 6pt;text-indent: 0pt;text-align: left;">12:05 ./mozilla-bin</p></td></tr><tr style="height:12pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: center;">785 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">0:00 ./mozilla-bin</p></td></tr><tr style="height:12pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;text-align: center;">786 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 11pt;text-indent: 0pt;text-align: left;">0:01 ./mozilla-bin</p></td></tr><tr style="height:11pt"><td style="width:47pt"><p class="s49" style="padding-left: 2pt;padding-right: 4pt;text-indent: 0pt;line-height: 10pt;text-align: center;">787 pts/4</p></td><td style="width:16pt"><p class="s49" style="padding-right: 2pt;text-indent: 0pt;line-height: 10pt;text-align: center;">S</p></td><td style="width:261pt"><p class="s49" style="padding-left: 11pt;text-indent: 0pt;line-height: 10pt;text-align: left;">0:03 ./mozilla-bin</p></td></tr></table><p class="s33" style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">...</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">$  <b>kill  787</b></p><p class="s33" style="padding-top: 1pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">...</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">After you kill a process, check again to be sure it’s gone. By itself (with no signal name or number), <span class="s33">kill </span>sends SIGTERM. You may need to send a different signal to “hard-to-kill”</p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">processes. Try <span class="s33">kill  -HUP</span>, then (if that doesn’t work), <span class="s33">kill  -KILL </span>(which is often written <span class="s33">kill  -9</span>). The SIGKILL signal, signal number 9, is a last resort because it doesn’t give a process a chance to clean up after itself (handle open files, and so on).</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">A Bourne shell script can use the shell’s <span class="s33">trap </span>command to do something before the script terminates. For example, when the shell receives a signal, the script could remove its temporary files and close an open network connection, then exit. See the section “Traps and Special Func- tions” in Chapter 13 for details.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_087.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">■<span class="s23">Tip </span><span class="s19">To kill windowing programs, you can also try xkill.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_088.png"/></span></p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark136"><span class="s27">62 </span></a>CHAPTER 3 <span class="s28">■ </span>MORE SHELL FEATURES </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part63.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part65.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
