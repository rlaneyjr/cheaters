<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Nested Expansion</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part326.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part328.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark592">Nested Expansion</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">In the same manner that pipes allow several commands to be combined together to achieve a result, it can be useful to combine the effects of some of the forms of variable expansion that we have seen. <span class="s33">zsh </span>allows variable expansions to be nested to achieve this. For instance, the following example accepts a filename and removes an initial path and any file extension:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">${${file##*/}%.*}</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">Constructs like this are commonly used inside <span class="s33">for </span>loops, which we’ll cover in the next chapter. They enable you to intelligently adjust a filename to refer to a related file. For example, the following removes files in the current directory that have the same name (not counting the extension) as a <span class="s33">.zip </span>file in another directory:</p><p class="s33" style="padding-top: 7pt;padding-left: 50pt;text-indent: -9pt;line-height: 115%;text-align: left;">for  file  in  /project/documentation/*.zip;  do rm  ${${file##*/}%.*}.*</p><p class="s33" style="padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">done</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">Unfortunately, with nested expansions, it becomes tempting to use many levels of nesting and to produce some horribly unreadable pieces of code. For this reason we won’t say much more about this particular feature. There is a little more information in the sidebar “Nested Expansions” in Chapter 15 if you’re curious to know more.</p><p class="s29" style="padding-top: 3pt;padding-left: 314pt;text-indent: 0pt;text-align: left;"><a name="bookmark619">CHAPTER 12 </a><span class="s28">■ </span>VARIABLES <span class="s27">297</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part326.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part328.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
