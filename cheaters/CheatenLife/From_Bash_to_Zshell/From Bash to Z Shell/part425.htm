<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Removable Suffixes</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part424.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part426.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark777">Removable Suffixes</a></p><p style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">In the section “Automatically Added Suffixes” in Chapter 10, you learned how <span class="s33">zsh </span>can remove suffixes added by a previous completion if the next key you type indicates that you most probably didn’t want the suffix. The most common example of this is removing the slash after a completed directory if the next key you press is Return.</p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">In the early part of this chapter, where we wrote a completion function for the <span class="s33">chown </span>command, we used a suffix to add the dot separator after completing users to leave the command line ready for adding a group:</p><p class="s33" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">_users -S &#39;.&#39;</p><p style="padding-top: 8pt;padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: justify;">It would be quite nice if this suffix could be removed if the user doesn’t go on to type the name of a group. Though the <span class="s33">chown </span>command doesn’t seem to balk at a superfluous dot, you will almost certainly come across commands that don’t like extra separator characters at the end of a word.</p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">The most common cases are handled by the <span class="s33">-q </span>option to <span class="s33">compadd</span>. This ensures that the suffix is removed if the next key typed inserts a blank or inserts nothing. That will include keys</p><p class="s29" style="padding-top: 3pt;padding-left: 223pt;text-indent: 0pt;text-align: left;"><a name="bookmark816">CHAPTER 15 </a><span class="s28">■ </span>W RIT ING COMP LET ION F UNCTI ON S <span class="s27">405</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">like Space and Return. In this case, because our suffix is only one character long, it will also remove the suffix if the next key typed is the same as the suffix. That means if the user presses</p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">. <span class="p">the command line will not include two consecutive dots as a result of the keypress. So for our</span></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">chown <span class="p">example, we can now use</span></p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">_users -q -S &#39;.&#39;</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 17pt;line-height: 115%;text-align: justify;">Sometimes, you may want more control over which following characters cause the suffix to be removed. There are two further options that allow this: <span class="s33">-r </span>and <span class="s33">-R</span>. With the <span class="s33">-r </span>option, you can give a list of the characters, and with <span class="s33">-R </span>you give a function that is run to make the decision. It isn’t actually that common to need to use these; the manual has more details, if you want to learn more.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part424.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part426.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
