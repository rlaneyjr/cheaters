<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Altering the Appearance of the List</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part266.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part268.htm">Next &gt;</a></p><p class="s35" style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark488">Altering the Appearance of the List</a></p><p style="padding-top: 5pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">In the previous section we showed how the completion system’s ability to list completion matches can serve as a substitute for the <span class="s33">ls </span>command. One nice feature of <span class="s33">ls</span>, enabled by the</p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">-F <span class="p">option, is to show the type of each file. This is done by means of a trailing character:</span></p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">/ </span>for a directory</p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">* </span>for an executable file</p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">@ </span>for a symbolic link</p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">| </span>for a named pipe</p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">= </span>for a Unix domain socket</p><p style="padding-top: 8pt;padding-left: 56pt;text-indent: 0pt;text-align: left;">• <span class="s33">% </span>and <span class="s33"># </span>for character and block devices, respectively</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">You can do this in completion listings too. In <span class="s33">bash</span>, you have to set the <span class="s33">visible-stats </span>read- line variable to <span class="s33">On</span>, while in <span class="s33">zsh </span>it is enabled by default but can be disabled by turning the <span class="s33">list_types </span>option off.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Another feature of <span class="s33">ls</span>, enabled by the <span class="s33">-x </span>option, is to change the order of the listed files to be by rows first instead of columns. You can achieve the same effect in <span class="s33">zsh </span>by turning the <span class="s33">list_rows_first </span>option on and in <span class="s33">bash </span>by setting the <span class="s33">print-completions-horizontally </span>readline variable. This doesn’t just apply to files, however: it will affect the order of all completion lists.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><span><img width="508" height="357" alt="image" src="Image_207.png"/></span></p><p class="s40" style="padding-top: 10pt;padding-left: 136pt;text-indent: 0pt;text-align: left;">CONFIGURING COMPLETION USING STYLES</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-left: 49pt;text-indent: 0pt;line-height: 115%;text-align: left;">In the section “Shell Options” in Chapter 5, shell options were introduced as the primary mechanism by which shells allow their behavior to be configured. For completion, a much more powerful mechanism is needed. Styles serve this purpose in zsh. We’ll provide a brief introduction so that you are comfortable with their use over the following sections.</p><p class="s33" style="padding-left: 49pt;text-indent: 0pt;line-height: 115%;text-align: left;">Styles are defined with the zstyle command. zstyle takes a number of arguments. The first is a context string that allows a style to take on different values in different contexts. Don’t worry too much about these for now; we start with simple context strings and will only slowly progress to the more complex ones. The second argument is the name of the style. All subsequent arguments give its value.</p><p class="s33" style="padding-left: 49pt;text-indent: 0pt;line-height: 115%;text-align: left;">The context strings are made up of a colon-delimited list of tokens. Each token corresponds to some aspect of the current context when performing completion. When you set a style, you can use a pattern to match the range of contexts for which you want your style to apply. More specific contexts take precedence over vague ones. The least specific context pattern you might use would be :completion:*. This is useful for any settings that you want to make the default.</p><p class="s33" style="padding-left: 49pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The actual make-up of contexts is as follows:</p><p class="s33" style="padding-top: 8pt;padding-left: 49pt;text-indent: 0pt;text-align: left;">:completion:<span class="s32">function</span>:<span class="s32">completer</span>:<span class="s32">command</span>:<span class="s32">argument</span>:<span class="s32">tag</span></p><p class="s33" style="padding-top: 8pt;padding-left: 49pt;text-indent: 0pt;line-height: 115%;text-align: left;">This is useful to keep written down somewhere as a reference, but don’t worry too much about it just yet. Each of the components will be introduced later as and when they are used in examples.</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark517"><span class="s27">238 </span></a>C HA P T E R 10 <span class="s28">■ </span>C O M P L E T I O N</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part266.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part268.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
