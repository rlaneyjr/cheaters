<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Prefixes and Suffixes</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part422.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part424.htm">Next &gt;</a></p><h4 style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark775">Prefixes and Suffixes</a></h4><p style="padding-top: 6pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">When performing matching, the completion system needs to know what is before and after the cursor and what parts of this it should consider. In addition to the special completion variables we have seen so far are a number of further variables which hold this information. They are listed in Table 15-3.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 4pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">Table 15-3. <span class="s32">Special Completion Variables</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:40.2pt" cellspacing="0"><tr style="height:15pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="text-indent: 0pt;text-align: left;">Before the Cursor</p></td><td style="width:96pt;border-top-style:solid;border-top-width:1pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="padding-left: 18pt;text-indent: 0pt;text-align: left;">After the Cursor</p></td><td style="width:199pt;border-top-style:solid;border-top-width:1pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">Purpose</p></td></tr><tr style="height:14pt"><td style="width:84pt;border-top-style:solid;border-top-width:1pt"><p class="s58" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">PREFIX</p></td><td style="width:96pt;border-top-style:solid;border-top-width:1pt"><p class="s58" style="padding-top: 2pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">SUFFIX</p></td><td style="width:199pt;border-top-style:solid;border-top-width:1pt"><p class="s57" style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;line-height: 10pt;text-align: left;">The part of the current word to be used</p></td></tr><tr style="height:15pt"><td style="width:84pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:96pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:199pt"><p class="s57" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">in matching</p></td></tr><tr style="height:15pt"><td style="width:84pt"><p class="s58" style="padding-top: 3pt;text-indent: 0pt;text-align: left;">IPREFIX</p></td><td style="width:96pt"><p class="s58" style="padding-top: 3pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">ISUFFIX</p></td><td style="width:199pt"><p class="s57" style="padding-top: 3pt;padding-left: 17pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Those parts of the current word to be ignored</p></td></tr><tr style="height:14pt"><td style="width:84pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:96pt"><p style="text-indent: 0pt;text-align: left;"><br/></p></td><td style="width:199pt"><p class="s57" style="padding-left: 17pt;text-indent: 0pt;text-align: left;">for the purposes of matching</p></td></tr><tr style="height:27pt"><td style="width:84pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s58" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">QIPREFIX</p></td><td style="width:96pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s58" style="padding-top: 2pt;padding-left: 18pt;text-indent: 0pt;text-align: left;">QISUFFIX</p></td><td style="width:199pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s57" style="padding-top: 2pt;padding-left: 17pt;padding-right: 32pt;text-indent: 0pt;text-align: left;">The quoted string outside of the word being completed</p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">When completion starts out, <span class="s33">PREFIX </span>and <span class="s33">SUFFIX </span>hold the current word between them while <span class="s33">IPREFIX </span>and <span class="s33">ISUFFIX </span>will be empty. By transferring a string from the beginning of <span class="s33">PREFIX </span>to the end of <span class="s33">IPREFIX</span>, completion can be restricted to just a part of the current word. For instance:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">IPREFIX=&quot;${IPREFIX}${PREFIX%%/*}/&quot; PREFIX=&quot;${PREFIX#*/}&quot;</p><p style="padding-top: 7pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">This might be used in filename completion to allow an initial directory portion of the current word to be ignored. This is exactly the same as the following:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">compset -P &#39;*/&#39;</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">After completion, the final word will begin with whatever was in <span class="s33">IPREFIX </span>when the match was added. That will be followed by any prefix specified with the <span class="s33">-P </span>option to <span class="s33">compadd</span>. Next appears</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark815"><span class="s27">404 </span></a>CHAPTER 15 <span class="s28">■ </span>W RIT ING COMP LET ION F UNCTI ON S</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">the match itself. The end of the word after the match follows the same structure in reverse using suffixes instead of prefixes.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_316.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">■<span class="s23">Tip </span><span class="s19">You can actually put what you like in these special variables before calling compadd. If you’re writing a completer or stand-alone completion widget, this can be useful in producing some unusual effects. Also useful in these situations is compadd’s -U option, which disables the internal matching. Both of these things are beyond the scope of this book.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_317.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part424.htm">Hidden Prefixes</a><a class="toc0" href="part425.htm">Removable Suffixes</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part422.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part424.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
