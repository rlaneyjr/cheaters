<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Prompts in zsh</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part157.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part159.htm">Next &gt;</a></p><h4 style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark299">Prompts in zsh</a></h4><p style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">Basic prompts in <span class="s33">zsh </span>are quite similar to those in <span class="s33">bash</span>. The main difference is the way in which escape sequences are handled. Instead of a backslash, they are introduced by a percent sign. Earlier we saw other types of escape that use percent signs, so this isn’t too surprising. It will also be familiar to you if you know about prompts in the shell <span class="s33">tcsh</span>.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">For percent escapes to be replaced, the option <span class="s33">prompt_percent </span>has to be turned on, as it usually is. (You’d only turn it off if you needed compatibility with some other shell without these substitutions.)</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">To be able to include variables and other standard substitutions in your prompts, the option <span class="s33">prompt_subst </span>has to be turned on. This is <i>not </i>on by default, since very old versions of <span class="s33">zsh </span>didn’t have the option. It’s probably a good idea just to turn it on (with <span class="s33">setopt prompt_subst</span>) even if you don’t use it; unless you have stray unquoted <span class="s33">$</span>’s in your prompt, which isn’t likely, it’s harmless. (<span class="s33">zsh </span>prompts traditionally end with a <span class="s33">% </span>rather than a <span class="s33">$</span>.) If you do, you can simply put a backslash in front of the <span class="s33">$ </span>in the prompt definition.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">There are two other options to use with prompts. Many people have problems with the option <span class="s33">prompt_cr</span>. It is normally turned on, which makes <span class="s33">zsh </span>print a “carriage return” character before printing a prompt. This makes the prompt line up with the left edge of the terminal— even if there was something there. This looks a bit odd in something like the following:</p><p class="s33" style="padding-top: 6pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh% <b>echo -n &#39;No newline&#39;</b></p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh%</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">The <span class="s33">-n </span>option to <span class="s33">echo </span>(and to <span class="s33">print</span>) stops it from printing a newline at the end. The text has vanished completely, however. That’s because of the carriage return at the start of the next prompt. You can turn the option off:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">zsh% <b>setopt no_prompt_cr </b>zsh% <b>print -n &#39;No newline&#39; </b>No newlinezsh%</p><p style="padding-top: 7pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">Why is this option turned on by default? It’s similar to the reason we needed the <span class="s33">\[ </span>and <span class="s33">\] </span>when we inserted escape sequences to change the color in <span class="s33">bash</span>. <span class="s33">zsh </span>keeps track of the print column so that it knows when the output wraps around to the next line. That information is also crucial for printing prompts on the right-hand side of the screen with <span class="s33">RPS1</span>, as discussed below. Most users don’t need to print out a lot of things without newlines at the end; for these people, having the <span class="s33">prompt_cr </span>option set means the shell does the right thing most of the time. If you don’t like it, try with the option not set and see what difference it makes.</p><p class="s29" style="padding-top: 3pt;padding-left: 39pt;text-indent: 0pt;text-align: right;"><a name="bookmark329">CHAPTER 7 </a><span class="s28">■ </span>PROMPT S <span class="s27">151</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="toc">&nbsp;</p><div class="toc"><a class="toc0" href="part159.htm">Previewing zsh Prompts</a><a class="toc0" href="part160.htm">Prompt Escapes in zsh</a><a class="toc1" href="part161.htm">Directory Components and Full Directory Names</a><a class="toc1" href="part162.htm">Showing Information About What the Shell Is Executing</a><a class="toc1" href="part163.htm">Visual Effects</a><a class="toc0" href="part164.htm">Advanced Examples</a><a class="toc1" href="part165.htm">Ternary Expressions</a><a class="toc1" href="part166.htm">Truncating Prompts</a><a class="toc0" href="part167.htm">Variables in Prompts</a><a class="toc0" href="part168.htm">Prompt Themes</a><a class="toc0" href="part169.htm">Showing Prompts on the Right-hand Side</a><a class="toc0" href="part170.htm">Prompts for Spell Checking</a><a class="toc0" href="part171.htm">Timing</a><a class="toc0" href="part172.htm">Watching Logins and Logouts</a><a class="toc0" href="part173.htm">More Special Output Formatting</a></div><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part157.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part159.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
