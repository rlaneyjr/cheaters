<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Negative Pattern Matching</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part225.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part227.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark416">Negative Pattern Matching</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: justify;">The form <span class="s33">!(</span><i>expr</i><span class="s33">) </span>matches anything except a pattern in <i>expr</i>. As before, <i>expr </i>can be a list of alternatives separated by vertical bars. The implications of not matching a pattern are more complicated than you might think at first:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">$ <b>echo !(a)*</b></p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">a aone aonetwo aonetwoonetwo</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">What? We’ve told it not to match <span class="s33">a </span>at the start, and yet every single match it’s come up with does. How come?</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">The matcher first finds the longest string that matches <span class="s33">!(a)</span>, and then matches the star. Anything matches the star, so in each case we simply need any string that doesn’t match <span class="s33">a</span>. In the case of <span class="s33">a </span>itself, that’s an empty string, and in the case of the others, it’s the entire string. The star then ensures everything else matches.</p><p style="padding-left: 59pt;text-indent: 0pt;line-height: 10pt;text-align: left;">In other words, <span class="s33">!(a) </span>can match any string other than <span class="s33">a</span>. It could be <span class="s33">b</span>, but it could also be</p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">aa<span class="p">. The string matched is not required to be a single letter.</span></p><p style="padding-top: 1pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: justify;">The most common uses of that syntax are when the entire file pattern is inside. For example, the pattern <span class="s33">!(*.o) </span>matches all files that don’t end in <span class="s33">.o</span>. This is more intuitive than the previous example, because either the file matches the entire pattern or it doesn’t.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_197.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 41pt;text-indent: 0pt;line-height: 117%;text-align: left;">■<span class="s23">Note </span><span class="s19">Compare this with the zsh extended globbing syntax ^*.o in the section “Negated Matches,” later in this chapter. In fact, zsh supports all the operators that are provided by the bash extglob option. You make them work in zsh by turning on the option ksh_glob. (It has this name because ksh was the first shell to have this syntax.) Then you can try out all the examples in zsh, too. Most zsh users don’t use the ksh_glob option, however, since zsh provides its own equally powerful patterns.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_198.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part225.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part227.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
