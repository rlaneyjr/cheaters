<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Setting Up Variables</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part126.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part128.htm">Next &gt;</a></p><h4 style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark253">Setting Up Variables</a></h4><p style="padding-top: 6pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">In order to enable the shell history feature, you need to know how to arrange for the shell to save the lines you’ve typed and restore them for subsequent sessions. This is done by setting variables to indicate the size of the history in lines (every time you get a new prompt is a new line), how much to save, and in which file to save it. <span class="s33">bash </span>has this set up to work by default, but <span class="s33">zsh </span>doesn’t. Here are the three crucial variables controlling history for each shell:</p><p style="text-indent: 0pt;text-align: left;"><br/></p><table style="border-collapse:collapse;margin-left:40.2pt" cellspacing="0"><tr style="height:14pt"><td style="width:77pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="text-indent: 0pt;line-height: 11pt;text-align: left;">Variable in <span class="s62">bash</span></p></td><td style="width:103pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="padding-left: 15pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Variable in <span class="s62">zsh</span></p></td><td style="width:199pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s56" style="padding-left: 30pt;text-indent: 0pt;line-height: 11pt;text-align: left;">Purpose</p></td></tr><tr style="height:17pt"><td style="width:77pt;border-top-style:solid;border-top-width:1pt"><p class="s58" style="padding-top: 1pt;text-indent: 0pt;text-align: left;">HISTSIZE</p></td><td style="width:103pt;border-top-style:solid;border-top-width:1pt"><p class="s57" style="padding-top: 3pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">Same</p></td><td style="width:199pt;border-top-style:solid;border-top-width:1pt"><p class="s57" style="padding-top: 3pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">Number of lines stored within the shell</p></td></tr><tr style="height:18pt"><td style="width:77pt"><p class="s58" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">HISTFILE</p></td><td style="width:103pt"><p class="s57" style="padding-top: 4pt;padding-left: 16pt;text-indent: 0pt;text-align: left;">Same</p></td><td style="width:199pt"><p class="s57" style="padding-top: 4pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">File where history is saved for future use</p></td></tr><tr style="height:18pt"><td style="width:77pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s58" style="padding-top: 2pt;text-indent: 0pt;text-align: left;">HISTFILESIZE</p></td><td style="width:103pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s58" style="padding-top: 4pt;padding-left: 17pt;text-indent: 0pt;text-align: left;">SAVEHIST</p></td><td style="width:199pt;border-bottom-style:solid;border-bottom-width:1pt"><p class="s57" style="padding-top: 4pt;padding-left: 30pt;text-indent: 0pt;text-align: left;">Maximum number of lines in <span class="s58">$HISTFILE</span></p></td></tr></table><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">bash <span class="p">has defaults for all these: both sizes are set to 500, and the file is set to </span>~/.bash_history<span class="p">. This means the shell will remember up to 500 lines internally, and when you exit it will save all of them in the file </span>.bash_history<span class="p">, located in your home directory. Then when you start up any other </span>bash <span class="p">it will look in that file and read the history back.</span></p><p class="s33" style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">zsh <span class="p">only sets </span>HISTSIZE <span class="p">by default, and then to the rather small value of 30, so it will only remember 30 lines internally. The other two aren’t assigned default values. You should assign only integer values to </span>HISTSIZE <span class="p">and </span>SAVEHIST<span class="p">.</span></p><p style="padding-left: 58pt;text-indent: 0pt;line-height: 10pt;text-align: left;">You can use the same values as the <span class="s33">bash </span>defaults by adding the following to your <span class="s33">.zshrc</span>:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">HISTFILE=~/.bash_history HISTSIZE=500 SAVEHIST=500</p><p class="s27" style="padding-top: 7pt;padding-left: 39pt;text-indent: 0pt;text-align: right;">123</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark271"><span class="s27">124 </span></a>CHAPTER 6 <span class="s28">■ </span>MORE ABOUT SHELL H I STORY </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">This makes the shells share the same history. The shells have so much syntax in common that it often makes sense to do that. That assumes you use both shells sometimes, perhaps for their different features. Sharing history files usually works since the file just contains a list of the strings you typed. If you often use another shell, such as <span class="s33">csh </span>or <span class="s33">tcsh</span>, you might consider sharing history between them by using <span class="s33">~/.history</span>. This is the most common name used by <span class="s33">csh </span>and <span class="s33">tcsh</span>. Many complex commands in those shells are very different from <span class="s33">zsh </span>or <span class="s33">bash</span>, so not all the history will be useful.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">Sharing history between different shells doesn’t work so well if you’re using the <span class="s33">extended_history </span>option in <span class="s33">zsh</span>, which saves extra information. In that case, you’d better make <span class="s33">zsh</span>’s <span class="s33">HISTFILE </span>a different file from any that you use for other shells.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">It’s normally reasonable to increase <span class="s33">HISTSIZE </span>(in either shell), <span class="s33">SAVEHIST </span>(<span class="s33">zsh</span>), or <span class="s33">HISTFILESIZE </span>(<span class="s33">bash</span>) to a number indicative of the total lines you’d like to store in the history. The shells were first written in an age when computers had much less disk space than they do now. Nowadays, a few hundred kilobytes of shell history is not considered a lot of space.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">You might wonder what happens if <span class="s33">HISTSIZE </span>and <span class="s33">SAVEHIST </span>are different. There’s no problem, in fact. If <span class="s33">SAVEHIST </span>is smaller, the shell won’t save all the lines, and if <span class="s33">HISTSIZE </span>is smaller, the shell will write a truncated file. Keeping them the same is the obvious thing to do, but again, we detail some special cases below.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">If your <span class="s33">zsh </span>came preinstalled on your computer, or you installed it from a package created by the suppliers of your operating system, you may well find there are default values for all three variables in the global <span class="s33">/etc/zshrc </span>file. In that case, the file given by <span class="s33">HISTFILE </span>probably already contains a lot of history. That’s one reason for not changing it.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">You can change the value of <span class="s33">HISTSIZE </span>from the command line in order to save more commands, if you like. The shell won’t forget the ones you already have. If you reduce <span class="s33">HISTSIZE</span>, the shell will remove the ones at the start of the history, so the most recent ones are still there.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part126.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part128.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
