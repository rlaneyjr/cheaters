<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Exact Ambiguous Matches</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part287.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part289.htm">Next &gt;</a></p><h4 style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark509">Exact Ambiguous Matches</a></h4><p style="padding-top: 6pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">If you invoke completion on a word and the word is already complete and the matching unam- biguous, the completion system accepts the word. There won’t be any characters to actually <i>complete </i>but there may be a suffix to add:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>cd /usr/bin</b>&lt;tab&gt;</p><p class="s67" style="padding-top: 1pt;padding-left: 38pt;text-indent: 0pt;text-align: center;">➤ <span class="s33">cd  /usr/bin/</span></p><p style="padding-top: 8pt;padding-left: 58pt;text-indent: 0pt;text-align: left;">Sometimes, though, one match may be exact but the completion is still ambiguous.</p><p style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">Consider this example:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">%  <b>ls  -F</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zsh-4.2.1/ zsh-4.2.1-doc.tar.bz2 zsh-4.2.1.tar.bz2</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>bzcat zsh-4.2.</b>1&lt;tab&gt;</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zsh-4.2.1/ zsh-4.2.1-doc.tar.bz2 zsh-4.2.1.tar.bz2</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">In this example, the directory matches exactly but both files also match. This behavior is not quite ideal when you want completion to accept the exact match because you can only do that using menu completion. In practice, all that selecting the match would do in this case is add a slash as a suffix. Adding a slash manually is not a big inconvenience, so most people prefer this behavior. If you do want completion to accept exact matches, you can turn the <span class="s33">rec_exact </span>option on. (The name is short for “recognize exact”.) That would result in only the directory matching in this example.</p><p style="padding-left: 58pt;text-indent: 0pt;line-height: 10pt;text-align: left;">When accepting a match does more than adding a suffix, the issue becomes more serious.</p><p style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">This occurs when using expansion:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>foo=/usr/local</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>foobar=/usr</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>echo $foo</b>&lt;tab&gt;</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">So what should it do here? It could either expand the exact match, resulting in <span class="s33">/usr/local</span>, or it could offer the two variables as matches. The default behavior is to complete the variable names. With old-style completion using the <span class="s33">expand-or-complete </span>editor command, the situation is treated just like the previous example. This means that both matches are considered unless the <span class="s33">rec_exact </span>option is set.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">When using <span class="s33">_expand </span>from the new completion system, the behavior is instead controlled by the <span class="s33">accept-exact </span>style. This has the advantage over <span class="s33">rec_exact </span>that it only applies to the</p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">_expand <span class="p">completer:</span></p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion:*:expand:*&#39;  accept-exact  true</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark539"><span class="s27">260 </span></a>CHAPTER 10 <span class="s28">■ </span>COMPLETION </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">With this style, completion will now expand <span class="s33">$foo</span>. In <span class="s33">zsh </span>4.2, it is also possible to use the value <span class="s33">continue </span>for the style. This will force completion to continue after <span class="s33">_expand </span>has finished, allowing all three possibilities to match:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">% <b>echo $foo</b>&lt;tab&gt; <b>all expansions</b></p><p class="s33" style="padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">/usr/local</p><p class="s46" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">parameter</p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">foo foobar</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part287.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part289.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
