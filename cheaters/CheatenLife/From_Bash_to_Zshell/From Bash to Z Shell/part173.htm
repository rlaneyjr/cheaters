<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>More Special Output Formatting</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part172.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part174.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark314">More Special Output Formatting</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">We’ve demonstrated how you can incorporate special visual effects into your prompts using special escape sequences such as <span class="s33">%B </span>for bold, and also how to put colors in prompts. Two <span class="s33">zsh </span>commands allow you to send other sorts of output to the terminal resulting in special effects. The results you can obtain are similar to those we discussed in the section “Special Effects” earlier in this chapter, but they are independent of the terminal type. The effects can be quite powerful, but they are also quite inconvenient since you need to know at least a little of how Unix-style systems handle different terminals.</p><p style="padding-left: 41pt;text-indent: 17pt;line-height: 115%;text-align: justify;">In the old days, there was <i>termcap</i>, a library of terminal capabilities. Everything the terminal could do was encoded as a set of two-character codes, some of which took numeric arguments. For example, the string <span class="s33">RI </span>means move right a given number of characters. In <span class="s33">zsh </span>you can use the command <span class="s33">echotc </span>to output one of these codes, with the arguments given if any:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh% <b>print -n hello; echotc RI 32; print goodbye</b></p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">hello goodbye</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">We used <span class="s33">print -n </span>to output a string without a newline, then made the cursor move right 32 characters, then printed a string, this time with a newline at the end. Table 7-6 shows some <span class="s33">termcap </span>codes you might find useful.</p><p class="s29" style="padding-top: 3pt;padding-left: 39pt;text-indent: 0pt;text-align: right;"><a name="bookmark338">CHAPTER 7 </a><span class="s28">■ </span>PROMPT S <span class="s27">161</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 5pt;padding-bottom: 4pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">Table 7-6. <span class="s32">A Few of the More Useful termcap Codes</span></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="417" height="1" alt="image" src="Image_167.png"/></span></p><p class="s48" style="padding-bottom: 2pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">Code Function</p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="417" height="1" alt="image" src="Image_168.png"/></span></p><p class="s65" style="padding-top: 3pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">Move to Absolute Position</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">cl <span class="s51">Clears window and moves cursor to top left</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">ll <span class="s51">Moves cursor to lower left of window</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">ho <span class="s51">Moves cursor to top left of window</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;"><span class="s61">cm </span>Moves cursor to row <i>arg1</i>, column <i>arg2 </i>from top left</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">cr <span class="s51">Carriage return: moves cursor to start of line</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s65" style="padding-left: 40pt;text-indent: 0pt;text-align: justify;">Delete and Insert Text</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">cd <span class="s51">Clears from cursor to end of screen</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">ce <span class="s51">Clears from cursor to end of line</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;line-height: 175%;text-align: justify;"><span class="s61">dc </span>Deletes one character, moving the remainder of the line left <span class="s61">DC </span>Deletes <i>arg </i>characters, moving the remainder of the line left <span class="s61">ec </span>Turns <i>arg </i>characters to spaces starting from cursor</p><p class="s51" style="padding-left: 40pt;text-indent: 0pt;line-height: 179%;text-align: justify;"><span class="s61">ic </span>Inserts one character, moving the remainder of the line right <span class="s61">IC </span>Inserts <i>arg </i>characters, moving the remainder of the line right <b>Move Cursor to Relative Position</b></p><p class="s61" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: justify;">up <span class="s51">Moves cursor up one line</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;"><span class="s61">UP </span>Moves cursor up <i>arg </i>lines</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">do <span class="s51">Moves cursor down one line</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;"><span class="s61">DO </span>Moves cursor down <i>arg </i>lines</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">le <span class="s51">Moves cursor left one character</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;"><span class="s61">LE </span>Moves cursor left <i>arg </i>characters</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">nd <span class="s51">Moves cursor right one character</span></p><p class="s51" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;"><span class="s61">RI </span>Moves cursor right <i>arg </i>characters</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s65" style="padding-left: 40pt;text-indent: 0pt;text-align: justify;">Enable and Disable Special Text Effects</p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">md <span class="s51">Starts bold mode for text</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">mr <span class="s51">Starts reverse mode for text</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">so <span class="s51">Starts standout mode for text</span></p><p class="s61" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: justify;">se <span class="s51">Ends standout mode for text</span></p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark339"><span class="s27">162 </span></a>CHAPTER 7 <span class="s28">■ </span>PROMPTS </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s13" style="padding-top: 4pt;padding-bottom: 4pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">Table 7-6. <span class="s32">A Few of the More Useful termcap Codes (Continued)</span></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="417" height="1" alt="image" src="Image_169.png"/></span></p><p class="s48" style="padding-bottom: 2pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">Code Function</p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="417" height="1" alt="image" src="Image_170.png"/></span></p><p class="s61" style="padding-top: 2pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">us <span class="s51">Starts underlining text</span></p><p class="s61" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">ue <span class="s51">Ends underlining text</span></p><p class="s61" style="padding-top: 5pt;padding-bottom: 4pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">me <span class="s51">Ends all special text modes, return to normal text</span></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="417" height="1" alt="image" src="Image_171.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s66" style="padding-left: 47pt;text-indent: -6pt;line-height: 109%;text-align: left;">* Where <span class="s14">arg </span>is shown, the code needs to be followed by a numeric argument; where <span class="s14">arg1 </span>and <span class="s14">arg2 </span>are shown, two numeric arguments are required.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">There are <span class="s33">termcap </span>codes for bold and reverse characters, for the strings sent by certain keys (useful on input), and for clearing bits of the display, as well as moving the cursor; anything you might want to do to the terminal other than simply outputting a character is probably there somewhere. We show a few of the sequences you are most likely to want in Table 7-6. However, different terminals have different sets of capabilities; there is no standard for things the terminal has to do, so the results will vary. <span class="s33">zsh </span>gives you an error message if the terminal doesn’t have a particular capability. Further discussion of the things you can do with <span class="s33">termcap </span>are well outside the scope of this book. Have a look at the manual entry for <span class="s33">termcap </span>if you want to know more.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">When <span class="s33">termcap </span>started to look a bit outmoded, it was replaced by a system called <i>terminfo</i>, whose derivation is obvious enough. <span class="s33">zsh </span>isn’t always compiled with links to the <span class="s33">terminfo </span>data- base, but if it is then the command <span class="s33">echoti </span>is available, and you should consult the <span class="s33">terminfo </span>manual entry. The names of <span class="s33">terminfo </span>capabilities are often similar to <span class="s33">termcap </span>ones, but are not restricted to two characters. Your system will use one of the two. Quite often both are available.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part172.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part174.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
