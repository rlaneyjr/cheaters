<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Formatting Messages</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part267.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part269.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark489">Formatting Messages</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: justify;">Along with the list of matches, <span class="s33">zsh </span>is able to display a number of useful informational messages. These are disabled by default but can be enabled using the <span class="s33">format </span>style. The <span class="s33">format </span>style is so named because the value of the style gives the format to print the message in.</p><p style="padding-left: 42pt;text-indent: 17pt;line-height: 115%;text-align: left;">The <span class="s33">true </span>command does not take any arguments, so if you try to complete after it, nothing will happen. Try it and see:</p><p class="s33" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: justify;">%  <b>true  </b>&lt;tab&gt;</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">Now if we set the <span class="s33">format </span>style, and try again, a message is displayed:</p><p class="s33" style="padding-top: 8pt;padding-left: 42pt;text-indent: 0pt;text-align: justify;">%  <b>zstyle  &#39;:completion:*&#39;  format  %d</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: justify;">%  <b>true  </b>&lt;tab&gt;</p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: justify;">no  argument  or  option</p><p style="padding-top: 8pt;padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">The <span class="s33">%d </span>in the style’s value is replaced by the actual text of the message. This allows a format such as <span class="s33">Alert:  %d </span>to be used so that messages are preceded by the word <span class="s33">Alert</span>. Other special strings that will be familiar from prompt expansion in the section “Prompt Escapes in zsh” in Chapter 7 are also handled. So for instance, you can enclose the description in <span class="s33">%S </span>and <span class="s33">%s </span>to cause it to be displayed in standout mode.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_208.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">■<span class="s23">Caution </span><span class="s19">If you did not run compinit as described in the section “zsh’s compinit” earlier in this chapter, none of this will work. compinit does not just enable completion definitions for common Unix commands; it enables some more central functionality as well. Any configuration we describe that uses zstyle will be dependent on compinit having been run.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_209.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">The context used for the style above extends the reach of the style across the whole completion system. Using a more specific context, we can make a style apply only in a more limited range of situations. In this situation, there are a number of types of messages and it can be useful to have a different format for each one. The different types of messages can be distin- guished by the <i>tag </i>used when looking up the style. In the case of the simple example above for the <span class="s33">true </span>command, the <span class="s33">messages </span>tag is used. The tag is the last component of the <span class="s33">zstyle </span>context, so to restrict the format to those messages, the following style can be used:</p><p class="s33" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion:*:messages&#39;  format  %d</p><p style="padding-top: 8pt;padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: justify;">Another possible message type is printed whenever completion is attempted but there are no possible matches. In this case, the <span class="s33">warnings </span>tag is used. So if we want <span class="s33">zsh </span>to print “No matches” in these cases, we can set the following style:</p><p class="s33" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion:*:warnings&#39;  format  &#39;No  matches&#39;</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">If you now type <span class="s33">cat  qqq&lt;tab&gt;</span>, the message “No matches” will be displayed unless a file- name actually matches.</p><p class="s29" style="padding-top: 3pt;padding-left: 304pt;text-indent: 0pt;text-align: left;"><a name="bookmark518">CHAPTER 10 </a><span class="s28">■ </span>COMPLE TION <span class="s27">239</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">In the case of this message, it is possible to get a little more information. If you include <span class="s33">%d </span>somewhere in your message, it will be replaced with a list of the type of things <span class="s33">zsh </span>tried to complete. So let’s try this style instead:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion:*:warnings&#39;  format  &#39;No  matches:  %d&#39;</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Now, trying the same example with the <span class="s33">cat </span>command, you should get the message “No matches: `file&#39;”. For many commands, completion is tried for a whole variety of different types of things together. So you may see messages along the lines of “No matches for: `process ID&#39; or</p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">`job&#39;”.</p><p style="padding-top: 1pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">You may have surmised from these messages that the completion system knows what type of object it is completing. Indeed, this is the case. The types are identified by a tag, and each tag can have a corresponding description. It can be useful to see these descriptions anyway, even when completion does find matches. This is another type of message, using the tag <span class="s33">descriptions</span>. This time let’s format them in bold:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zstyle &#39;:completion:*:descriptions&#39; format %B%d%b</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Now, if you try completion with this style, you will see a description of the types of matches above the list of matches:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>more </b>&lt;tab&gt;</p><p class="s46" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">file</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">bin downloads mbox photos src</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">The <span class="s33">descriptions </span>and <span class="s33">messages </span>tags are actually an example of special case in that they are only used when looking up certain styles. Normally, the last component of the context when setting styles contains the tag identifying the type of thing being completed. For example, there is a <span class="s33">files </span>tag (though its description, as seen in the example above, is just “file”).</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part267.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part269.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
