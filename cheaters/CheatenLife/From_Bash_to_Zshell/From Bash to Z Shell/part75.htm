<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Emacs and vi Modes</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part74.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part76.htm">Next &gt;</a></p><p class="s35" style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark151">Emacs and vi Modes</a></p><p style="padding-top: 5pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">Both <span class="s33">bash </span>and <span class="s33">zsh </span>offer two editing modes based around the Emacs and <span class="s33">vi </span>editors. The emacs mode presents the more obvious operation for people who have no particular preference, whereas vi behavior can seem a bit strange at first. In vi mode, the keyboard can be in two different states, where the same keys are used either for entering text or for performing editing operations. There is no visual indication of whether you are in the insert or editing state. (These are usually known as “insert mode” and “command mode” by <span class="s33">vi </span>users.) Because Emacs is a little easier to pick up, we will spend most of this section talking about this editing mode. If you know Emacs’s reputation for complexity, don’t worry: the shell’s editor is much simpler, and most editing is done just with a few keystrokes.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Setting the editing style is done differently in <span class="s33">bash </span>and <span class="s33">zsh</span>. In fact, virtually all the shell commands used to control editing are completely different in the two shells. In <span class="s33">bash</span>, to enter emacs or vi mode you can set options as follows:</p><p class="s33" style="padding-top: 6pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">bash$ <b>set -o emacs</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">bash$ <b>set -o vi</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">In <span class="s33">zsh</span>, almost all the commands that change the behavior of keys use the <span class="s33">bindkey </span>command. As we’ll see in the section “Configuration and Key Binding: readline and zle” in this chapter, this command is normally used for associating a keystroke with an editor command. However, it’s also used for putting the line editor into emacs or vi mode. The following shows the command to enter emacs mode, then the command to enter vi mode:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zsh% <b>bindkey -e</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zsh% <b>bindkey -v</b></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 17pt;line-height: 114%;text-align: left;">(From version 4.2, <span class="s33">zsh </span>understands <span class="s33">set -o vi </span>and <span class="s33">set -o emacs</span>. We suggest you learn about <span class="s33">bindkey</span>, however, since it is so useful in other ways.)</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 114%;text-align: left;">If you usually use <span class="s33">vi </span>—or your system administrator thinks you do—one or both of the environment variables <span class="s33">EDITOR </span>and <span class="s33">VISUAL </span>may be set to <span class="s33">vi</span>. Many commands use this variable to determine your preference when they need to start up an external editor. <span class="s33">zsh </span>will also examine these variables when it starts. If either contains <span class="s33">vi </span>(including names like <span class="s33">elvis</span>, which is an editor like <span class="s33">vi</span>), it will set the editing mode to vi. So if you are sure you want to use emacs mode, it is a good idea to include an explicit line <span class="s33">bindkey -e </span>in <span class="s33">~/.zshrc</span>.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: justify;">If you use other editors, a lot of things probably won’t be set up quite how you want them. We’ll talk about how to configure the shells later in the section “Configuration and Key Binding: readline and zle.”</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark193"><span class="s27">78 </span></a>CHAPTER 4 <span class="s28">■ </span>EN T E R I N G A N D ED I T I N G T H E CO M M A N D L I N E</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part74.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part76.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
