<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Defining Different Words to Complete</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part285.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part287.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark507">Defining Different Words to Complete</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: justify;">Sometimes, the completion system does not seem to complete those words you want, and it is helpful to make it complete a totally different list of things. A common example of this is when completing hostnames. By default, a list will be built up of hosts from sources such as the</p><p class="s33" style="padding-left: 41pt;text-indent: 0pt;text-align: left;">/etc/hosts <span class="p">file. The list is therefore not always going to be what you want.</span></p><p style="padding-top: 1pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: justify;">To deal with this, you could write your own <span class="s33">_hosts </span>function to override the default, but it is a sufficiently common case to have warranted a simpler mechanism in <span class="s33">zsh</span>. If the <span class="s33">hosts </span>style is set to a list of hostnames, those are completed instead. For example:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: justify;">zstyle &#39;*&#39; hosts Indigo athlon ultra1</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_217.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 42pt;text-indent: 0pt;line-height: 117%;text-align: left;">■<span class="s23">Tip </span><span class="s19">If you include ${REMOTEHOST:-${SSH_CLIENT%%  *}} in the list of hosts with this style, then when you log on from a remote machine, it will try to complete the name of that remote machine. This is especially useful when you are logging on to remote servers from a dial-up Internet connection where you have no real hostname and your IP address is dynamic. The REMOTEHOST environment variable is set on some systems and the ssh daemon sets the SSH_CLIENT environment variable. If neither of these works on your system, you can try parsing the output of the command who  am  i.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_218.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: justify;">In a similar vein to the <span class="s33">hosts </span>style, there is also a <span class="s33">users </span>style. It can be useful on a machine where there are a few thousand users, especially if this causes completion of users to be quite slow. By setting the style to just a list of those people you know or have to deal with, it will only complete them. For example:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zstyle  &#39;*&#39;  users  fred  joe  harry</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="507" height="1" alt="image" src="Image_219.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 42pt;text-indent: 0pt;line-height: 111%;text-align: left;">■<span class="s23">Note </span><span class="s19">We haven’t included the usual :completion: prefix in the context for these styles because it is quite likely that something else unrelated to completion will make use of the same styles in the future.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_220.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">When accessing accounts on various remote machines with commands like <span class="s33">rlogin </span>and <span class="s33">ssh</span>, you typically have to specify both a username and a hostname. Because there is a corre- spondence between these, the <span class="s33">users </span>and <span class="s33">hosts </span>styles are not ideal since you can’t specify which usernames correspond to which hostname. There is a <span class="s33">users-hosts </span>style for this situation. The value for it is simply a list of all your accounts. For example:</p><p class="s33" style="padding-top: 7pt;padding-left: 59pt;text-indent: -17pt;line-height: 115%;text-align: left;">zstyle &#39;:completion:*:rlogin:*:my-accounts&#39; users-hosts \ opk@shell1 okiddle@ultra1 builder@server2</p><p style="padding-top: 7pt;padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">The <span class="s33">my-accounts </span>tag here is used for commands that are typically used for your own accounts. For commands like <span class="s33">talk </span>and <span class="s33">finger</span>, the tag <span class="s33">other-accounts </span>is typically used instead. Also, for commands where a port number can also be specified there are <span class="s33">users-hosts-ports </span>and <span class="s33">hosts-ports </span>styles.</p><p class="s29" style="padding-top: 3pt;padding-left: 304pt;text-indent: 0pt;text-align: left;"><a name="bookmark536">CHAPTER 10 </a><span class="s28">■ </span>COMPLE TION <span class="s27">257</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_221.png"/></span></p><p class="s21" style="padding-top: 4pt;padding-left: 40pt;text-indent: 0pt;line-height: 114%;text-align: justify;">■<span class="s23">Note </span><span class="s19">For ssh, you can configure the default username to use for each host in your ~/.ssh/config file. If you only have one account on each remote machine, it is much better because you only then need to specify the hostname as an argument to ssh in the first place.</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 0pt;line-height: 1pt;text-align: left;"><span><img width="504" height="1" alt="image" src="Image_222.png"/></span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-top: 6pt;padding-left: 40pt;text-indent: 18pt;line-height: 112%;text-align: left;">Similar to the styles mentioned so far in this chapter, there are also <span class="s33">groups</span>, <span class="s33">domains</span>, and <span class="s33">urls </span>styles, all for specifying replacement words to complete. Sometimes however, you want to be able to specify additional words to complete along with those produced by the completion system. Two styles, <span class="s33">fake-parameters </span>and <span class="s33">fake-files</span>, exist that let you do just this.<span class="s43">3 </span>The</p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: justify;">fake-parameters <span class="p">style allows you to specify the names of shell variables to complete. This is especially handy for completion of variable names when writing an assignment because the variable may not exist yet and so cannot be completed. If you specify the names of any long, and often used, variable names with the </span>fake-parameters <span class="p">style, they can then be completed:</span></p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion::*:(-command-|export):*&#39;  fake-parameters  LD_LIBRARY_PATH</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">The context here picks out completion in command position (that includes variable assignments) and completion after <span class="s33">export</span>. <span class="s33">fake-parameters </span>also allows you to specify the type of the fake parameters, so for example where only array variables are completed, it can decide whether or not to include the fake variable. So in the previous example, you might want to use the value <span class="s33">LD_LIBRARY_PATH:scalar</span>,</p><p class="s33" style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">fake-files <span class="p">is useful where your system recognizes file or directory names that don’t really exist. For example, under Cygwin, the special directory </span>/cygdrive <span class="p">allows access to filesystems by their drive letters. Normally, </span>zsh <span class="p">can’t complete </span>/cygdrive <span class="p">because it doesn’t exist in the root directory listing, but with the following style, it works:</span></p><p class="s33" style="padding-top: 6pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zstyle &#39;:completion:*&#39; fake-files &#39;/:cygdrive&#39;</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Note that the value specifies the <i>fake </i>file separately from the directory it is in using a colon to separate them.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part285.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part287.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
