<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Handling Lots of Matches</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part270.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part272.htm">Next &gt;</a></p><p class="s35" style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark492">Handling Lots of Matches</a></p><p style="padding-top: 5pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">If there are many matches, you may see a message like this:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">$  <b>ls  /usr/lib/</b>&lt;tab&gt;</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">Display all 1266 possibilities? (y or n)</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark521"><span class="s27">242 </span></a>CHAPTER 10 <span class="s28">■ </span>COMPLETION </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">This solution is a compromise: questions like this can be disruptive because you have to answer them before you can continue typing, but having to watch a huge list scroll past can be as bad if not worse. Fortunately, there is a better way. The matches can be displayed in an internal pager similar to <span class="s33">more </span>or <span class="s33">pg</span>, with scrolling under your control.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">In <span class="s33">bash</span>, this feature is controlled by the <span class="s33">page-completions </span>readline variable and defaults to being on. In <span class="s33">zsh</span>, this particular feature is made available by a separate module named <span class="s33">zsh/complist</span>. To enable this feature, you need to load this module and set the <span class="s33">list-prompt </span>style to specify the format of a prompt, which will be displayed at the bottom of the screen.</p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 10pt;text-align: left;">For example:</p><p class="s33" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zmodload zsh/complist</p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zstyle  &#39;:completion:*:default&#39;  list-prompt  &#39;%S%M  matches%s&#39;</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">The value of <span class="s33">list-prompt </span>can include the usual prompt escapes along with a number of special sequences, such as the <span class="s33">%M </span>in this example. If you now try the last example again, it will display the first screenful of matches. While scrolling, a number of editor commands take on a different meaning. It is basically designed so that pressing Tab again will advance to the next screen of matches, pressing Return will advance just one line, pressing Ctrl-c will abort the listing and return you to the prompt, and any other key will stop the listing and work as normal. It is possible to configure what different keys do. You just need to use the <span class="s33">listscroll </span>keymap for key bindings to apply when scrolling. We showed how to do this in the section “Keymaps” in Chapter 4. For example, if you’re used to pressing <i>q </i>to exit from your pager, you might be interested in this:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">bindkey -M listscroll q send-break</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">Make sure you have loaded the <span class="s33">zsh/complist </span>module before trying to bind the keys— the keymap won’t exist until the module is loaded.</p><p style="padding-left: 59pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Paging in <span class="s33">bash </span>is very similar to the <span class="s33">more </span>pager and is not configurable.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part270.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part272.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
