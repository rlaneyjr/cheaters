<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Truncating Prompts</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part165.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part167.htm">Next &gt;</a></p><p class="s18" style="padding-left: 40pt;text-indent: 0pt;text-align: left;"><a name="bookmark307">Truncating Prompts</a></p><p style="padding-top: 5pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">The shell has a mechanism for truncating prompts if they get too long. This is useful, for example, if you include the full directory path in your prompt with <span class="s33">%/</span>, and that expands to a long path that uses up a lot of the area in which you are typing:</p><p class="s33" style="padding-top: 7pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">zsh% <b>print -rP &#39;%/&#39;</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">/home/pws/zsh/sourceforge/zsh/Src zsh% <b>print -rP &#39;%10&lt;..&lt;%/&#39;</b></p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">../zsh/Src</p><p style="padding-top: 8pt;padding-left: 40pt;text-indent: 19pt;line-height: 115%;text-align: left;">In the example, first we output the complete current directory using prompt syntax. Next, we printed it again, but preceded the directory escape <span class="s33">%/ </span>with an instruction to truncate the prompt on the left. A tip for remembering that this truncates on the left is that this the direction in which the <span class="s33">&lt; </span>is pointing. The number before the first <span class="s33">&lt; </span>gives the maximum length of the trun- cated string, here 10 characters. The string between the <span class="s33">&lt;’</span>s is used when printing the remainder of the prompt would exceed the given length. As it does, the shell prints the two dots at the left, then whatever fits of the remainder of the prompt, here just eight characters. The rest of the prompt can contain any of the normal features of a prompt. Its length is examined only after all the substitutions have been done. The example therefore shows you how to limit the amount of a directory printed by the total number of characters rather than by the number of segments</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark333"><span class="s27">156 </span></a>CHAPTER 7 <span class="s28">■ </span>PROMPTS </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: justify;">in the path. You can apply truncation only to a particular part of a prompt, too. Truncation is turned off when the length is given as zero, in other words using the expression <span class="s33">%&lt;&lt;</span>. Then the shell applies truncation only up to that point; everything after is printed in full. So the previous expression can be expanded to give</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh% <b>print -rP &#39;%10&lt;..&lt;%/%&lt;&lt;%# &#39;</b></p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">../zshbook%</p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">You have the same truncation for the directory path, but the final two characters are always printed in full.</p><p style="padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">The form <span class="s33">%&gt;&gt; </span>works in exactly the same way, but the prompt is truncated at the right-hand end, and the string between the <span class="s33">&gt;</span>’s is printed there:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh% <b>print -rP &#39;%10&gt;..&gt;%/%&gt;&gt;%# &#39;</b></p><p class="s33" style="padding-top: 1pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">/home/pw..%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part165.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part167.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
