<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Setting Options with set</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part119.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part121.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark232">Setting Options with set</a></p><p style="padding-top: 5pt;padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">Setting options on the command line isn’t usually the most convenient method. There are lots of different settings, and you don’t want to have to type them every time, particularly because the shell was probably started by your terminal emulator and you didn’t get a chance to give any options. As a result, almost all shell users have some option settings in their startup files, and they can be enabled and disabled using <span class="s33">set </span>and <span class="s33">unset</span>, respectively. We’ll discuss both commands in this section.</p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">Both <span class="s33">bash </span>and <span class="s33">zsh </span>use the command <span class="s33">set </span>to turn on options. <span class="s33">set </span>accepts the same options you can give the shell at startup time (as in the previous section). Note, though, that <span class="s33">bash </span>doesn’t let you set any of the options beginning with <span class="s33">-- </span>(two dashes) this way. Those “long options” are used only when you start the shell.</p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">Let’s pick another option, this time one common to both shells: <span class="s33">-v</span>, for “verbose.” This option tells the shell to echo (show) what it’s about to execute. We’ll see two different ways to set this option. First, on the command line as you start the shell:</p><p class="s33" style="padding-top: 6pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">% <b>zsh -v</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">% <b>echo you will see this line twice</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">echo you will see this line twice</p><p class="s29" style="padding-top: 3pt;padding-left: 275pt;text-indent: 0pt;text-align: left;"><a name="bookmark245">CHAPTER 5 </a><span class="s28">■ </span>STARTING THE SHELL <span class="s27">115</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;text-align: left;">you will see this line twice</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">In this first case, you are very likely to see more output immediately after the <span class="s33">zsh -v</span>, before the shell prints its first prompt. That output will come from your startup files being executed, which is a useful way of seeing how things are being set up.</p><p style="padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">When the <span class="s33">echo </span>command is run, the shell first echoes the line. This isn’t very useful when you’ve just typed the line, but it’s handy if the line comes from somewhere else, such as a script or startup file. After echoing the command line, the shell runs it. Here we’re running the <span class="s33">echo </span>command, which simply echoes its arguments. That’s why you see the arguments twice (or three times, depending on how you count).</p><p style="padding-left: 58pt;text-indent: 0pt;line-height: 10pt;text-align: left;">Second, we’ll set the option after starting the shell:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>zsh</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>set -v</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;line-height: 115%;text-align: left;">% <b>echo you will see this line twice </b>echo you will see this line twice you will see this line twice</p><p class="s33" style="padding-left: 40pt;text-indent: 0pt;line-height: 10pt;text-align: left;">%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 58pt;text-indent: 0pt;text-align: left;">To turn the option off again, use <span class="s33">+v </span>instead of <span class="s33">-v</span>:</p><p class="s33" style="padding-top: 8pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">% <b>set +v</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">set +v</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">%  <b>echo  I  will  show  this  only  once.</b></p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">I  will  show  this  only  once.</p><p class="s33" style="padding-top: 1pt;padding-left: 40pt;text-indent: 0pt;text-align: left;">%</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 58pt;text-indent: 0pt;text-align: left;">The <span class="s33">set +v </span>was echoed just before verbosity was turned off.</p><p style="padding-top: 1pt;padding-left: 40pt;text-indent: 18pt;line-height: 115%;text-align: left;">Single-letter options can be confusing: their short names (like <span class="s33">v</span>) don’t offer much about the option’s purpose. Both shells have a more obvious way to set those same options from inside the shell: by using names like <span class="s33">verbose</span>. Only a small set of these names are common to both shells; it so happens that the <span class="s33">verbose </span>option is one of them. The shell manual pages have complete lists of these; in <span class="s33">zsh, </span>the <span class="s33">zshoptions </span>manual page shows you the single-letter options that correspond to each name. (This means you should type <span class="s33">man zshoptions </span>to read it. See the section “Command Lines” in Chapter 1.)</p><p style="padding-left: 40pt;text-indent: 19pt;line-height: 115%;text-align: left;">All options have a descriptive name, but only some have a corresponding single letter. The single letters forms can be difficult to remember. It’s highly recommended that you use the single-letter versions only when starting up the shell by name, following it with options; the difference in speed is unnoticeable, and the difference in readability is considerable.</p><p class="s29" style="padding-top: 3pt;padding-left: 6pt;text-indent: 0pt;text-align: left;"><a name="bookmark246"><span class="s27">116 </span></a>CHAPTER 5 <span class="s28">■ </span>ST ARTI NG THE SHELL </p><p style="text-indent: 0pt;text-align: left;"><br/></p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">Since <span class="s33">set </span>has other purposes as well as option setting, you need to tell the shell there is a named option coming up, which you do with a <span class="s33">-o</span>. To turn off that option you use <span class="s33">+o </span>instead. In the following example, note that the first <span class="s33">echo </span>command is repeated before it is executed, while the second isn’t:</p><p class="s33" style="padding-top: 7pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">% <b>set -o verbose</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">%  <b>echo  This  is  a  verbose  demonstration  of  $SHELL</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">echo This is a verbose demonstration of $SHELL</p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">This  is  a  verbose  demonstration  of  /usr/local/bin/zsh</p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">% <b>set +o verbose</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">set +o verbose</p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">%  <b>echo  This  is  a  demonstration  of  $SHELL  without  the  verbosity</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">This is a demonstration of /usr/local/bin/zsh without the verbosity</p><p style="padding-top: 8pt;padding-left: 60pt;text-indent: 0pt;text-align: left;">You can actually use this form when starting the shell, too:</p><p class="s33" style="padding-top: 8pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">% <b>zsh -o verbose</b></p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;text-align: left;">(possible messages from startup files)</p><p class="s33" style="padding-top: 1pt;padding-left: 42pt;text-indent: 0pt;line-height: 115%;text-align: left;">% <b>echo verbose has been set </b>echo verbose has been set verbose has been set</p><p style="padding-top: 7pt;padding-left: 42pt;text-indent: 18pt;line-height: 185%;text-align: left;">If you need to turn on more than one option, repeat the <span class="s33">-o</span>: <span class="s33">bash$ </span><span class="s46">set -o verbose -o emacs</span></p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 114%;text-align: left;">Be careful to include each <span class="s33">-o</span>, since there’s no error message if you don’t. (It just triggers one of the other uses of <span class="s33">set</span>. See the sidebar “The Many Uses of set” in Chapter 13.)</p><p style="padding-left: 42pt;text-indent: 18pt;line-height: 115%;text-align: left;">The <span class="s33">-o </span>has another use: if you type <span class="s33">set -o </span>on its own, not followed by anything, the shell will show which options are turned on. This didn’t work in older versions of <span class="s33">zsh</span>; use <span class="s33">setopt </span>instead, which we discuss next.</p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part119.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part121.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
