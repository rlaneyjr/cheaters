<!DOCTYPE  html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Appending to the History List</title><link href="navigation.css" rel="stylesheet" type="text/css"/><link href="document.css" rel="stylesheet" type="text/css"/></head><body><p class="top_nav"><a href="part133.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part135.htm">Next &gt;</a></p><p class="s35" style="padding-left: 42pt;text-indent: 0pt;text-align: left;"><a name="bookmark260">Appending to the History List</a></p><p style="padding-top: 5pt;padding-left: 41pt;text-indent: 0pt;line-height: 115%;text-align: left;">It can often happen that you have several shells, each running in a different window. When you log out, all the shells exit at once and they all try to save their history at the same time. The default behavior means that the last to exit will win, and will overwrite the output saved by the others. You can fix this in <span class="s33">bash </span>by using the following setting:</p><p class="s33" style="padding-top: 7pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">bash$ <b>shopt -s histappend</b></p><p style="padding-top: 8pt;padding-left: 59pt;text-indent: 0pt;text-align: left;">The equivalent option in <span class="s33">zsh </span>is set like this:</p><p class="s33" style="padding-top: 8pt;padding-left: 41pt;text-indent: 0pt;text-align: left;">zsh% <b>setopt append_history</b></p><p style="padding-top: 8pt;padding-left: 41pt;text-indent: 18pt;line-height: 115%;text-align: left;">These settings cause lines to be appended to whatever is already in the history. The saved history has the same maximum size, however, so it’s still possible for all output to come from one shell. This is one time where setting the variables <span class="s33">HISTSIZE </span>and <span class="s33">HISTFILESIZE </span>(<span class="s33">bash</span>) or <span class="s33">SAVEHIST </span>(<span class="s33">zsh</span>) to different values is useful. If the saved size is larger than the internal size, output from lots of different shells can fit in the file. The shell will still only read in a number of lines given by <span class="s33">HISTSIZE</span>, but the other values are still present in the history file if you need to search a long way back.</p><p class="s29" style="padding-top: 3pt;padding-left: 247pt;text-indent: 0pt;text-align: left;"><a name="bookmark280">CHAPTER 6 </a><span class="s28">■ </span>MORE AB OU T SHELL HISTOR Y <span class="s27">135</span></p><p style="text-indent: 0pt;text-align: left;"><br/></p><p class="nav">&nbsp;&nbsp;</p><p class="nav">&nbsp;</p><p class="nav"><a href="part133.htm">&lt; Previous</a><span> | </span><a href="../From Bash to Z Shell.html">Contents</a><span> | </span><a href="part135.htm">Next &gt;</a></p><p class="nav">&nbsp;&nbsp;</p></body></html>
