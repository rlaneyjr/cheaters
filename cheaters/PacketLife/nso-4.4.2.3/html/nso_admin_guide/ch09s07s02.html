<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>Rpc, notification, and data authorization -  - NSO 4.4.2.3 Administration Guide</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="index.html" title="NSO 4.4.2.3 Administration Guide" />
      <link rel="up" href="ug.aaa.authorization.html" title="Authorization" />
      <link rel="prev" href="ch09s07s01.html" title="Command authorization" />
      <link rel="next" href="ch09s07s03.html" title="Authorization Examples" />
      <meta xmlns="" name="Section-title" content="Rpc, notification, and data authorization" /><script xmlns="" type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-8356";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><link xmlns="" rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/css/positioning.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><style xmlns="" type="text/css">
      
      #noscript{
      font-weight:bold;
      background-color: #55AA55;
      font-weight: bold;
      height: 25spx;
      z-index: 3000;
      top:0px;
      width:100%;
      position: relative;
      border-bottom: solid 5px black;
      text-align:center;
      color: white;
      }
      
      input {
      margin-bottom: 5px;
      margin-top: 2px;
      }
      .folder {
      display: block;
      height: 22px;
      padding-left: 20px;
      background: transparent url(common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
      }
      span.contentsTab {
      padding-left: 20px;
      background: url(common/images/toc-icon.png) no-repeat 0 center;
      }
      span.searchTab {
      padding-left: 20px;
      background: url(common/images/search-icon.png) no-repeat 0 center;
      }
      
      /* Overide jquery treeview's defaults for ul. */
      .treeview ul {
      background-color: transparent;
      margin-top: 4px;
      }		
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #D8D8D8;
      }
      .treeview .hover { color: black; }
      .filetree li span a { text-decoration: none; font-size: 12px; color: #517291; }
      
      /* Override jquery-ui's default css customizations. These are supposed to take precedence over those.*/
      .ui-widget-content {
      border: 0px; 
      background: none; 
      color: none;     
      }
      .ui-widget-header {
      color: #e9e8e9;
      border-left: 1px solid #e5e5e5;
      border-right: 1px solid #e5e5e5;
      border-bottom: 1px solid #bbc4c5;
      border-top: 4px solid #e5e5e5;
      border: medium none;
      background: #F4F4F4; /* old browsers */
      background: -moz-linear-gradient(top, #F4F4F4 0%, #E6E4E5 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E6E4E5)); /* webkit */    
      font-weight: none;
      }
      .ui-widget-header a { color: none; }
      .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { 
      border: none; background: none; font-weight: none; color: none; }
      .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: black; text-decoration: none; }
      .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: none; background: none; font-weight: none; color: none; }
      
      .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: none; background: none; font-weight: none; color: none; }
      .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { 
      color: black; text-decoration: none; 	
      background: #C6C6C6; /* old browsers */
      background: -moz-linear-gradient(top, #C6C6C6 0%, #D8D8D8 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C6C6C6), color-stop(100%,#D8D8D8)); /* webkit */
      -webkit-border-radius:15px; -moz-border-radius:10px;
      border: 1px solid #f1f1f1;
      }    
      .ui-corner-all { border-radius: 0 0 0 0; }
      
      .ui-tabs { padding: .2em;}
      .ui-tabs .ui-tabs-nav li { top: 0px; margin: -2px 0 1px; text-transform: uppercase; font-size: 10.5px;}
      .ui-tabs .ui-tabs-nav li a { padding: .25em 2em .25em 1em; margin: .5em; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
      /**
      *	Basic Layout Theme
      * 
      *	This theme uses the default layout class-names for all classes
      *	Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
      */
      
      .ui-layout-pane { /* all 'panes' */ 
      background: #FFF; 
      border: 1px solid #BBB; 
      padding: 05x; 
      overflow: auto;
      } 
      
      .ui-layout-resizer { /* all 'resizer-bars' */ 
      background: #DDD; 
      top:100px
      } 
      
      .ui-layout-toggler { /* all 'toggler-buttons' */ 
      background: #AAA; 
      } 
      
    </style>
      <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><script xmlns="" type="text/javascript" src="common/browserDetect.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery-1.7.2.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.ui.all.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.cookie.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/layout/jquery.layout.js">
         <!----></script><style type="text/css">
      
      #header {
      /* background: url("../images/header-bg.png") scroll top left repeat-x #4d8c83; */
      background: transparent;
      }
      #leftnavigation {
      /* background-color: #ededed!important; */
      background-color: transparent;
      }
      #navheader {
      visibility: hidden;
      }
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #FFFFFF; /*but must be changed in main.js as well*/
      }
      .filetree span.file {
      /* background: url(images/file.gif) 0 0 no-repeat; */
      background: initial;
      }
      .filetree span.folder, .filetree span.file {
      padding: 1px 0 1px 7px;
      display: block;
      }

      /* borrowed from cisco: clientlib.css */
      .footer {
      margin: 28px 30px 0 15px;
      font-size: 80%;
      line-height: 120%;
      border-top: 1px solid #ccc;
      padding-top: 7px;
      color: #999;
      }
      .footer #footer-legal{display:inline;padding-bottom:18px}
      #framework-footer{margin:0;padding:0 0 15px 0;min-width:900px;width:100%}
      .footer a,.footer a:visited{color:#999}

      /* from ccimr.css */
      a:active  { color: #3366CC}
      a:hover   { color: #3366CC}
      a:link    { color: #3366CC}
      a:visited { color: #3366CC}

      #header img {
      float: left;
      margin-left: 20px;
      margin-top: 0px;
      }

      #header h1 {
      color: #336666;
      margin-top: 4px;
      }
      #content h1, #content h2 {
      color: #336666;
      }
      .title {
      color: #336666;
      }
      p, pre {
      margin-left: 0.1in;
      }
      p, ul, ol, li {
        font-size: 95%;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 1px;
      }
      body {
        font: 80.5% Arial, Helvetica, sans-serif;
      }
      ol {
      display: block;
      list-style-type: decimal;
      -webkit-margin-before: 1em;
      -webkit-margin-after: 1em;
      -webkit-margin-start: 0px;
      -webkit-margin-end: 0px;
      -webkit-padding-start: 40px;
      border: 1;
      }
    </style></head>
   <body>
      <noscript>
         <div id="noscript">JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.</div>
      </noscript>
      <div id="header"><a href="index.html"><img style="margin-right: 2px; width: 110; height: 73; padding-right: 25px; padding-top: 8px" align="right" src="common/images/logo.gif" alt="Cisco Systems, Inc." /></a><h1>
                  NSO 4.4.2.3 Administration Guide
                <br />Authorization
         </h1>
         <div id="navheader">
            <!---->
            <table class="navLinks">
               <tr>
                  <td><a id="showHideButton" href="#" onclick="myLayout.toggle('west')" class="pointLeft" tabindex="5" title="Hide TOC tree">Sidebar
                                                    </a></td>
                  <td><a accesskey="p" class="navLinkPrevious" tabindex="5" href="ch09s07s01.html">Prev</a>
                                                             |
                                                             <a accesskey="u" class="navLinkUp" tabindex="5" href="ug.aaa.authorization.html">Up</a>
                                                         |
                                                         <a accesskey="n" class="navLinkNext" tabindex="5" href="ch09s07s03.html">Next</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div id="content">
         <div class="sect2">
            <div xmlns="" class="titlepage">
               <div>
                  <div>
                     <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="d0e6332"></a>Rpc, notification, and data authorization
                     </h3>
                  </div>
               </div>
            </div>
            <p>
                       The rules in the <code class="sgmltag-element">rule</code> list are used to control access
                       to rpc operations, notifications, and data nodes defined in YANG
                       models. Access to invocation of actions
                       (<code class="code">tailf:action</code>) is controlled with the same method
                       as access to data nodes, with a request for "exec"
                       access. <code class="filename">ietf-netconf-acm.yang</code> defines a
                       <code class="sgmltag-element">rule</code> entry as:
                     
            </p>
            <div class="informalexample"><pre class="programlisting">list rule {
  key "name";
  ordered-by user;
  description
    "One access control rule.

     Rules are processed in user-defined order until a match is
     found.  A rule matches if 'module-name', 'rule-type', and
     'access-operations' match the request.  If a rule
     matches, the 'action' leaf determines if access is granted
     or not.";

  leaf name {
    type string {
      length "1..max";
    }
    description
      "Arbitrary name assigned to the rule.";
  }

  leaf module-name {
    type union {
      type matchall-string-type;
      type string;
    }
    default "*";
    description
      "Name of the module associated with this rule.

       This leaf matches if it has the value '*' or if the
       object being accessed is defined in the module with the
       specified module name.";
  }
  choice rule-type {
    description
      "This choice matches if all leafs present in the rule
       match the request.  If no leafs are present, the
       choice matches all requests.";
    case protocol-operation {
      leaf rpc-name {
        type union {
          type matchall-string-type;
          type string;
        }
        description
          "This leaf matches if it has the value '*' or if
           its value equals the requested protocol operation
           name.";
      }
    }
    case notification {
      leaf notification-name {
        type union {
          type matchall-string-type;
          type string;
        }
        description
          "This leaf matches if it has the value '*' or if its
           value equals the requested notification name.";
      }
    }
    case data-node {
      leaf path {
        type node-instance-identifier;
        mandatory true;
        description
          "Data Node Instance Identifier associated with the
           data node controlled by this rule.

           Configuration data or state data instance
           identifiers start with a top-level data node.  A
           complete instance identifier is required for this
           type of path value.

           The special value '/' refers to all possible
           data-store contents.";
      }
    }
  }

  leaf access-operations {
    type union {
      type matchall-string-type;
      type access-operations-type;
    }
    default "*";
    description
      "Access operations associated with this rule.

       This leaf matches if it has the value '*' or if the
       bit corresponding to the requested operation is set.";
  }

  leaf action {
    type action-type;
    mandatory true;
    description
      "The access control action associated with the
       rule.  If a rule is determined to match a
       particular request, then this object is used
       to determine whether to permit or deny the
       request.";
  }

  leaf comment {
    type string;
    description
      "A textual description of the access rule.";
  }
}</pre></div>
            <p>
                       <code class="filename">tailf-acm</code> augments this with two additional
                       leafs:
                     
            </p>
            <div class="informalexample"><pre class="programlisting">augment /nacm:nacm/nacm:rule-list/nacm:rule {

  leaf context {
    type union {
      type nacm:matchall-string-type;
      type string;
    }
    default "*";
    description
      "This leaf matches if it has the value '*' or if its value
       identifies the agent that is requesting access, e.g. 'netconf'
       for NETCONF, 'cli' for CLI, or 'webui' for Web UI.";

  }

  leaf log-if-permit {
    type empty;
    description
      "If this leaf is present, access granted due to this rule
       is logged in the developer log. Otherwise, only denied
       access is logged. Mainly intended for debugging of rules.";
  }
}</pre></div>
            <p>
                       Similar to the command access check, whenever a user through
                       some agent tries to access an rpc, a notification, a data item,
                       or an action, access is checked.  For a rule to match, three or
                       four leafs must match and when a match is found, the
                       corresponding action is taken.
                     
            </p>
            <p>
                       We have the following leafs in the <code class="sgmltag-element">rule</code> list entry.
                     
            </p>
            <div class="variablelist">
               <dl class="variablelist">
                  <dt><span class="term">name</span></dt>
                  <dd>
                     <p>
                                      <code class="sgmltag-element">name</code> is the name of the rule. The rules are
                                      checked in order, with the ordering given by the the YANG
                                      <code class="code">ordered-by user</code> semantics, i.e. independent of
                                      the key values.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">module-name</span></dt>
                  <dd>
                     <p>
                                      The <code class="sgmltag-element">module-name</code> string is the name of the YANG
                                      module the rule applies to. The special value
                                      <code class="code">*</code> matches all modules.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">rpc-name / notification-name / path</span></dt>
                  <dd>
                     <p>
                                      This is a choice between three possible leafs that are
                                      used for matching:
                                    
                     </p>
                     <div class="variablelist">
                        <dl class="variablelist">
                           <dt><span class="term">rpc-name</span></dt>
                           <dd>
                              <p>
                                                     The name of a rpc operation, or "*" to match any rpc.
                                                   
                              </p>
                           </dd>
                           <dt><span class="term">notification-name</span></dt>
                           <dd>
                              <p>
                                                     The name of a notification, or "*" to match any
                                                     notification.
                                                   
                              </p>
                           </dd>
                           <dt><span class="term">path</span></dt>
                           <dd>
                              <p>
                                                     A restricted XPath expression leading down into the
                                                     populated XML tree.  A rule with a path specified
                                                     matches if it is equal to or shorter than the
                                                     checked path.  Several types of paths are allowed.
                                                   
                              </p>
                              <div class="orderedlist">
                                 <ol class="orderedlist" type="1">
                                    <li class="listitem">
                                       <p>Tagpaths that are not containing any
                                                                keys. For example <code class="sgmltag-element">/interfaces/interface/mtu</code>
                                                                <code class="sgmltag-element">/ncs/live-device/live-status</code>.
                                                                
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Instantiated key: as in
                                                                <code class="sgmltag-element">/interfaces/interface[name="eth0"]/mask</code>
                                                                matches the mask element only for the interface
                                                                name "eth0". It's possible to have partially
                                                                instantiated paths only containing some keys
                                                                instantiated - i.e combinations of tagpaths and
                                                                keypaths.  Assuming a deeper tree, the path
                                                                <code class="sgmltag-element">/hosts/host[name="venus"]/servers/server/ip</code>
                                                                matches the "ip" element for all servers, but only
                                                                for the host named "venus".
                                                                
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Instantiated key: as in
                                                                <code class="sgmltag-element">/devices/device[name="x1"]/config/interface</code>
                                                                matches the interface configuration for managed
                                                                device "x1" It's possible to have partially
                                                                instantiated paths only containing some keys
                                                                instantiated - i.e combinations of tagpaths and
                                                                keypaths.  Assuming a deeper tree, the path
                                                                <code class="sgmltag-element">/devices/device/config/interface[name="eth0"]</code>
                                                                matches the "eth0" interface configuration on all
                                                                managed devices.
                                                                
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                                  Wild card at end as in:
                                                                  <code class="sgmltag-element">/interfaces/interface/*</code> does not
                                                                  match <code class="sgmltag-element">/interfaces/interface</code> but
                                                                  rather all children of that path.
                                                                
                                       </p>
                                       <p>
                                                                  Wild card at end as in:
                                                                  <code class="sgmltag-element">/services/web-site/*</code> does
                                                                  not match the web site service instances, but
                                                                  rather all children of the web site service
                                                                  instances.
                                                                
                                       </p>
                                    </li>
                                 </ol>
                              </div>
                              <p>
                                                     Thus the path in a rule is matched against the path in the
                                                     attempted data access.
                                                     If the attempted access has a path that is
                                                     equal to or longer than the rule path - we have a match.
                                                   
                              </p>
                           </dd>
                        </dl>
                     </div>
                     <p>
                                      If none of the leafs <code class="sgmltag-element">rpc-name</code>,
                                      <code class="sgmltag-element">notification-name</code>, or <code class="sgmltag-element">path</code> are set,
                                      the rule matches for any rpc, notification, data, or
                                      action access.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">context</span></dt>
                  <dd>
                     <p>
                                      <code class="code">context</code> is either of the strings <code class="code">cli</code>,
                                      <code class="code">netconf</code>, <code class="code">webui</code>, <code class="code">snmp</code>, or
                                      <code class="code">*</code> for a data rule. Furthermore, when we initiate
                                      user sessions from MAAPI, we can choose any string we want.
                                    
                     </p>
                     <p>
                                      Similarly to command rules we can differentiate access depending
                                      on which agent is used to gain access.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">access-operations</span></dt>
                  <dd>
                     <p>
                                      <code class="sgmltag-element">access-operations</code> is used to match the operation
                                      that NSO tries to perform.  It must be
                                      one or more of the "create", "read", "update", "delete" and
                                      "exec" values  from
                                      the <code class="code">access-operations-type</code> bits type
                                      definition in <code class="filename">ietf-netconf-acm.yang</code>,
                                      or "*" to match any operation.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">action</span></dt>
                  <dd>
                     <p>
                                      This leaf has the same characteristics as the <code class="sgmltag-element">action</code>
                                      leaf for command access.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">log-if-permit</span></dt>
                  <dd>
                     <p>
                                      This leaf has the same characteristics as the
                                      <code class="sgmltag-element">log-if-permit</code> leaf for command access.
                                    
                     </p>
                  </dd>
                  <dt><span class="term">comment</span></dt>
                  <dd>
                     <p>
                                      An optional textual description of the rule.
                                    
                     </p>
                  </dd>
               </dl>
            </div>
            <p>
                       If no matching rule is found in any of the <code class="sgmltag-element">rule</code> lists
                       in any <code class="sgmltag-element">rule-list</code> entry that matches the user's
                       groups, the data model node for which access is requested is
                       examined for presence of the NACM extensions:
                     
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                                    If the <code class="code">nacm:default-deny-all</code> extension is
                                    specified for the data model node, access is denied.
                                  
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                    If the <code class="code">nacm:default-deny-write</code> extension is
                                    specified for the data model node, and "create", "update",
                                    or "delete" access is requested, access is denied.
                                  
                     </p>
                  </li>
               </ul>
            </div>
            <p>
                       If examination of the NACM extensions did not result in access
                       being denied, the value (<code class="code">permit</code> or
                       <code class="code">deny</code>) of the relevant default leaf is examined:
                     
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                                    If "read" access is requested, the value of
                                    <code class="sgmltag-element">/nacm/read-default</code> determines whether access is
                                    permitted or denied.
                                  
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                    If "create", "update", or "delete" access is requested, the
                                    value of <code class="sgmltag-element">/nacm/write-default</code> determines whether
                                    access is permitted or denied.
                                  
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                    If "exec" access is requested, the value of
                                    <code class="sgmltag-element">/nacm/exec-default</code> determines whether access is
                                    permitted or denied.
                                  
                     </p>
                  </li>
               </ul>
            </div>
            <p>
                       If access is permitted due to one of these default leafs, this
                       augmentation from <code class="filename">tailf-acm.yang</code> is
                       relevant:
                     
            </p>
            <div class="informalexample"><pre class="programlisting">augment /nacm:nacm {
  ...
  leaf log-if-default-permit {
    type empty;
    description
      "If this leaf is present, access granted due to one of
       /nacm/read-default, /nacm/write-default, /nacm/exec-default
       /nacm/cmd-read-default, or /nacm/cmd-exec-default
       being set to 'permit' is logged in the developer log.
       Otherwise, only denied access is logged. Mainly intended
       for debugging of rules.";
  }
}</pre></div>
            <p>
                       I.e. it has the same effect as the <code class="sgmltag-element">log-if-permit</code> leaf
                       for the <code class="sgmltag-element">rule</code> lists, but for the case
                       where the value of one of the default leafs permits the access.
                     
            </p>
            <p>
                       When NSO
                       executes a command, the command rules in the authorization
                       database are searched, The rules are tried in order, as
                       described above. When a rule matches the
                       operation (command) that NSO
                       is attempting, the action
                       of the matching rule is applied - whether permit or deny.
                     
            </p>
            <p>
                       When actual data access is attempted, the data rules are searched.
                       E.g. when a user attempts to execute <code class="code">delete aaa</code> in the CLI,
                       the user needs delete access to the entire tree <code class="sgmltag-element">/aaa</code>.
                     
            </p>
            <p>
                       Another example is if a CLI user writes <code class="code">show configuration
                          aaa TAB</code> it suffices to have read access to at least one item
                       below <code class="sgmltag-element">/aaa</code> for the CLI to perform the TAB completion.
                       If no rule matches or an explicit deny rule is found, the CLI
                       will not TAB complete.
                     
            </p>
            <p>
                       Yet another example is if a user tries to execute
                       <code class="code">delete aaa authentication users</code>, we need to perform a check
                       on the paths <code class="sgmltag-element">/aaa</code> and <code class="sgmltag-element">/aaa/authentication</code> before
                       attempting
                       to delete the sub tree. Say that we have a rule for
                       path <code class="sgmltag-element">/aaa/authentication/users</code> which is an permit rule and we
                       have a subsequent rule for path <code class="sgmltag-element">/aaa</code> which is a
                       deny rule. With this
                       rule set the user should indeed be allowed to delete the entire
                       <code class="sgmltag-element">/aaa/authentication/users</code> tree but not the <code class="sgmltag-element">/aaa</code>
                       tree nor the <code class="sgmltag-element">/aaa/authentication</code> tree.
                     
            </p>
            <p>
                       We have two variations on how the rules are
                       processed. The easy case is when we actually try to
                       read or write an item in the configuration database.
                       The execution goes like:
                     
            </p>
            <div class="informalexample"><pre class="programlisting">foreach rule {
    if (match(rule, path)) {
       return rule.action;
    }
}</pre></div>
            <p>
                       The second case is when we execute TAB completion in the
                       CLI. This is more complicated. The execution goes like:
                     
            </p>
            <div class="informalexample"><pre class="programlisting">rules = select_rules_that_may_match(rules, path);
if (any_rule_is_permit(rules))
    return permit;
else
    return deny;</pre></div>
            <p>
                       The idea being that as we traverse (through TAB) down the
                       XML tree, as long as there is at least one rule that can
                       possibly match later, once we have more data, we must
                       continue.
                     
            </p>
            <p>
                       For example assume we have:
                     
            </p>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                                    <code class="code">"/system/config/foo" --&gt; permit</code>
                                  
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                    <code class="code">"/system/config" --&gt; deny</code>
                                  
                     </p>
                  </li>
               </ol>
            </div>
            <p>
                       If we in the CLI stand at <code class="code">"/system/config"</code> and hit TAB
                       we want the CLI to show <code class="code">foo</code> as a completion, but none
                       of the other nodes that exist under <code class="code">/system/config</code>.
                       Whereas if we try to execute <code class="code">delete /system/config</code> the
                       request must be rejected.
                   
            </p>
         </div><script type="text/javascript" src="common/main.js">
            <!----></script><script type="text/javascript" src="common/splitterInit.js">
            <!----></script><div class="footer" id="footer-legal">
            <div class="footer-legal framework-footer-cq">
               <div id="framework-footer">
                  <div id="footer-legal"><a href="http://www.cisco.com/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html">Privacy Statement</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/trademark.html">Trademarks</a></div>
               </div>
            </div>
         </div>
      </div>
      <div id="sidebar">
         <div id="leftnavigation" style="padding-top:3px;">
            <div id="tabs">
               <ul style="visibility: hidden;"></ul>
               <div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;" /><div id="ulTreeDiv" style="display:none">
                     <ul id="tree" class="filetree">
                        <li><span class="file"><a href="ch01.html" tabindex="1">Introduction</a></span></li>
                        <li><span class="file"><a href="ug.ncs_sysmgmt.html" tabindex="1">NSO System Management</a></span><ul>
                              <li><span class="file"><a href="ch02s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch02s02.html" tabindex="1">Configuring NSO</a></span><ul>
                                    <li><span class="file"><a href="ch02s02s01.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch02s02s02.html" tabindex="1">Configuration file</a></span></li>
                                    <li><span class="file"><a href="ch02s02s03.html" tabindex="1">Dynamic configuration</a></span><ul>
                                          <li><span class="file"><a href="ch02s02s03.html#d0e176" tabindex="1">tailf-ncs.yang</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch02s02s04.html" tabindex="1">Built-in or external SSH server</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.sys_mgmt.starting_ncs.html" tabindex="1">Starting NSO</a></span></li>
                              <li><span class="file"><a href="ug.ncs_sys_mgmt.licensing.html" tabindex="1">Licensing NSO</a></span></li>
                              <li><span class="file"><a href="ug.ncs_sys_mgmt.monitor.html" tabindex="1">Monitoring NSO</a></span><ul>
                                    <li><span class="file"><a href="ch02s05s01.html" tabindex="1">NSO status</a></span></li>
                                    <li><span class="file"><a href="ch02s05s02.html" tabindex="1">Monitoring the NSO daemon</a></span></li>
                                    <li><span class="file"><a href="ch02s05s03.html" tabindex="1">Logging</a></span></li>
                                    <li><span class="file"><a href="ch02s05s04.html" tabindex="1">syslog</a></span></li>
                                    <li><span class="file"><a href="ug.ncs_monitoring.messages.html" tabindex="1">Log messages and formats</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.ncs_sys_mgmt.backup.html" tabindex="1">Backup and restore</a></span><ul>
                                    <li><span class="file"><a href="ch02s06s01.html" tabindex="1">Backup</a></span></li>
                                    <li><span class="file"><a href="ch02s06s02.html" tabindex="1">NSO Restore</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.ncs_sys_mgmt.disaster.html" tabindex="1">Disaster management</a></span><ul>
                                    <li><span class="file"><a href="ch02s07s01.html" tabindex="1">NSO fails to start</a></span></li>
                                    <li><span class="file"><a href="ch02s07s02.html" tabindex="1">NSO failure after startup</a></span></li>
                                    <li><span class="file"><a href="ch02s07s03.html" tabindex="1">Transaction commit failure</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch02s08.html" tabindex="1">Troubleshooting</a></span><ul>
                                    <li><span class="file"><a href="ch02s08s01.html" tabindex="1">Installation Problems</a></span><ul>
                                          <li><span class="file"><a href="ch02s08s01.html#d0e2841" tabindex="1">Error messages during installation</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch02s08s02.html" tabindex="1">Problems Starting NSO</a></span><ul>
                                          <li><span class="file"><a href="ch02s08s02.html#d0e2856" tabindex="1">NSO terminating with GLIBC error</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch02s08s03.html" tabindex="1">Problems Running Examples</a></span><ul>
                                          <li><span class="file"><a href="ch02s08s03.html#d0e2871" tabindex="1">The 'netconf-console' program fails</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch02s08s04.html" tabindex="1">General Troubleshooting Strategies</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.admin_guide.smart_licensing.html" tabindex="1">Cisco Smart Licensing</a></span><ul>
                              <li><span class="file"><a href="ch03s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch03s02.html" tabindex="1">Smart Accounts and Virtual Accounts</a></span><ul>
                                    <li><span class="file"><a href="ch03s02s01.html" tabindex="1">Request a Smart Account</a></span></li>
                                    <li><span class="file"><a href="ch03s02s02.html" tabindex="1">Adding users to a Smart Account</a></span></li>
                                    <li><span class="file"><a href="ch03s02s03.html" tabindex="1">Create a License Registration Token</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch03s03.html" tabindex="1">Validation and Troubleshooting</a></span><ul>
                                    <li><span class="file"><a href="ch03s03s01.html" tabindex="1">Available Show Commands</a></span></li>
                                    <li><span class="file"><a href="ch03s03s02.html" tabindex="1">Available Show Commands</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs_alarms.html" tabindex="1">NSO Alarms</a></span><ul>
                              <li><span class="file"><a href="ug.ncs_sys_mgmt.alarm.html" tabindex="1">Overview</a></span></li>
                              <li><span class="file"><a href="ch04s02.html" tabindex="1">Alarm type structure</a></span></li>
                              <li><span class="file"><a href="ch04s03.html" tabindex="1">Alarm type descriptions</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.package_mgmt.html" tabindex="1">NSO Packages</a></span><ul>
                              <li><span class="file"><a href="ug.package_mgmt.overview.html" tabindex="1">Package Overview</a></span></li>
                              <li><span class="file"><a href="ug.package_mgmt.loading.html" tabindex="1">Loading Packages</a></span></li>
                              <li><span class="file"><a href="ug.package_mgmt.managing.html" tabindex="1">Managing Packages</a></span><ul>
                                    <li><span class="file"><a href="ch05s03s01.html" tabindex="1">Package repositories</a></span></li>
                                    <li><span class="file"><a href="ch05s03s02.html" tabindex="1">Actions</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.ncs_advanced.html" tabindex="1">Advanced Topics</a></span><ul>
                              <li><span class="file"><a href="ch06s01.html" tabindex="1">Locks</a></span><ul>
                                    <li><span class="file"><a href="ch06s01s01.html" tabindex="1">Global locks</a></span></li>
                                    <li><span class="file"><a href="ch06s01s02.html" tabindex="1">Transaction locks</a></span></li>
                                    <li><span class="file"><a href="ch06s01s03.html" tabindex="1">Northbound agents and global locks</a></span></li>
                                    <li><span class="file"><a href="ch06s01s04.html" tabindex="1">External data providers</a></span></li>
                                    <li><span class="file"><a href="ch06s01s05.html" tabindex="1">CDB</a></span></li>
                                    <li><span class="file"><a href="ch06s01s06.html" tabindex="1">Lock impact on user sessions</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.advanced.ncs_ipc.html" tabindex="1">IPC ports</a></span><ul>
                                    <li><span class="file"><a href="ug.ncs_advanced.ipc.restricting.html" tabindex="1">Restricting access to the IPC port</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch06s03.html" tabindex="1">Restart strategies for service manager</a></span></li>
                              <li><span class="file"><a href="ug.ncs_advanced.security_issues.html" tabindex="1">Security issues</a></span></li>
                              <li><span class="file"><a href="ch06s05.html" tabindex="1">Running NSO as a non privileged user</a></span></li>
                              <li><span class="file"><a href="ch06s06.html" tabindex="1">Using IPv6 on northbound interfaces</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.cluster.html" tabindex="1">NSO Clustering</a></span><ul>
                              <li><span class="file"><a href="ch07s01.html" tabindex="1">NSO Clustering Introduction</a></span></li>
                              <li><span class="file"><a href="ch07s02.html" tabindex="1">Configuring and Running NSO in Cluster Mode</a></span><ul>
                                    <li><span class="file"><a href="ch07s02s01.html" tabindex="1">Initial Setup</a></span></li>
                                    <li><span class="file"><a href="ch07s02s02.html" tabindex="1">Actions</a></span></li>
                                    <li><span class="file"><a href="ch07s02s03.html" tabindex="1">Configuration Variations</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch07s03.html" tabindex="1">Caveats</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.ha.html" tabindex="1">High Availability</a></span><ul>
                              <li><span class="file"><a href="ch08s01.html" tabindex="1">Introduction to NSO High Availability</a></span></li>
                              <li><span class="file"><a href="ch08s02.html" tabindex="1">HA framework requirements</a></span></li>
                              <li><span class="file"><a href="ch08s03.html" tabindex="1">Mode of operation</a></span></li>
                              <li><span class="file"><a href="ch08s04.html" tabindex="1">Security aspects</a></span></li>
                              <li><span class="file"><a href="ch08s05.html" tabindex="1">API</a></span></li>
                              <li><span class="file"><a href="ch08s06.html" tabindex="1">API</a></span></li>
                              <li><span class="file"><a href="ch08s07.html" tabindex="1">Ticks</a></span></li>
                              <li><span class="file"><a href="ch08s08.html" tabindex="1">Joining a cluster</a></span></li>
                              <li><span class="file"><a href="ug.ha.relay_slaves.html" tabindex="1">Relay slaves</a></span></li>
                              <li><span class="file"><a href="ch08s10.html" tabindex="1">CDB replication</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.aaa.html" tabindex="1">The AAA infrastructure</a></span><ul>
                              <li><span class="file"><a href="ch09s01.html" tabindex="1">The problem</a></span></li>
                              <li><span class="file"><a href="ch09s02.html" tabindex="1">Structure - data models</a></span><ul>
                                    <li><span class="file"><a href="ch09s02s01.html" tabindex="1">Data model contents</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch09s03.html" tabindex="1">AAA related items in confd.confncs.conf</a></span></li>
                              <li><span class="file"><a href="ug.aaa.authentication.html" tabindex="1">Authentication</a></span><ul>
                                    <li><span class="file"><a href="ug.aaa.public_key_login.html" tabindex="1">Public Key Login</a></span><ul>
                                          <li><span class="file"><a href="ug.aaa.public_key_login.html#d0e5588" tabindex="1">Setting up Public Key Login</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch09s04s02.html" tabindex="1">Password Login</a></span></li>
                                    <li><span class="file"><a href="ug.aaa.pam.html" tabindex="1">PAM</a></span></li>
                                    <li><span class="file"><a href="ug.aaa.External_authentication.html" tabindex="1">External authentication</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch09s05.html" tabindex="1">Restricting the IPC port</a></span></li>
                              <li><span class="file"><a href="ug.aaa.groups.html" tabindex="1">Group Membership</a></span></li>
                              <li><span class="file"><a href="ug.aaa.authorization.html" tabindex="1">Authorization</a></span><ul>
                                    <li><span class="file"><a href="ch09s07s01.html" tabindex="1">Command authorization</a></span></li>
                                    <li id="webhelp-currentid"><span class="file"><a href="ch09s07s02.html" tabindex="1">Rpc, notification, and data authorization</a></span></li>
                                    <li><span class="file"><a href="ch09s07s03.html" tabindex="1">Authorization Examples</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch09s08.html" tabindex="1">The AAA cache</a></span></li>
                              <li><span class="file"><a href="ch09s09.html" tabindex="1">Populating AAA using CDB</a></span></li>
                              <li><span class="file"><a href="ug.aaa.External_database.html" tabindex="1">Populating AAA using external data</a></span></li>
                              <li><span class="file"><a href="ch09s11.html" tabindex="1">Hiding the AAA tree</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.admin_guide.deployment.html" tabindex="1">NSO Deployment</a></span><ul>
                              <li><span class="file"><a href="ch10s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch10s02.html" tabindex="1">Initial NSO installation</a></span></li>
                              <li><span class="file"><a href="ch10s03.html" tabindex="1">Initial NSO configuration - ncs.conf</a></span></li>
                              <li><span class="file"><a href="ch10s04.html" tabindex="1">Setting up AAA</a></span></li>
                              <li><span class="file"><a href="ch10s05.html" tabindex="1">Cisco Smart Licensing</a></span></li>
                              <li><span class="file"><a href="ch10s06.html" tabindex="1">Global settings and timeouts</a></span></li>
                              <li><span class="file"><a href="ch10s07.html" tabindex="1">Enabling SNMP</a></span></li>
                              <li><span class="file"><a href="ch10s08.html" tabindex="1">Loading the required NSO packages</a></span></li>
                              <li><span class="file"><a href="ch10s09.html" tabindex="1">Preparing the HA of the NSO installation</a></span></li>
                              <li><span class="file"><a href="ch10s10.html" tabindex="1">Handling tailf-hcc HA fallout</a></span><ul>
                                    <li><span class="file"><a href="ch10s10s01.html" tabindex="1">NSO slave host failure</a></span></li>
                                    <li><span class="file"><a href="ch10s10s02.html" tabindex="1">NSO master host failure</a></span></li>
                                    <li><span class="file"><a href="ch10s10s03.html" tabindex="1">Setting up the VIP or L3 anycast BGP support</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s11.html" tabindex="1">Preparing the clustering of the NSO installation</a></span></li>
                              <li><span class="file"><a href="ch10s12.html" tabindex="1">Testing the cluster configuration</a></span></li>
                              <li><span class="file"><a href="ch10s13.html" tabindex="1">NSO system and packages upgrade</a></span><ul>
                                    <li><span class="file"><a href="ch10s13s01.html" tabindex="1">NSO major upgrade</a></span></li>
                                    <li><span class="file"><a href="ch10s13s02.html" tabindex="1">NSO minor upgrade</a></span></li>
                                    <li><span class="file"><a href="ch10s13s03.html" tabindex="1">Package upgrade</a></span></li>
                                    <li><span class="file"><a href="ch10s13s04.html" tabindex="1">Patch management</a></span></li>
                                    <li><span class="file"><a href="ch10s13s05.html" tabindex="1">Manual upgrade</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s14.html" tabindex="1">Log management</a></span><ul>
                                    <li><span class="file"><a href="ch10s14s01.html" tabindex="1">Log rotate</a></span></li>
                                    <li><span class="file"><a href="ch10s14s02.html" tabindex="1">NED logs</a></span></li>
                                    <li><span class="file"><a href="ch10s14s03.html" tabindex="1">Java logs</a></span></li>
                                    <li><span class="file"><a href="ch10s14s04.html" tabindex="1">Internal NSO log</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s15.html" tabindex="1">Monitoring the installation</a></span><ul>
                                    <li><span class="file"><a href="ch10s15s01.html" tabindex="1">Alarms</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s16.html" tabindex="1">Security considerations</a></span></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>