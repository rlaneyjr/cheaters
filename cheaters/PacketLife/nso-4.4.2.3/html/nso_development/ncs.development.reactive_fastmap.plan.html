<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>Progress reporting using plan-data -  - NSO 4.4.2.3 Development</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="index.html" title="NSO 4.4.2.3 Development" />
      <link rel="up" href="ncs.development.reactive_fastmap.html" title="Reactive FASTMAP" />
      <link rel="prev" href="ncs.development.reactive_fastmap.html" title="Reactive FASTMAP" />
      <link rel="next" href="ch10s13s02.html" title="Performance Considerations" />
      <meta xmlns="" name="Section-title" content="Progress reporting using plan-data" /><script xmlns="" type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-14938";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><link xmlns="" rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/css/positioning.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><style xmlns="" type="text/css">
      
      #noscript{
      font-weight:bold;
      background-color: #55AA55;
      font-weight: bold;
      height: 25spx;
      z-index: 3000;
      top:0px;
      width:100%;
      position: relative;
      border-bottom: solid 5px black;
      text-align:center;
      color: white;
      }
      
      input {
      margin-bottom: 5px;
      margin-top: 2px;
      }
      .folder {
      display: block;
      height: 22px;
      padding-left: 20px;
      background: transparent url(common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
      }
      span.contentsTab {
      padding-left: 20px;
      background: url(common/images/toc-icon.png) no-repeat 0 center;
      }
      span.searchTab {
      padding-left: 20px;
      background: url(common/images/search-icon.png) no-repeat 0 center;
      }
      
      /* Overide jquery treeview's defaults for ul. */
      .treeview ul {
      background-color: transparent;
      margin-top: 4px;
      }		
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #D8D8D8;
      }
      .treeview .hover { color: black; }
      .filetree li span a { text-decoration: none; font-size: 12px; color: #517291; }
      
      /* Override jquery-ui's default css customizations. These are supposed to take precedence over those.*/
      .ui-widget-content {
      border: 0px; 
      background: none; 
      color: none;     
      }
      .ui-widget-header {
      color: #e9e8e9;
      border-left: 1px solid #e5e5e5;
      border-right: 1px solid #e5e5e5;
      border-bottom: 1px solid #bbc4c5;
      border-top: 4px solid #e5e5e5;
      border: medium none;
      background: #F4F4F4; /* old browsers */
      background: -moz-linear-gradient(top, #F4F4F4 0%, #E6E4E5 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E6E4E5)); /* webkit */    
      font-weight: none;
      }
      .ui-widget-header a { color: none; }
      .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { 
      border: none; background: none; font-weight: none; color: none; }
      .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: black; text-decoration: none; }
      .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: none; background: none; font-weight: none; color: none; }
      
      .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: none; background: none; font-weight: none; color: none; }
      .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { 
      color: black; text-decoration: none; 	
      background: #C6C6C6; /* old browsers */
      background: -moz-linear-gradient(top, #C6C6C6 0%, #D8D8D8 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C6C6C6), color-stop(100%,#D8D8D8)); /* webkit */
      -webkit-border-radius:15px; -moz-border-radius:10px;
      border: 1px solid #f1f1f1;
      }    
      .ui-corner-all { border-radius: 0 0 0 0; }
      
      .ui-tabs { padding: .2em;}
      .ui-tabs .ui-tabs-nav li { top: 0px; margin: -2px 0 1px; text-transform: uppercase; font-size: 10.5px;}
      .ui-tabs .ui-tabs-nav li a { padding: .25em 2em .25em 1em; margin: .5em; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
      /**
      *	Basic Layout Theme
      * 
      *	This theme uses the default layout class-names for all classes
      *	Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
      */
      
      .ui-layout-pane { /* all 'panes' */ 
      background: #FFF; 
      border: 1px solid #BBB; 
      padding: 05x; 
      overflow: auto;
      } 
      
      .ui-layout-resizer { /* all 'resizer-bars' */ 
      background: #DDD; 
      top:100px
      } 
      
      .ui-layout-toggler { /* all 'toggler-buttons' */ 
      background: #AAA; 
      } 
      
    </style>
      <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><script xmlns="" type="text/javascript" src="common/browserDetect.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery-1.7.2.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.ui.all.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.cookie.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/layout/jquery.layout.js">
         <!----></script><style type="text/css">
      
      #header {
      /* background: url("../images/header-bg.png") scroll top left repeat-x #4d8c83; */
      background: transparent;
      }
      #leftnavigation {
      /* background-color: #ededed!important; */
      background-color: transparent;
      }
      #navheader {
      visibility: hidden;
      }
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #FFFFFF; /*but must be changed in main.js as well*/
      }
      .filetree span.file {
      /* background: url(images/file.gif) 0 0 no-repeat; */
      background: initial;
      }
      .filetree span.folder, .filetree span.file {
      padding: 1px 0 1px 7px;
      display: block;
      }

      /* borrowed from cisco: clientlib.css */
      .footer {
      margin: 28px 30px 0 15px;
      font-size: 80%;
      line-height: 120%;
      border-top: 1px solid #ccc;
      padding-top: 7px;
      color: #999;
      }
      .footer #footer-legal{display:inline;padding-bottom:18px}
      #framework-footer{margin:0;padding:0 0 15px 0;min-width:900px;width:100%}
      .footer a,.footer a:visited{color:#999}

      /* from ccimr.css */
      a:active  { color: #3366CC}
      a:hover   { color: #3366CC}
      a:link    { color: #3366CC}
      a:visited { color: #3366CC}

      #header img {
      float: left;
      margin-left: 20px;
      margin-top: 0px;
      }

      #header h1 {
      color: #336666;
      margin-top: 4px;
      }
      #content h1, #content h2 {
      color: #336666;
      }
      .title {
      color: #336666;
      }
      p, pre {
      margin-left: 0.1in;
      }
      p, ul, ol, li {
        font-size: 95%;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 1px;
      }
      body {
        font: 80.5% Arial, Helvetica, sans-serif;
      }
      ol {
      display: block;
      list-style-type: decimal;
      -webkit-margin-before: 1em;
      -webkit-margin-after: 1em;
      -webkit-margin-start: 0px;
      -webkit-margin-end: 0px;
      -webkit-padding-start: 40px;
      border: 1;
      }
    </style></head>
   <body>
      <noscript>
         <div id="noscript">JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.</div>
      </noscript>
      <div id="header"><a href="index.html"><img style="margin-right: 2px; width: 110; height: 73; padding-right: 25px; padding-top: 8px" align="right" src="common/images/logo.gif" alt="Cisco Systems, Inc." /></a><h1>NSO 4.4.2.3 Development<br />
                Reactive FASTMAP
              
         </h1>
         <div id="navheader">
            <!---->
            <table class="navLinks">
               <tr>
                  <td><a id="showHideButton" href="#" onclick="myLayout.toggle('west')" class="pointLeft" tabindex="5" title="Hide TOC tree">Sidebar
                                                    </a></td>
                  <td><a accesskey="p" class="navLinkPrevious" tabindex="5" href="ncs.development.reactive_fastmap.html">Prev</a>
                                                             |
                                                             <a accesskey="u" class="navLinkUp" tabindex="5" href="ncs.development.reactive_fastmap.html">Up</a>
                                                         |
                                                         <a accesskey="n" class="navLinkNext" tabindex="5" href="ch10s13s02.html">Next</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div id="content">
         <div class="sect2">
            <div xmlns="" class="titlepage">
               <div>
                  <div>
                     <h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="ncs.development.reactive_fastmap.plan"></a>Progress reporting using plan-data
                     </h3>
                  </div>
               </div>
            </div>
            <div class="toc">
               <dl class="toc">
                  <dt><span class="sect3"><a href="ncs.development.reactive_fastmap.plan.html#d0e10284">Example: use of plan-data in the virtual-mpls-vpn</a></span></dt>
               </dl>
            </div>
            <p>
                       Since the life-cycle of a Reactive FASTMAP service is more
                       complex, there is also a need to report the progress of the
                       service in addition to the success or failure of individual
                       transactions.
                       A Reactive FASTMAP service is expected to be
                       designed with a self-sustained chain of <code class="code">reactive-re-deploy</code>
                       until the service has completed. If this chain of
                       <code class="code">reactive-re-deploy</code> is broken the service will
                       fail to complete even though no transaction failure has occurred.
                     
            </p>
            <p>
                       To support Reactive FASTMAP service progress reporting there
                       is a YANG grouping, <code class="code">ncs:plan-data</code>, and Java API
                       utility <code class="code">PlanComponent</code>. It is a recommendation to
                       implement this into the service to promote a "standardized"
                       view of progress reporting.
                     
            </p>
            <p>
                       The YANG submodule defining the <code class="code">ncs:plan-data</code>
                       grouping is named tailf-ncs-plan.yang and contains the following:
               
                       
            </p><pre class="programlisting"><strong xmlns="" class="hl-keyword">submodule</strong> tailf-ncs-plan {

  belongs-to tailf-ncs {
    <strong xmlns="" class="hl-keyword">prefix</strong> ncs;
  }

  <strong xmlns="" class="hl-keyword">import</strong> ietf-yang-types {
    <strong xmlns="" class="hl-keyword">prefix</strong> yang;
  }

  <strong xmlns="" class="hl-keyword">import</strong> tailf-common {
    <strong xmlns="" class="hl-keyword">prefix</strong> tailf;
  }
  <strong xmlns="" class="hl-keyword">import</strong> ietf-netconf-acm {
    <strong xmlns="" class="hl-keyword">prefix</strong> nacm;
  }

  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-common;
  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-services;
  <strong xmlns="" class="hl-keyword">include</strong> tailf-ncs-devices;

  <strong xmlns="" class="hl-keyword">organization</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Tail-f Systems"</em></strong>;

  <strong xmlns="" class="hl-keyword">description</strong>
    <strong xmlns="" class="hl-string"><em style="color:red">"This submodule contains a collection of YANG definitions for
</em></strong>     configuring plans in NCS.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2017</span>-<span xmlns="" class="hl-number">03</span>-<span xmlns="" class="hl-number">16</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.4.
</em></strong>
       Added error-info <strong xmlns="" class="hl-keyword">container</strong> in plan for additional error information.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2016</span>-<span xmlns="" class="hl-number">11</span>-<span xmlns="" class="hl-number">24</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Released as part of NCS-4.3.
</em></strong>
       Major additions to this <strong xmlns="" class="hl-keyword">submodule</strong> to incorporate Nano Services.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">revision</strong> <span xmlns="" class="hl-number">2016</span>-<span xmlns="" class="hl-number">05</span>-<span xmlns="" class="hl-number">26</span> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Initial revision"</em></strong>;
  }


  <strong xmlns="" class="hl-keyword">typedef</strong> kick-monitor-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"If a node that matches the value of this leaf and the
</em></strong>       the <strong xmlns="" class="hl-string"><em style="color:red">'trigger-expr'</em></strong> expression evaluates to true, this
       pre-condition is satisfied. Otherwise a kicker is started to
       monitor <strong xmlns="" class="hl-keyword">when</strong> this pre-condition comes true.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> trigger-expr-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This optional leaf us used to further filter nodes in a given nodeset.
</em></strong>
       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the pre-condition
       is fulfilled otherwise not fulfilled.

       The context for evaluating this expression is the individual nodes
       in the resulting node-set of the related monitor expression.

       The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
       with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> action-node-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified action resides."</em></strong>;
    <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
  }


  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Component Types
   */</em>

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is a base type from which all service specific plan components
</em></strong>       can be derived.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> identityref {
      <strong xmlns="" class="hl-keyword">base</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>;
    }
  }

  <strong xmlns="" class="hl-keyword">identity</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong> {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"A service plan consists of several different plan components.
</em></strong>       Each plan component moves forward in the plan as the service
       comes closer to fulfillment.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">identity</strong> self {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"A service should when it constructs it's plan, include a column
</em></strong>       of <strong xmlns="" class="hl-keyword">type</strong> <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong>, this column can be used by upper layer software to
       determine which state the service is in as a whole.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">base</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>;
  }


  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan States
   */</em>

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-name-t {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is a base type from which all plan component specific states can
</em></strong>       be derived.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">type</strong> identityref {
      <strong xmlns="" class="hl-keyword">base</strong> plan-state;
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> not-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> reached;
      <strong xmlns="" class="hl-keyword">enum</strong> failed {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_failed"</em></strong>;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">typedef</strong> plan-state-action-<strong xmlns="" class="hl-keyword">status</strong>-t {
    <strong xmlns="" class="hl-keyword">type</strong> enumeration {
      <strong xmlns="" class="hl-keyword">enum</strong> not-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> create-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> delete-reached;
      <strong xmlns="" class="hl-keyword">enum</strong> failed {
        tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"plan_action_failed"</em></strong>;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">identity</strong> plan-id {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is the base identity for plans.
</em></strong>       It is used to identify a specific plan.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">identity</strong> plan-state {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This is the base identity for plan states. A plan component in a
</em></strong>       plan goes through certain states, some, such as <strong xmlns="" class="hl-string"><em style="color:red">'init'</em></strong> and
       <strong xmlns="" class="hl-string"><em style="color:red">'ready'</em></strong>, are specified here, and the application augments these
       with app specific states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">identity</strong> init {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The init state in all plan state lists, primarily used as a
</em></strong>       place holder with a time stamp.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">base</strong> plan-state;
  }

  <strong xmlns="" class="hl-keyword">identity</strong> ready {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The final state in a 'state list' in the plan"</em></strong>;
    <strong xmlns="" class="hl-keyword">base</strong> plan-state;
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Notifications
   */</em>

  <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"/ncs:services"</em></strong> {
    <strong xmlns="" class="hl-keyword">container</strong> plan-notifications {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Configuration to send plan-state-change notifications for
</em></strong>         plan state transitions. A <strong xmlns="" class="hl-keyword">notification</strong> can be configured to
         be sent <strong xmlns="" class="hl-keyword">when</strong> a specified service<strong xmlns="" class="hl-string"><em style="color:red">'s plan component enters a
</em></strong>         given state.

         The built in stream <strong xmlns="" class="hl-string"><em style="color:red">'service-state-changes'</em></strong> is used to send
         these notifications.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      <strong xmlns="" class="hl-keyword">list</strong> subscription {
        <strong xmlns="" class="hl-keyword">key</strong> name;
        <strong xmlns="" class="hl-keyword">unique</strong> <strong xmlns="" class="hl-string"><em style="color:red">"service-type component-type state"</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A list of our plan notification subscriptions."</em></strong>;

        <strong xmlns="" class="hl-keyword">leaf</strong> name {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"A unique identifier for this subscription."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">type</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> nacm:node-instance-identifier;
          tailf:cli-completion-actionpoint <strong xmlns="" class="hl-string"><em style="color:red">"servicepoints-with-plan"</em></strong>;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The type of service. If not set, all service types are
</em></strong>             subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> component-<strong xmlns="" class="hl-keyword">type</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The type of component in the service's plan. If not set,
</em></strong>             all component types of the specified service types are
             subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
        <strong xmlns="" class="hl-keyword">leaf</strong> state {
          <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The name of the state for the component in the service's plan.
</em></strong>             If not set, all states of the specified service types and
             plan components are subscribed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">notification</strong> plan-state-change {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This notification indicates that the specified service's
</em></strong>       plan componenent has entered the given state. The <strong xmlns="" class="hl-keyword">notification</strong>
       is sent if the state has been reached or failed.

       This <strong xmlns="" class="hl-keyword">notification</strong> is not sent unless the system has been
       configured to send the <strong xmlns="" class="hl-keyword">notification</strong> for some services.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
    <strong xmlns="" class="hl-keyword">leaf</strong> service {
      <strong xmlns="" class="hl-keyword">type</strong> instance-identifier;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A reference to the service whose plan has been changed."</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> component {
      <strong xmlns="" class="hl-keyword">type</strong> string;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the name of a component in the service's plan;
</em></strong>         plan/component/name.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
    <strong xmlns="" class="hl-keyword">leaf</strong> state {
      <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the name of the new state for the component in
</em></strong>         the service<strong xmlns="" class="hl-string"><em style="color:red">'s plan;
</em></strong>         plan/component/state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
    <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
      <strong xmlns="" class="hl-keyword">type</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Refers to the status of the new state for the component in
</em></strong>         the service<strong xmlns="" class="hl-string"><em style="color:red">'s plan;
</em></strong>         plan/component/state/<strong xmlns="" class="hl-keyword">status</strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Groupings
   */</em>

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-data {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains the plan data that can show the
</em></strong>       progress of a Reactive FASTMAP service. This <strong xmlns="" class="hl-keyword">grouping</strong> is optional
       and should only be used by services i.e lists or <strong xmlns="" class="hl-keyword">presence</strong> containers
       that <strong xmlns="" class="hl-keyword">uses</strong> the ncs:servicepoint callback<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">container</strong> plan {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">uses</strong> plan-components;
      <strong xmlns="" class="hl-keyword">leaf</strong> failed {
        <strong xmlns="" class="hl-keyword">type</strong> empty;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"This leaf is present if any plan component in the plan is in
</em></strong>           a failed state; i.e., a state with <strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }
      <strong xmlns="" class="hl-keyword">container</strong> error-info {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Additional info if plan has failed"</em></strong>;
        <strong xmlns="" class="hl-keyword">leaf</strong> message {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An explanatory message for the failing plan."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> log-entry {
          <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
            require-instance false;
          }
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Reference to a service log entry with additional information."</em></strong>;
        }
      }
    }
    <strong xmlns="" class="hl-keyword">container</strong> plan-history {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">list</strong> plan {
        <strong xmlns="" class="hl-keyword">key</strong> time;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Every time the plan changes its structure, i.e., a
</em></strong>           plan component is added or deleted, or a state is added or
           deleted in a plan component, a copy of the old plan is stored
           in the plan history <strong xmlns="" class="hl-keyword">list</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">leaf</strong> time {
          <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
          tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">uses</strong> plan-components;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-components {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains a list of components that reflects the
</em></strong>       different steps or stages that a Reactive FASTMAP service comprises.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">list</strong> component {
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A component has a type and a list of states.
</em></strong>         It is required that the first plan component is of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.
         It is also required that the first state of a component is ncs:init
         and the last state is ncs:ready.
         A service can in addition to the <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong> component have any number of
         components. These additional components will have types that are
         defined by user specified YANG identities.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">uses</strong> plan-component-body {
        <strong xmlns="" class="hl-keyword">refine</strong> <strong xmlns="" class="hl-string"><em style="color:red">"state/status"</em></strong> {
          <strong xmlns="" class="hl-keyword">mandatory</strong> true;
        }
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> plan-component-body {
    <strong xmlns="" class="hl-keyword">leaf</strong> name {
      <strong xmlns="" class="hl-keyword">type</strong> string;
    }
    <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">type</strong> {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"The plan component type is defined by an YANG identity.
</em></strong>         It is used to identify the characteristics of a certain component.
         Therefore, if two components in the same service are of the same
         <strong xmlns="" class="hl-keyword">type</strong> they should be identical with respect to number, <strong xmlns="" class="hl-keyword">type</strong> and order
         of their contained states.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">type</strong> plan-component-<strong xmlns="" class="hl-keyword">type</strong>-t;
      <strong xmlns="" class="hl-keyword">mandatory</strong> true;
    }
    <strong xmlns="" class="hl-keyword">list</strong> state {
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A plan state represents a certain step or stage that a service needs
</em></strong>         to execute and/or reach. It is identified as an YANG <strong xmlns="" class="hl-keyword">identity</strong>.
         There are two predefined states ncs:init and ncs:ready which is the
         first respectively last state of a plan component.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">leaf</strong> name {
        tailf:alt-name state;
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A plan state is always in one of three states 'not-reached' when
</em></strong>           the state has not been executed, <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong> <strong xmlns="" class="hl-keyword">when</strong> the state has been
           executed and <strong xmlns="" class="hl-string"><em style="color:red">'failed'</em></strong> it the state execution failed.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">when</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
        tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        <strong xmlns="" class="hl-keyword">when</strong> <strong xmlns="" class="hl-string"><em style="color:red">'../status != "not-reached"'</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The time this state was successfully reached or failed."</em></strong>;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">reference</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"If this component reflects the state of some other data, e.g
</em></strong>           an instantiated RFS, an instatiated CFS or something else, this
           optional field can be set to point to that instance<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
          require-instance false;
        }
        tailf:display-column-name <strong xmlns="" class="hl-string"><em style="color:red">"ref"</em></strong>;
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Nano-service related definitions
   */</em>

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-data {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping is required for Nano services. It replaces the
</em></strong>       plan-data <strong xmlns="" class="hl-keyword">grouping</strong>. This <strong xmlns="" class="hl-keyword">grouping</strong> contains an executable plan
       that has additional state data which is internally used to
       control service execution.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
    <strong xmlns="" class="hl-keyword">uses</strong> nano-plan;
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan {
    <strong xmlns="" class="hl-keyword">container</strong> plan {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components;
      <strong xmlns="" class="hl-keyword">leaf</strong> failed {
        <strong xmlns="" class="hl-keyword">type</strong> empty;
      }
      <strong xmlns="" class="hl-keyword">container</strong> error-info {
        <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Additional info if plan has failed"</em></strong>;
        <strong xmlns="" class="hl-keyword">leaf</strong> message {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An explanatory message for the failing plan."</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> log-entry {
          <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
            require-instance false;
          }
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"Reference to a service log entry with additional information."</em></strong>;
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> deleting {
        tailf:hidden fastmap-private;
        <strong xmlns="" class="hl-keyword">type</strong> empty;
      }
    }
  }

  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-components {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This grouping contains a list of components that reflects the
</em></strong>       different steps or stages that a Nano service comprises.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>    <strong xmlns="" class="hl-keyword">list</strong> component {
      ordered-by user;
      <strong xmlns="" class="hl-keyword">key</strong> name;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"A component has a type and a list of states.  It is required
</em></strong>         that the first plan component is of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.  It is
         also required that the first state of a component is ncs:init
         and the last state is ncs:ready.  A service can in addition
         to the <strong xmlns="" class="hl-string"><em style="color:red">'self'</em></strong> component have any number of components. These
         additional components will have types that are defined by
         user specified YANG identities.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
      <strong xmlns="" class="hl-keyword">uses</strong> plan-component-body {
        <strong xmlns="" class="hl-keyword">refine</strong> <strong xmlns="" class="hl-string"><em style="color:red">"state/status"</em></strong> {
          <strong xmlns="" class="hl-keyword">default</strong> not-reached;
        }
        <strong xmlns="" class="hl-keyword">augment</strong> <strong xmlns="" class="hl-string"><em style="color:red">"state"</em></strong> {

          <strong xmlns="" class="hl-keyword">leaf</strong> create-cb {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"indicate if and which type of create callback that should be
</em></strong>               registered for this state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> string;
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> delete-cb {
            tailf:hidden full;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"indicate if and which type of delete callback that should be
</em></strong>               registered for this state<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>            <strong xmlns="" class="hl-keyword">type</strong> string;
          }

          <strong xmlns="" class="hl-keyword">container</strong> pre-conditions {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Pre-conditions for a state controls whether or not a
</em></strong>               state should be executed. There are separate conditions
               for the <strong xmlns="" class="hl-string"><em style="color:red">'create'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong> <strong xmlns="" class="hl-keyword">case</strong>. At create the
               create conditions checked and if possible executed with
               the ultimate goal for the state of having <strong xmlns="" class="hl-keyword">status</strong>
               <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong>. At the <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong> <strong xmlns="" class="hl-keyword">case</strong> the delete conditions
               control whether the state changes should be deleted
               with the ultimate goal of the state having <strong xmlns="" class="hl-keyword">status</strong>
               <strong xmlns="" class="hl-string"><em style="color:red">'not-reached'</em></strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
            <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Preconditions for executing the plan state"</em></strong>;
            <strong xmlns="" class="hl-keyword">leaf</strong> create-monitor {
              <strong xmlns="" class="hl-keyword">type</strong> kick-monitor-t;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> create-trigger-expr {
              <strong xmlns="" class="hl-keyword">type</strong> trigger-expr-t;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-monitor {
              <strong xmlns="" class="hl-keyword">type</strong> kick-monitor-t;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-trigger-expr {
              <strong xmlns="" class="hl-keyword">type</strong> trigger-expr-t;
            }
          }

          <strong xmlns="" class="hl-keyword">container</strong> post-actions {
            tailf:display-groups <strong xmlns="" class="hl-string"><em style="color:red">"summary"</em></strong>;

            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Post-actions are called after successful execution of a
</em></strong>               state.  These are optional and there are separate
               action that can be set for the <strong xmlns="" class="hl-string"><em style="color:red">'create'</em></strong> and <strong xmlns="" class="hl-string"><em style="color:red">'delete'</em></strong>
               <strong xmlns="" class="hl-keyword">case</strong> respectively.

               These actions are put as requests in the
               side-effect-queue and are executed asynchronously with
               respect to the original service transaction.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
            <strong xmlns="" class="hl-keyword">presence</strong> <strong xmlns="" class="hl-string"><em style="color:red">"Asynchronous side-effects after successful execution"</em></strong>;
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-node {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>                 action resides. This action is called after this state
                 as got a <strong xmlns="" class="hl-string"><em style="color:red">'reached'</em></strong> <strong xmlns="" class="hl-keyword">status</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> action-node-t;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-name {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> create-action-result-expr {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>                 <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
                 <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

                 This statement describes an XPath expression to
                 evaluate the result of the action so that the
                 side-effect-queue can indicate action errors.

                 The result of the expression is converted to a boolean using
                 the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
                 is reported as successful, otherwise as failed.

                 The context for evaluating this expression is the
                 resulting xml tree of the action.

                 The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
                 with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-node {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>                 action resides. This action is called after this state
                 as got a <strong xmlns="" class="hl-string"><em style="color:red">'not-reached'</em></strong> <strong xmlns="" class="hl-keyword">status</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> action-node-t;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-name {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> delete-action-result-expr {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>                 <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
                 <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

                 This statement describes an XPath expression to evaluate the
                 result of the action so that the side-effect-queue can
                 indicate action errors.

                 The result of the expression is converted to a boolean using
                 the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
                 is reported as successful, otherwise as failed.

                 The context for evaluating this expression is the
                 resulting xml tree of the action.

                 The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
                 with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
            }
          }

          <strong xmlns="" class="hl-keyword">leaf</strong> post-action-<strong xmlns="" class="hl-keyword">status</strong> {
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"Post-actions are called after successful execution of a state.
</em></strong>                   <strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
            <strong xmlns="" class="hl-keyword">when</strong> <strong xmlns="" class="hl-string"><em style="color:red">'(../post-actions)'</em></strong>;
            <strong xmlns="" class="hl-keyword">type</strong> plan-state-action-<strong xmlns="" class="hl-keyword">status</strong>-t;
            <strong xmlns="" class="hl-keyword">default</strong> not-reached;
          }

          <strong xmlns="" class="hl-keyword">uses</strong> service-get-modifications;

          <strong xmlns="" class="hl-keyword">container</strong> private {
            <strong xmlns="" class="hl-keyword">description</strong>
              <strong xmlns="" class="hl-string"><em style="color:red">"NCS service related internal data stored here."</em></strong>;
            tailf:hidden fastmap-private;
            <strong xmlns="" class="hl-keyword">leaf</strong> diff-set {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Internal node use by NCS service manager to remember
</em></strong>                 the reverse diff for a service instance. This is the
                 data that is used by FASTMAP<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> binary;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong> forward-diff-set {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"Internal node use by NCS service manager to remember
</em></strong>                 the forwards diff for a service instance. This data is
                 is used to produce the proper <strong xmlns="" class="hl-string"><em style="color:red">'get-modifications'</em></strong> <strong xmlns="" class="hl-keyword">output</strong><strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> binary;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> device-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of managed devices this state has manipulated."</em></strong>;
              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> string;
            }
            <strong xmlns="" class="hl-keyword">leaf</strong>-<strong xmlns="" class="hl-keyword">list</strong> service-<strong xmlns="" class="hl-keyword">list</strong> {
              <strong xmlns="" class="hl-keyword">description</strong>
                <strong xmlns="" class="hl-string"><em style="color:red">"A list of services this state has manipulated."</em></strong>;
              tailf:hidden full;
              <strong xmlns="" class="hl-keyword">type</strong> instance-identifier {
                require-instance false;
              }
            }
          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> back-track {
        <strong xmlns="" class="hl-keyword">type</strong> boolean;
        <strong xmlns="" class="hl-keyword">default</strong> false;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> back-track-goal {
        tailf:alt-name goal;
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-name-t;
      }
    }
  }


  <strong xmlns="" class="hl-keyword">grouping</strong> nano-plan-history {
    <strong xmlns="" class="hl-keyword">container</strong> plan-history {
      <strong xmlns="" class="hl-keyword">config</strong> false;
      tailf:cdb-oper {
        tailf:persistent true;
      }
      <strong xmlns="" class="hl-keyword">list</strong> plan {
        <strong xmlns="" class="hl-keyword">key</strong> time;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Every time the plan changes its structure, i.e., a
</em></strong>           plan component is added or deleted, or a state is added or
           deleted in a plan component, a copy of the old plan is stored
           in the plan history <strong xmlns="" class="hl-keyword">list</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>
        <strong xmlns="" class="hl-keyword">leaf</strong> time {
          <strong xmlns="" class="hl-keyword">type</strong> yang:date-and-time;
          tailf:cli-<strong xmlns="" class="hl-keyword">value</strong>-display-template <strong xmlns="" class="hl-string"><em style="color:red">"$(.|datetime)"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components;
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Internal structures
   */</em>

  <strong xmlns="" class="hl-keyword">container</strong> side-effect-queue {
    tailf:hidden debug;
    <strong xmlns="" class="hl-keyword">config</strong> false;
    tailf:cdb-oper {
      tailf:persistent true;
    }

    <strong xmlns="" class="hl-keyword">list</strong> side-effect {
      <strong xmlns="" class="hl-keyword">key</strong> id;
      <strong xmlns="" class="hl-keyword">leaf</strong> id {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Unique identification of the side-effect action"</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> uint32;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> requestor {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Path to the requestor of side-effect.
</em></strong>           Typically a plan state for a service.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> requestor-op {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The base operation for the requestor when issuing the side-effect."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> enumeration {
          <strong xmlns="" class="hl-keyword">enum</strong> create {
            tailf:code-name op_create;
          }
          <strong xmlns="" class="hl-keyword">enum</strong> delete {
            tailf:code-name op_delete;
          }
        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> action-node {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"This leaf identifies the node on which a specified
</em></strong>           action resides.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> action-node-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> action-name {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> yang:yang-identifier;
      }
      <strong xmlns="" class="hl-keyword">list</strong> variable {
        <strong xmlns="" class="hl-keyword">key</strong> name;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"A list of variable bindings that will be part of the
</em></strong>           context <strong xmlns="" class="hl-keyword">when</strong> the action-node <strong xmlns="" class="hl-keyword">path</strong> expression is evaluated.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">leaf</strong> name {
          <strong xmlns="" class="hl-keyword">type</strong> string;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"The name of the variable"</em></strong>;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">value</strong> {
          <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
          <strong xmlns="" class="hl-keyword">mandatory</strong> true;
          <strong xmlns="" class="hl-keyword">description</strong>
            <strong xmlns="" class="hl-string"><em style="color:red">"An XPath expression which will be the value of variable
</em></strong>             <strong xmlns="" class="hl-string"><em style="color:red">'name'</em></strong>. Note that both expressions and <strong xmlns="" class="hl-keyword">path</strong> expressions are
             allowed, which implies that literals <strong xmlns="" class="hl-keyword">must</strong> be quoted.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        }
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> result-expr {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain
</em></strong>           <strong xmlns="" class="hl-keyword">value</strong> could indicate an error or a successful result, e.g.
           <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

           This statement describes an XPath expression to evaluate the
           result of the action so that the side-effect-queue can
           indicate action errors.

           The result of the expression is converted to a boolean using
           the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
           is reported as successful, otherwise as failed.

           The context for evaluating this expression is the
           resulting xml tree of the action.

           There are no variable bindings in this evaluation.
           The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
           with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> yang:xpath1.<span xmlns="" class="hl-number">0</span>;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> <strong xmlns="" class="hl-keyword">status</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Resulting status to be set as the requestors post-action-status."</em></strong>;
        <strong xmlns="" class="hl-keyword">type</strong> plan-state-<strong xmlns="" class="hl-keyword">status</strong>-t;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> error-message {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"An additional error message for the action if this is applicable.
</em></strong>           I.e. an error is thrown.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> u-info {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
      }
    }

    tailf:action invoke {
      tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Invoke queued side-effects asynchronously"</em></strong>;
      <strong xmlns="" class="hl-keyword">description</strong>
        <strong xmlns="" class="hl-string"><em style="color:red">"Invokes all not already executing/executed side-effects in the
</em></strong>         side effect queue.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      tailf:actionpoint ncsinternal {
        tailf:internal;
      }
      <strong xmlns="" class="hl-keyword">input</strong> {
      }
      <strong xmlns="" class="hl-keyword">output</strong> {
        <strong xmlns="" class="hl-keyword">leaf</strong> num-invoked {
          <strong xmlns="" class="hl-keyword">type</strong> uint32;
        }
      }
    }

  }

  <strong xmlns="" class="hl-keyword">container</strong> zombies {
    <strong xmlns="" class="hl-keyword">config</strong> false;
    tailf:cdb-oper {
      tailf:persistent true;
    }

    <strong xmlns="" class="hl-keyword">list</strong> service {
      <strong xmlns="" class="hl-keyword">key</strong> service-<strong xmlns="" class="hl-keyword">path</strong>;
      <strong xmlns="" class="hl-keyword">leaf</strong> service-<strong xmlns="" class="hl-keyword">path</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The path to where the service resided that has been deleted
</em></strong>           and become a zombie.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> delete-<strong xmlns="" class="hl-keyword">path</strong> {
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The path to the node nearest to the top that was deleted and resulted
</em></strong>           in this service becoming a zombie.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> diffset {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
      }
      <strong xmlns="" class="hl-keyword">leaf</strong> latest-u-info {
        tailf:hidden full;
        <strong xmlns="" class="hl-keyword">type</strong> binary;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"Latest transactions user info is stored there, these are
</em></strong>           used in reactive-re-deploy actions that <strong xmlns="" class="hl-keyword">must</strong> be performed by
           a user with the same user info.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>      }

      <strong xmlns="" class="hl-keyword">container</strong> plan {
        <strong xmlns="" class="hl-keyword">uses</strong> nano-plan-components;
        <strong xmlns="" class="hl-keyword">leaf</strong> failed {
          tailf:code-name <strong xmlns="" class="hl-string"><em style="color:red">"z-failed"</em></strong>;
          <strong xmlns="" class="hl-keyword">type</strong> empty;
        }
        <strong xmlns="" class="hl-keyword">leaf</strong> deleting {
          tailf:hidden fastmap-private;
          <strong xmlns="" class="hl-keyword">type</strong> empty;
        }
      }

      tailf:action re-deploy {
        tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"revive the zombie and re-deploy it."</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The Nano service became a zombie since it was deleted but not
</em></strong>           all delete pre-conditions was fulfilled. This action revives the
           zombie service and re-deploys and stores it back as a zombie if
           necessary.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        tailf:actionpoint ncsinternal {
          tailf:internal;
        }
        <strong xmlns="" class="hl-keyword">input</strong> {
        }
        <strong xmlns="" class="hl-keyword">output</strong> {
          <strong xmlns="" class="hl-keyword">uses</strong> ncs-commit-result;
        }
      }
      tailf:action resurrect {
        tailf:info <strong xmlns="" class="hl-string"><em style="color:red">"Load the zombie back as service in current state."</em></strong>;
        <strong xmlns="" class="hl-keyword">description</strong>
          <strong xmlns="" class="hl-string"><em style="color:red">"The zombie resurrection is used to stop the progress of a staged
</em></strong>           nano service delete and restore current state as is.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>        tailf:actionpoint ncsinternal {
          tailf:internal;
        }
        <strong xmlns="" class="hl-keyword">input</strong> {
        }
        <strong xmlns="" class="hl-keyword">output</strong> {
          <strong xmlns="" class="hl-keyword">leaf</strong> result {
            <strong xmlns="" class="hl-keyword">type</strong> string;
          }
        }
      }
    }
  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Plan Extension Statements
   */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> plan {
    <strong xmlns="" class="hl-keyword">argument</strong> id {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"module"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"submodule"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component-type"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"+"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement is optionally used in a node that defines
</em></strong>       a service to document its plan.

       A plan is documented by listing all component-types that the
       service can instantiate, and their related states.  Note that
       a specific service instance may instantiate zero, one, or more
       components of a certain <strong xmlns="" class="hl-keyword">type</strong>.

       It is required that plan has one component of <strong xmlns="" class="hl-keyword">type</strong> ncs:self.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> component-<strong xmlns="" class="hl-keyword">type</strong> {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:state"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies the type which is a defined YANG identity.
</em></strong>
       A component-<strong xmlns="" class="hl-keyword">type</strong> contains a ordered <strong xmlns="" class="hl-keyword">list</strong> of states which in turn are
       defined by YANG identities. It is required that the first state in a
       component-<strong xmlns="" class="hl-keyword">type</strong> is ncs:init and the last state is ncs:ready.

       As such each state represents a unit of work to be
       performed by the service <strong xmlns="" class="hl-keyword">when</strong> a certain pre-condition is satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> state {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies the state and is a defined YANG identity.
</em></strong>
       It represents a unit of work to be
       performed by the service <strong xmlns="" class="hl-keyword">when</strong> a certain pre-condition is satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <em xmlns="" class="hl-comment" style="color: silver">/*
   * Behaviour tree extensions for nano-services
   */</em>

  <strong xmlns="" class="hl-keyword">extension</strong> plan-ref {
    <strong xmlns="" class="hl-keyword">argument</strong> id {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Plan identifier."</em></strong>;
  }

  <strong xmlns="" class="hl-keyword">extension</strong> behavior-tree {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"module"</em></strong>;
    tailf:use-in <strong xmlns="" class="hl-string"><em style="color:red">"submodule"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:plan-ref"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement is used to define the behaviour tree for a nano service.
</em></strong>
       The behavior tree consists of control-flow node and <strong xmlns="" class="hl-keyword">leaf</strong> nodes.
       The <strong xmlns="" class="hl-keyword">leaf</strong> nodes are component-types and the control-flow nodes
       resides in all branch points (nodes that contain children).

       When a behavior tree is evaluated, this is done from the top and each
       control-node will check if it will evaluate its children. How this is
       done depend on the <strong xmlns="" class="hl-keyword">type</strong> of control-flow node. When a <strong xmlns="" class="hl-keyword">leaf</strong> is reached
       the resulting component-<strong xmlns="" class="hl-keyword">type</strong> is added as a component to the plan and
       given a component-name.

       This process of dynamically defining a plan with its components by
       evaluation of the behaviour tree is called synthesizing.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> selector {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This control-flow node synthesizes its children
</em></strong>       that has pre-conditions that are satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> multiplier {
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selected-nodeset"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:selector"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:multiplier"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This control-flow node duplicates its children.
</em></strong>       The way it does this is by defining a node-set and create a component
       <strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> component-<strong xmlns="" class="hl-keyword">type</strong>-ref {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> tailf:identifier-ref;
      }
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"Component type identifier"</em></strong>;
  }

  <strong xmlns="" class="hl-keyword">extension</strong> create {

    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:nano-callback"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:post-action-node"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies Nano service state characteristics for
</em></strong>       a create operation. Like monitor for the pre-condition that <strong xmlns="" class="hl-keyword">must</strong> be
       met and/or post-action to be performed asynchronously after
       successful create completion.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> delete {

    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:nano-callback"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:monitor"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:post-action-node"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies Nano service state characteristics for
</em></strong>       a delete operation. Like monitor for the pre-condition that <strong xmlns="" class="hl-keyword">must</strong> be
       met and/or post-action to be performed asynchronously after
       successful delete completion.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> component {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:component-type-ref"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:create"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:delete"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement identifies a component instance based
</em></strong>       on a component <strong xmlns="" class="hl-keyword">type</strong>.

       It has a defined component name which is expected to be <strong xmlns="" class="hl-keyword">unique</strong>
       in the service plan for the service instance.
       The name can contain parameters described as XPath variables that
       can be substituted with a <strong xmlns="" class="hl-keyword">value</strong>.
       The name/<strong xmlns="" class="hl-keyword">value</strong> substitution expects these names and values being
       created in a control-flow node or earlier traversed state.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> nano-callback {
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement indicates that a callback must be
</em></strong>       registered for this state and operation.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> monitor {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:trigger-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"If a node that matches the value of this statement and the
</em></strong>       the <strong xmlns="" class="hl-string"><em style="color:red">'trigger'</em></strong> expression evaluates to true, this
       pre-condition is satisfied.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> trigger-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> expr {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This optional statement is used to further filter nodes
</em></strong>       in a given nodeset.
       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the pre-condition
       is fulfilled otherwise not fulfilled.

       The context for evaluating this expression is the individual nodes
       in the resulting node-set of the related monitor expression.

       The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
       with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> post-action-node {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:action-name"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"1"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:result-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defined a action side-effect to be executed
</em></strong>       after the state has been successfully been executed.

       This statement <strong xmlns="" class="hl-keyword">argument</strong> is the node where the action resides.

       This action is executed asynchronously with respect to initial
       service transaction. The result is manifested as a <strong xmlns="" class="hl-keyword">value</strong> in
       the requesting plan states post-action-<strong xmlns="" class="hl-keyword">status</strong> <strong xmlns="" class="hl-keyword">leaf</strong>.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> action-name {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"The name of the action"</em></strong>;
  }

  <strong xmlns="" class="hl-keyword">extension</strong> result-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> expr {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"An action responds with a structured result. A certain value
</em></strong>       could indicate an error or a successful result, e.g.,
       <strong xmlns="" class="hl-string"><em style="color:red">'result true'</em></strong>.

       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the action
       is reported as successful, otherwise as failed.

       The context for evaluating this expression is the
       resulting xml tree of the action.

       There are no variable bindings in this evaluation.
       The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
       with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> selected-nodeset {
    <strong xmlns="" class="hl-keyword">argument</strong> xpath {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:filter"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:variable"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"*"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement describes the XPath expression for the node-set
</em></strong>       that is the basis for a multiplier selection. For each node in
       the resulting node-set the child will be duplicated.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> filter {
    <strong xmlns="" class="hl-keyword">argument</strong> expr {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This optional statement describes an XPath expression that is
</em></strong>       used to further filter the selection of nodes from the
       node-set.

       The result of the expression is converted to a boolean using
       the standard XPath rules.  If the result is <strong xmlns="" class="hl-string"><em style="color:red">'true'</em></strong> the node is
       added to the node-set.

       The context for evaluating this expression is the individual nodes
       in the resulting node-set of the related <strong xmlns="" class="hl-string"><em style="color:red">'selected-nodeset'</em></strong> expression.

       The set of <strong xmlns="" class="hl-keyword">namespace</strong> declarations are all available namespaces,
       with the prefixes defined in the modules.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> variable {
    <strong xmlns="" class="hl-keyword">argument</strong> name {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }

    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"ncs:value-expr"</em></strong> {
      tailf:occurence <strong xmlns="" class="hl-string"><em style="color:red">"?"</em></strong>;
    }

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement represent a variable with a name and a value.  The
</em></strong>       <strong xmlns="" class="hl-keyword">value</strong> is evaluated as an XPath expression and are later
       identified by its variable name.

       A variable called XXX can thus be retrieved as <strong xmlns="" class="hl-string"><em style="color:red">'{$XXX}'</em></strong>.

       These variables are for instance used in the multiplier
       control-flow node to create <strong xmlns="" class="hl-keyword">unique</strong> naming of the cloned
       components.  The child components can be given names like
       <strong xmlns="" class="hl-string"><em style="color:red">'comp_{$VALUE}'</em></strong> and <strong xmlns="" class="hl-keyword">when</strong> this statement expression is evaluated
       the resulting component will have name with {$VALUE}
       substituted.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

  <strong xmlns="" class="hl-keyword">extension</strong> <strong xmlns="" class="hl-keyword">value</strong>-expr {
    <strong xmlns="" class="hl-keyword">argument</strong> expr {
      tailf:arg-<strong xmlns="" class="hl-keyword">type</strong> {
        <strong xmlns="" class="hl-keyword">type</strong> string;
      }
    }
    tailf:substatement <strong xmlns="" class="hl-string"><em style="color:red">"description"</em></strong>;

    <strong xmlns="" class="hl-keyword">description</strong>
      <strong xmlns="" class="hl-string"><em style="color:red">"This statement defines an XPath expression that when evaluated
</em></strong>       constitutes a <strong xmlns="" class="hl-keyword">value</strong> for a variable.  If the variable and this
       <strong xmlns="" class="hl-keyword">value</strong> is evaluated in context of a node set then the current
       node will be the current context for the evaluation.  The
       evaluated expression is passed as a string in all later
       control-flow nodes and plan components and will be used for
       parameter substitution in all further xpath evaluations.

       This <strong xmlns="" class="hl-keyword">value</strong> is retrieved by using the <strong xmlns="" class="hl-string"><em style="color:red">'{$VALUE}'</em></strong> i.e the name of
       the parameter is <strong xmlns="" class="hl-string"><em style="color:red">'VALUE'</em></strong>.  The primary use of this parameter is
       in creating a <strong xmlns="" class="hl-keyword">unique</strong> naming of the components created by the
       multiplier control-flow node.  The child components can be
       given names like <strong xmlns="" class="hl-string"><em style="color:red">'comp_{$VALUE}'</em></strong> and <strong xmlns="" class="hl-keyword">when</strong> this statement
       expression is evaluated the resulting component will have name
       with {$VALUE} substituted.<strong xmlns="" class="hl-string"><em style="color:red">";
</em></strong>  }

}</pre><p>
                     
            </p>
            <p>
                       The <code class="code">ncs:plan-data</code> grouping is defined as
                       operational data that is supposed to be added to the Reactive
                       FASTMAP service yang with a <code class="code">uses ncs:plan-data</code>
                       YANG directive.
                     
            </p>
            <p>
                       A <span class="emphasis"><em>plan</em></span> consists of one or many
                       <span class="emphasis"><em>component</em></span> entries. Each
                       <span class="emphasis"><em>component</em></span> has a name and a type. The type
                       is an identityref and the service must therefore define
                       identities for the types of components it uses. There is one
                       predefined component type named <span class="emphasis"><em>self</em></span> and
                       a service with a plan is expected to have at least the
                       <span class="emphasis"><em>self</em></span> component defined.
                     
            </p>
            <p>
                       Each component consists of two or more
                       <span class="emphasis"><em>state</em></span> entries
                       where the state name is an identityref. The service must
                       define identities for the states it wants to use. There are two
                       predefined states <span class="emphasis"><em>init</em></span> and
                       <span class="emphasis"><em>ready</em></span> and each plan component is expected
                       to have <span class="emphasis"><em>init</em></span> as its first state and
                       <span class="emphasis"><em>ready</em></span> as its last.
                     
            </p>
            <p>
                       A state has a status leaf which can take one of the values
                       <span class="emphasis"><em>not-reached</em></span>, <span class="emphasis"><em>reached</em></span>
                       or <span class="emphasis"><em>failed</em></span>.
                     
            </p>
            <p>
                       The purpose of the <span class="emphasis"><em>self</em></span> component is to
                       show the overall progress of the Reactive FASTMAP service and
                       the <span class="emphasis"><em>self</em></span> component <span class="emphasis"><em>ready</em></span>
                       state should have status <span class="emphasis"><em>reached</em></span> if and
                       only if the service has completed successfully.
                       All other components and states are optional and should be
                       used to show the progress in more detail if necessary.
                     
            </p>
            <p>
                       The plan should be defined and the statuses written inside the
                       service <code class="code">create()</code> method. Hence the same FASTMAP
                       logic applies to the plan as for any other configuration data.
                       This implies that the plan has to be defined
                       completely at <code class="code">create()</code> as if this was the first
                       definition. If a service modification or <code class="code">reactive-re-deploy</code>
                       leave out a state or component, that has been earlier defined, this
                       state or component will be removed.
                     
            </p>
            <p>
                       When the status leaf in a component state changes value
                       NSO will log the time of the status change in the
                       <span class="emphasis"><em>when</em></span> leaf. Furthermore when there is a
                       structural changes of the plan, i.e added/removed components
                       or states, NSO will log this in the
                       <span class="emphasis"><em>plan-history</em></span> list.
                       The Reactive FASTMAP service need not and should not attempt doing
                       this logging inside the create method.
                     
            </p>
            <p>
                       A plan also defines an empty leaf <span class="emphasis"><em>failed</em></span>.
                       NSO will set this leaf when there exists states in the
                       plan with status <span class="emphasis"><em>failed</em></span>.
                       As such this is an aggregation to make it easy to verify if a
                       RFM service is progressing without problems.
                     
            </p>
            <p>
                       In the Java API there exist a utility class to help writing
                       plan data in the service create method. This class is called
                       PlanComponent and has the following methods:
               
                       
            </p><pre class="programlisting">public class PlanComponent {

    /**
    * Creation of a plan component.
    * It uses a NavuNode pointing to the service. This is normally the same
    * NavuNode as supplied as an argument to the service create() method.
    *
    * @param service
    * @param name
    * @param componentType
    * @throws NavuException
    */
    public PlanComponent(NavuNode service,
                         String name,
                         String componentType) throws NavuException;

    /**
     * This method supplies a state to the specific component.
     * The initial status for this state can be ncs:reached or ncs:not-reached
     * and is indicated by setting the reached boolean to true or false
     * respectively
     *
     * @param stateName
     * @param reached
     * @return
     * @throws NavuException
     */
    public PlanComponent append(String stateName) throws NavuException;

    /**
     * Setting status to ncs:not-reached for a specific state in the
     * plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setNotReached(String stateName) throws NavuException;

    /**
     * Setting status to ncs:reached for a specific state in the plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setReached(String stateName) throws NavuException;

    /**
     * Setting status to ncs:failed for a specific state in the plan component
     *
     * @param stateName
     * @return
     * @throws NavuException
     */
    public PlanComponent setFailed(String stateName) throws NavuException;

}</pre><p>
               
                       The constructor for the PlanComponent takes the service
                       NavuNode from the <code class="code">create()</code> method together with
                       the component name and type. The type is either
                       <span class="emphasis"><em>ncs:self</em></span> or any other type defined as
                       an identity in the service YANG module.
                       The PlanComponent instance has an <code class="code">append()</code> method
                       to add new states which is either <span class="emphasis"><em>ncs:init</em></span>,
                       <span class="emphasis"><em>ncs:ready</em></span> or any other state defined as
                       an identity in the service YANG module.
                       The <code class="code">setNotReached()</code>, <code class="code">setReached()</code> or
                       <code class="code">setFailed()</code> methods are
                       used to set the current status of a given state.
                     
            </p>
            <div class="sect3">
               <div xmlns="" class="titlepage">
                  <div>
                     <div>
                        <h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="d0e10284"></a>Example: use of plan-data in the virtual-mpls-vpn
                        </h4>
                     </div>
                  </div>
               </div>
               <p>
                            The following shows the use of plan-data in the
                            <code class="filename">examples.ncs/service-provider/virtual-mpls-vpn</code>
                            example. The objective in this example is to create and maintain a
                            plan that has one main <span class="emphasis"><em>self</em></span> component
                            together with one component for each endpoint in the service.
                            The endpoints can make use of either physical or virtual
                            devices. If the endpoint uses a virtual device the corresponding plan
                            component will contain additional states to reflect the
                            staged setup of the virtual device.
                          
               </p>
               <p>
                            In the service YANG file named
                            <code class="filename">l3vpn.yang</code> we define the identity for
                            the endpoint component type and the service specific states
                            for the different components:
                            
               </p><pre class="programlisting">            ....

  identity l3vpn {
    base ncs:component-type;
  }

  identity pe-created {
    base ncs:plan-state;
  }
  identity ce-vpe-topo-added {
    base ncs:plan-state;
  }
  identity vpe-p0-topo-added {
    base ncs:plan-state;
  }
  identity qos-configured {
    base ncs:plan-state;
  }

  container vpn {
    list l3vpn {
      description "Layer3 VPN";

      key name;
      leaf name {
        tailf:info "Unique service id";
        tailf:cli-allow-range;
        type string;
      }

      uses ncs:plan-data;
      uses ncs:service-data;
      ncs:servicepoint l3vpn-servicepoint;

            ....</pre><p>
                            In the service list definition the plan data is introduced
                            using the <code class="code">uses ncs:plan-data</code> directive.
                          
               </p>
               <p>
                            In the service <code class="code">create()</code> method we introduce a Java
                            Properties instance where we temporarily store data for the
                            relevant Reactive FASTMAP steps that currently are completed. We
                            create a private method <code class="code">writePlanData()</code> that
                            can write the plan with this Properties instance as input.
                            Before we return from the <code class="code">create()</code> method we
                            call the <code class="code">writePlanData()</code> method.
                            The following code snippets from the class
                            <code class="filename">l3vpnRFS.java</code> illustrates this design:
                          
               </p>
               <p>
                            Initially we create a Properties instance called
                            rfmProgress:
                            
               </p><pre class="programlisting">  <em xmlns=""><span class="hl-annotation" style="color: gray">@ServiceCallback(servicePoint = "l3vpn-servicepoint",
                   callType = ServiceCBType.CREATE)</span></em>
  <strong xmlns="" class="hl-keyword">public</strong> Properties create(ServiceContext context,
                           NavuNode service,
                           NavuNode ncsRoot, Properties opaque)
    <strong xmlns="" class="hl-keyword">throws</strong> ConfException
  {
    WebUILogger.log(LOGGER, <strong xmlns="" class="hl-string"><em style="color:red">"***** Create/Reactive-re-deploy ************"</em></strong>);

    Properties rfmProgress = <strong xmlns="" class="hl-keyword">new</strong> Properties();</pre><p>
                          
               </p>
               <p>
                            For each Reactive FastMap step that we reach we store some
                            relevant data in the rfmProgress Properties instance:
                            
               </p><pre class="programlisting">    StringBuffer stb = <strong xmlns="" class="hl-keyword">new</strong> StringBuffer();
    <strong xmlns="" class="hl-keyword">for</strong> (NavuContainer endpoint : endpoints.elements()) {
       <strong xmlns="" class="hl-keyword">if</strong> (stb.length() &gt; <span xmlns="" class="hl-number">0</span>) {
           stb.append(<strong xmlns="" class="hl-string"><em style="color:red">","</em></strong>);
       }
       stb.append(endpoint.leaf(l3vpn._id).valueAsString());
    }
    rfmProgress.setProperty(<strong xmlns="" class="hl-string"><em style="color:red">"endpoints"</em></strong>, stb.toString());

    String tenant = service.leaf(l3vpn._name).valueAsString();
    String deploymentName = <strong xmlns="" class="hl-string"><em style="color:red">"vpn"</em></strong>;

    String virtualPEName =
            Helper.makeDevName(tenant, deploymentName, <strong xmlns="" class="hl-string"><em style="color:red">"CSR"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"esc0"</em></strong>);

    <strong xmlns="" class="hl-keyword">for</strong> (NavuContainer endpoint : endpoints.elements()) {
      <strong xmlns="" class="hl-keyword">try</strong> {
        String endpointId = endpoint.leaf(l3vpn._id).valueAsString();

        String ceName = endpoint.leaf(l3vpn._ce_device).valueAsString();

        <strong xmlns="" class="hl-keyword">if</strong> (CEonVPE.contains(ceName)) {
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".ONVPE"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"true"</em></strong>);


          <strong xmlns="" class="hl-keyword">if</strong> (!createVirtualPE(context, service, ncsRoot, ceName, tenant,
                               deploymentName)) {
            <em xmlns="" class="hl-comment" style="color: silver">// We cannot continue with this CE until redeploy</em>
            <strong xmlns="" class="hl-keyword">continue</strong>;
          }
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".pe-created"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"DONE"</em></strong>);

          LOGGER.info(<strong xmlns="" class="hl-string"><em style="color:red">"device ready, continue: "</em></strong> + virtualPEName);

          addToTopologyRole(ncsRoot, virtualPEName, <strong xmlns="" class="hl-string"><em style="color:red">"pe"</em></strong>);

          <em xmlns="" class="hl-comment" style="color: silver">// Add CE-VPE topology, reuse old topology connection if available</em>
          NavuContainer conn = getConnection(
            topology, endpoint.leaf(l3vpn._ce_device).valueAsString(), <strong xmlns="" class="hl-string"><em style="color:red">"pe"</em></strong>);
          <strong xmlns="" class="hl-keyword">if</strong> (!addToTopology(service, ncsRoot, conn,
                ceName, <strong xmlns="" class="hl-string"><em style="color:red">"GigabitEthernet0/8"</em></strong>,
                virtualPEName, <strong xmlns="" class="hl-string"><em style="color:red">"GigabitEthernet2"</em></strong>,
                ceName, Settings.ipPoolPE_CE)) {
            <em xmlns="" class="hl-comment" style="color: silver">// We cannot continue with this CE until redeploy</em>
            <strong xmlns="" class="hl-keyword">continue</strong>;
          }
          rfmProgress.setProperty(endpointId + <strong xmlns="" class="hl-string"><em style="color:red">".ce-vpe-topo-added"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"DONE"</em></strong>);</pre><p>
                          
               </p>
               <p>
                            Before we return from the <code class="code">create()</code> method we call the
                            <code class="code">writePlanData()</code> method passing in the
                            rfmProgress instance:
                            
               </p><pre class="programlisting">    writePlanData(service, rfmProgress);

    <strong xmlns="" class="hl-keyword">return</strong> opaque;
  }</pre><p>
                          
               </p>
               <p>
                            The <code class="code">writePlanData()</code> method first creates all
                            components and sets the default values for all statuses.
                            Then we read the rfmProgress instance and change the states for
                            the all the Reactive FASTMAP steps that we have reached.
                            In the end we check if the self component <code class="code">ready</code>
                            state has been reached.
                            The reason for initially writing the complete plan with
                            default values for the statuses is not to miss a component
                            that have not made any progress yet, remember this is
                            FASTMAP, components and states that was written in an
                            earlier <code class="code">reactive-re-deploy</code> but is not written
                            now will be deleted by NSO.
                            The <code class="code">writePlanData()</code> method has the following design:
                            
               </p><pre class="programlisting">  <strong xmlns="" class="hl-keyword">private</strong> <strong xmlns="" class="hl-keyword">void</strong> writePlanData(NavuNode service, Properties rfmProgress)
      <strong xmlns="" class="hl-keyword">throws</strong> NavuException {
      <strong xmlns="" class="hl-keyword">try</strong> {

          PlanComponent self = <strong xmlns="" class="hl-keyword">new</strong> PlanComponent(service, <strong xmlns="" class="hl-string"><em style="color:red">"self"</em></strong>, <strong xmlns="" class="hl-string"><em style="color:red">"ncs:self"</em></strong>);
          <em xmlns="" class="hl-comment" style="color: silver">// Initial plan</em>
          self.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>).
               appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
          self.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);

          String eps = rfmProgress.getProperty(<strong xmlns="" class="hl-string"><em style="color:red">"endpoints"</em></strong>);
          String ep[] = eps.split(<strong xmlns="" class="hl-string"><em style="color:red">","</em></strong>);

          <strong xmlns="" class="hl-keyword">boolean</strong> ready = true;
          <strong xmlns="" class="hl-keyword">for</strong> (String p : ep) {
              <strong xmlns="" class="hl-keyword">boolean</strong> onvpe = false;
              <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".ONVPE"</em></strong>)) {
                  onvpe = true;
              }
              PlanComponent pcomp = <strong xmlns="" class="hl-keyword">new</strong> PlanComponent(service,
                                                      <strong xmlns="" class="hl-string"><em style="color:red">"endpoint-"</em></strong> + p,
                                                      <strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:l3vpn"</em></strong>);
              <em xmlns="" class="hl-comment" style="color: silver">// Initial plan</em>
              pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);
              pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:init"</em></strong>);
              <strong xmlns="" class="hl-keyword">if</strong> (onvpe) {
                  pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:pe-created"</em></strong>).
                  appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:ce-vpe-topo-added"</em></strong>).
                  appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:vpe-p0-topo-added"</em></strong>);
              }
              pcomp.appendState(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:qos-configured"</em></strong>).
                    appendState(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);

              <strong xmlns="" class="hl-keyword">boolean</strong> p_ready = true;
              <strong xmlns="" class="hl-keyword">if</strong> (onvpe) {
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".pe-created"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:pe-created"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".ce-vpe-topo-added"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:ce-vpe-topo-added"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
                  <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".vpe-p0-topo-added"</em></strong>)) {
                      pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:vpe-p0-topo-added"</em></strong>);
                  } <strong xmlns="" class="hl-keyword">else</strong> {
                      p_ready = false;
                  }
              }
              <strong xmlns="" class="hl-keyword">if</strong> (rfmProgress.containsKey(p + <strong xmlns="" class="hl-string"><em style="color:red">".qos-configured"</em></strong>)) {
                  pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"l3vpn:qos-configured"</em></strong>);
              } <strong xmlns="" class="hl-keyword">else</strong> {
                  p_ready = false;
              }

              <strong xmlns="" class="hl-keyword">if</strong> (p_ready) {
                  pcomp.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
              } <strong xmlns="" class="hl-keyword">else</strong> {
                  ready = false;
              }
          }

          <strong xmlns="" class="hl-keyword">if</strong> (ready) {
              self.setReached(<strong xmlns="" class="hl-string"><em style="color:red">"ncs:ready"</em></strong>);
          }
      } <strong xmlns="" class="hl-keyword">catch</strong> (Exception e) {
          <strong xmlns="" class="hl-keyword">throw</strong> <strong xmlns="" class="hl-keyword">new</strong> NavuException(<strong xmlns="" class="hl-string"><em style="color:red">"could not update plan."</em></strong>, e);
      }

  }</pre><p>
                          
               </p>
               <p>
                            Running the example and showing the plan while the chain of
                            <code class="code">reactive-re-deploy</code> is still in execution could look
                            something like the following:
                  
               </p><pre class="screen">ncs# <strong class="userinput"><code>show vpn l3vpn volvo plan</code></strong>
NAME                    TYPE   STATE              STATUS       WHEN
------------------------------------------------------------------------------------
self                    self   init               reached      2016-04-08T09:22:40
                               ready              not-reached  -
endpoint-branch-office  l3vpn  init               reached      2016-04-08T09:22:40
                               qos-configured     reached      2016-04-08T09:22:40
                               ready              reached      2016-04-08T09:22:40
endpoint-head-office    l3vpn  init               reached      2016-04-08T09:22:40
                               pe-created         not-reached  -
                               ce-vpe-topo-added  not-reached  -
                               vpe-p0-topo-added  not-reached  -
                               qos-configured     not-reached  -
                               ready              not-reached  -</pre><p>
                  
                          
               </p>
            </div>
         </div><script type="text/javascript" src="common/main.js">
            <!----></script><script type="text/javascript" src="common/splitterInit.js">
            <!----></script><div class="footer" id="footer-legal">
            <div class="footer-legal framework-footer-cq">
               <div id="framework-footer">
                  <div id="footer-legal"><a href="http://www.cisco.com/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html">Privacy Statement</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/trademark.html">Trademarks</a></div>
               </div>
            </div>
         </div>
      </div>
      <div id="sidebar">
         <div id="leftnavigation" style="padding-top:3px;">
            <div id="tabs">
               <ul style="visibility: hidden;"></ul>
               <div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;" /><div id="ulTreeDiv" style="display:none">
                     <ul id="tree" class="filetree">
                        <li><span class="file"><a href="ncs.ug.architecture.html" tabindex="1">NSO Architecture</a></span><ul>
                              <li><span class="file"><a href="ch01s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch01s02.html" tabindex="1">Architecture Overview</a></span></li>
                              <li><span class="file"><a href="ch01s03.html" tabindex="1">The NSO Data Model</a></span></li>
                              <li><span class="file"><a href="ch01s04.html" tabindex="1">Process Architecture</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.javavm.html" tabindex="1">The NSO Java VM</a></span><ul>
                              <li><span class="file"><a href="ch02s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch02s02.html" tabindex="1">The NED component type</a></span></li>
                              <li><span class="file"><a href="ch02s03.html" tabindex="1">The callback component type</a></span></li>
                              <li><span class="file"><a href="ch02s04.html" tabindex="1">The application component type</a></span></li>
                              <li><span class="file"><a href="ncs.ug.javavm.resman.html" tabindex="1">The Resource Manager</a></span></li>
                              <li><span class="file"><a href="ch02s06.html" tabindex="1">The Alarm centrals</a></span></li>
                              <li><span class="file"><a href="ch02s07.html" tabindex="1">Embedding the NSO Java VM</a></span></li>
                              <li><span class="file"><a href="ch02s08.html" tabindex="1">JMX interface</a></span></li>
                              <li><span class="file"><a href="ch02s09.html" tabindex="1">Logging</a></span><ul>
                                    <li><span class="file"><a href="ch02s09s01.html" tabindex="1">The NSO Java VM timeouts</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.pythonvm.html" tabindex="1">The NSO Python VM</a></span><ul>
                              <li><span class="file"><a href="ch03s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch03s02.html" tabindex="1">YANG model</a></span></li>
                              <li><span class="file"><a href="ncs.development.pythonvm.ucode.html" tabindex="1">Structure of the User provided code</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.pythonvm.cthread.html" tabindex="1">The application component</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.pythonvm.debug.html" tabindex="1">Debugging of Python packages</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.embedded_erlang.html" tabindex="1">Embedded Erlang applications</a></span><ul>
                              <li><span class="file"><a href="ch04s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch04s02.html" tabindex="1">Erlang API</a></span></li>
                              <li><span class="file"><a href="ch04s03.html" tabindex="1">Application configuration</a></span></li>
                              <li><span class="file"><a href="ch04s04.html" tabindex="1">Example</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.cdb.html" tabindex="1">CDB - The NSO Configuration Database</a></span><ul>
                              <li><span class="file"><a href="ch05s01.html" tabindex="1">Introduction</a></span><ul>
                                    <li><span class="file"><a href="ch05s01s01.html" tabindex="1">Key Features of CDB</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch05s02.html" tabindex="1">Addressing Data Using Keypaths</a></span></li>
                              <li><span class="file"><a href="ug.cdb.subscriptions.html" tabindex="1">Subscriptions</a></span></li>
                              <li><span class="file"><a href="ch05s04.html" tabindex="1">Sessions</a></span></li>
                              <li><span class="file"><a href="ug.cdb.init.html" tabindex="1">Loading Initial Data Into CDB</a></span></li>
                              <li><span class="file"><a href="ug.cdb.opdata.html" tabindex="1">Operational Data in CDB</a></span><ul>
                                    <li><span class="file"><a href="ch05s06s01.html" tabindex="1">Subscriptions</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch05s07.html" tabindex="1">Example</a></span><ul>
                                    <li><span class="file"><a href="ch05s07s01.html" tabindex="1">Operational Data</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.cdb.upgrade.html" tabindex="1">Automatic Schema Upgrades and Downgrades</a></span></li>
                              <li><span class="file"><a href="ch05s09.html" tabindex="1">Using Initialization Files for Upgrade</a></span></li>
                              <li><span class="file"><a href="ncs.cdb.upgrade.comp.html" tabindex="1">Writing an Upgrade Package Component</a></span></li>
                              <li><span class="file"><a href="ch05s11.html" tabindex="1">Automatic Service Upgrade from NCS 2.x to NCS 3.0</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.java_api_overview.html" tabindex="1">Java API Overview</a></span><ul>
                              <li><span class="file"><a href="ch06s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.ncs.api.maapi.html" tabindex="1">MAAPI</a></span></li>
                              <li><span class="file"><a href="ch06s03.html" tabindex="1">CDB API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.dp.html" tabindex="1">DP API</a></span><ul>
                                    <li><span class="file"><a href="ch06s04s01.html" tabindex="1">Transaction and Data Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch06s04s02.html" tabindex="1">Service and Action Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch06s04s03.html" tabindex="1">Validation Callbacks</a></span></li>
                                    <li><span class="file"><a href="ch06s04s04.html" tabindex="1">Transforms</a></span></li>
                                    <li><span class="file"><a href="ch06s04s05.html" tabindex="1">Hooks</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch06s05.html" tabindex="1">NED API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.navu.html" tabindex="1">NAVU API</a></span></li>
                              <li><span class="file"><a href="ch06s07.html" tabindex="1">ALARM API</a></span></li>
                              <li><span class="file"><a href="ug.java_api_overview.notif.html" tabindex="1">NOTIF API</a></span></li>
                              <li><span class="file"><a href="ch06s09.html" tabindex="1">HA API</a></span></li>
                              <li><span class="file"><a href="ch06s10.html" tabindex="1">Java API Conf Package</a></span></li>
                              <li><span class="file"><a href="ch06s11.html" tabindex="1">Namespace classes and the loaded schema</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.python_api_overview.html" tabindex="1">Python API Overview</a></span><ul>
                              <li><span class="file"><a href="ch07s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch07s02.html" tabindex="1">Python API overview</a></span></li>
                              <li><span class="file"><a href="ch07s03.html" tabindex="1">Python scripting</a></span></li>
                              <li><span class="file"><a href="ch07s04.html" tabindex="1">High-level MAAPI API</a></span></li>
                              <li><span class="file"><a href="ch07s05.html" tabindex="1">Maagic API</a></span><ul>
                                    <li><span class="file"><a href="ch07s05s01.html" tabindex="1">Namespaces</a></span></li>
                                    <li><span class="file"><a href="ch07s05s02.html" tabindex="1">Reading data</a></span></li>
                                    <li><span class="file"><a href="ch07s05s03.html" tabindex="1">Writing data</a></span></li>
                                    <li><span class="file"><a href="ch07s05s04.html" tabindex="1">Deleting data</a></span></li>
                                    <li><span class="file"><a href="ch07s05s05.html" tabindex="1">Containers</a></span></li>
                                    <li><span class="file"><a href="ch07s05s06.html" tabindex="1">Presence containers</a></span></li>
                                    <li><span class="file"><a href="ch07s05s07.html" tabindex="1">Choices</a></span></li>
                                    <li><span class="file"><a href="ch07s05s08.html" tabindex="1">Lists and List elements</a></span></li>
                                    <li><span class="file"><a href="ch07s05s09.html" tabindex="1">Unions</a></span></li>
                                    <li><span class="file"><a href="ch07s05s10.html" tabindex="1">Enumeration</a></span></li>
                                    <li><span class="file"><a href="ch07s05s11.html" tabindex="1">Leafref</a></span></li>
                                    <li><span class="file"><a href="ch07s05s12.html" tabindex="1">Identityref</a></span></li>
                                    <li><span class="file"><a href="ch07s05s13.html" tabindex="1">Instance-identifier</a></span></li>
                                    <li><span class="file"><a href="ch07s05s14.html" tabindex="1">Leaf-list</a></span></li>
                                    <li><span class="file"><a href="ch07s05s15.html" tabindex="1">Binary</a></span></li>
                                    <li><span class="file"><a href="ch07s05s16.html" tabindex="1">Bits</a></span></li>
                                    <li><span class="file"><a href="ch07s05s17.html" tabindex="1">Empty leaf</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch07s06.html" tabindex="1">Maagic examples</a></span><ul>
                                    <li><span class="file"><a href="ch07s06s01.html" tabindex="1">Action requests</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch07s07.html" tabindex="1">PlanComponent</a></span></li>
                              <li><span class="file"><a href="ch07s08.html" tabindex="1">Python packages</a></span><ul>
                                    <li><span class="file"><a href="ch07s08s01.html" tabindex="1">Action handler</a></span></li>
                                    <li><span class="file"><a href="ch07s08s02.html" tabindex="1">Service handler</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch07s09.html" tabindex="1">Low-level APIs</a></span><ul>
                                    <li><span class="file"><a href="ch07s09s01.html" tabindex="1">Low-level MAAPI API</a></span></li>
                                    <li><span class="file"><a href="ch07s09s02.html" tabindex="1">Low-level CDB API</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.packages.html" tabindex="1">NSO Packages</a></span><ul>
                              <li><span class="file"><a href="ug.packages.overview.html" tabindex="1">Package Overview</a></span></li>
                              <li><span class="file"><a href="ch08s02.html" tabindex="1">An Example Package</a></span></li>
                              <li><span class="file"><a href="ch08s03.html" tabindex="1">Components</a></span></li>
                              <li><span class="file"><a href="ug.packages.creating.html" tabindex="1">Creating Packages </a></span><ul>
                                    <li><span class="file"><a href="ch08s04s01.html" tabindex="1">Creating a NETCONF NED Package</a></span></li>
                                    <li><span class="file"><a href="ch08s04s02.html" tabindex="1">Creating an SNMP NED Package</a></span></li>
                                    <li><span class="file"><a href="ch08s04s03.html" tabindex="1">Creating a CLI NED Package or a Generic NED Package</a></span></li>
                                    <li><span class="file"><a href="ch08s04s04.html" tabindex="1">Creating a Service Package or a Data Provider Package</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.package_dev.html" tabindex="1">Package Development</a></span><ul>
                              <li><span class="file"><a href="ch09s01.html" tabindex="1">Developing a Service Package</a></span></li>
                              <li><span class="file"><a href="ch09s02.html" tabindex="1">ncs-setup</a></span></li>
                              <li><span class="file"><a href="ch09s03.html" tabindex="1">The netsim Part of a NED Package</a></span></li>
                              <li><span class="file"><a href="ug.scripting_devel.html" tabindex="1">Plug-and-play scripting</a></span></li>
                              <li><span class="file"><a href="ch09s05.html" tabindex="1">Creating a Service Package</a></span></li>
                              <li><span class="file"><a href="ch09s06.html" tabindex="1">Java Service Implementation</a></span></li>
                              <li><span class="file"><a href="ch09s07.html" tabindex="1">Developing our First Service Application</a></span></li>
                              <li><span class="file"><a href="ch09s08.html" tabindex="1">Tracing Within the NSO Service Manager</a></span></li>
                              <li><span class="file"><a href="ch09s09.html" tabindex="1">Controlling error messages info level from Java</a></span></li>
                              <li><span class="file"><a href="ug.package_dev.loading.html" tabindex="1">Loading Packages</a></span></li>
                              <li><span class="file"><a href="ch09s11.html" tabindex="1">Debugging the Service and Using Eclipse IDE</a></span><ul>
                                    <li><span class="file"><a href="ch09s11s01.html" tabindex="1">Running the NSO Java VM Standalone</a></span></li>
                                    <li><span class="file"><a href="ch09s11s02.html" tabindex="1">Using Eclipse to Debug the Package Java Code</a></span></li>
                                    <li><span class="file"><a href="ch09s11s03.html" tabindex="1">Remote Connecting with Eclipse to the NSO Java VM</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch09s12.html" tabindex="1">Working with ncs-project</a></span><ul>
                                    <li><span class="file"><a href="ch09s12s01.html" tabindex="1">Create a new project</a></span></li>
                                    <li><span class="file"><a href="ch09s12s02.html" tabindex="1">Project setup</a></span></li>
                                    <li><span class="file"><a href="ch09s12s03.html" tabindex="1">Export</a></span></li>
                                    <li><span class="file"><a href="ch09s12s04.html" tabindex="1">NCS Project man pages</a></span></li>
                                    <li><span class="file"><a href="ch09s12s05.html" tabindex="1">NCS Project YANG model</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.services.html" tabindex="1">Developing NSO Services</a></span><ul>
                              <li><span class="file"><a href="ch10s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch10s02.html" tabindex="1">Definitions</a></span></li>
                              <li><span class="file"><a href="ch10s03.html" tabindex="1">The Fundamentals</a></span><ul>
                                    <li><span class="file"><a href="ch10s03s01.html" tabindex="1">Mapping</a></span></li>
                                    <li><span class="file"><a href="ch10s03s02.html" tabindex="1">
                                                     FASTMAP and Transactions
                                                   </a></span></li>
                                    <li><span class="file"><a href="ch10s03s03.html" tabindex="1">Auto-rendering from the Service Model</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s04.html" tabindex="1">Writing the Service Model</a></span></li>
                              <li><span class="file"><a href="ch10s05.html" tabindex="1">Finding the Mapping</a></span><ul>
                                    <li><span class="file"><a href="ch10s05s01.html" tabindex="1">
                                                     Mapping Iterations
                                                   </a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s06.html" tabindex="1">Strategies to Implement the Mapping</a></span></li>
                              <li><span class="file"><a href="ch10s07.html" tabindex="1">Creating an NSO Service Application</a></span></li>
                              <li><span class="file"><a href="ncs.development.services.mapping_template.html" tabindex="1">
                                           Mapping using Service Templates</a></span><ul>
                                    <li><span class="file"><a href="ch10s08s01.html" tabindex="1">Preparation</a></span></li>
                                    <li><span class="file"><a href="ch10s08s02.html" tabindex="1">Defining the Service Model</a></span></li>
                                    <li><span class="file"><a href="ch10s08s03.html" tabindex="1">Defining the Template</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.services.mapping_java.html" tabindex="1">Mapping using Java</a></span><ul>
                                    <li><span class="file"><a href="ch10s09s01.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch10s09s02.html" tabindex="1">Setting up the environment</a></span></li>
                                    <li><span class="file"><a href="ch10s09s03.html" tabindex="1">Creating a service package</a></span></li>
                                    <li><span class="file"><a href="ch10s09s04.html" tabindex="1">The Service Model</a></span></li>
                                    <li><span class="file"><a href="ch10s09s05.html" tabindex="1">Managing the NSO Java VM</a></span></li>
                                    <li><span class="file"><a href="ch10s09s06.html" tabindex="1">A first look at Java Development</a></span></li>
                                    <li><span class="file"><a href="ch10s09s07.html" tabindex="1">Using Eclipse</a></span></li>
                                    <li><span class="file"><a href="ch10s09s08.html" tabindex="1">Writing the service code</a></span><ul>
                                          <li><span class="file"><a href="ch10s09s08.html#d0e9155" tabindex="1">Fetching the service attributes</a></span></li>
                                          <li><span class="file"><a href="ch10s09s08.html#d0e9243" tabindex="1">Mapping service attributes to device configuration</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s10.html" tabindex="1">Mapping using Java combined with Templates</a></span><ul>
                                    <li><span class="file"><a href="ch10s10s01.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch10s10s02.html" tabindex="1">The VLAN Feature Template</a></span></li>
                                    <li><span class="file"><a href="ch10s10s03.html" tabindex="1">The VLAN Java Logic</a></span></li>
                                    <li><span class="file"><a href="ch10s10s04.html" tabindex="1">Steps to Build a Java and Template Solution</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s11.html" tabindex="1">Service Mapping: Putting Things Together</a></span><ul>
                                    <li><span class="file"><a href="ch10s11s01.html" tabindex="1">Auxiliary Service Data</a></span></li>
                                    <li><span class="file"><a href="ch10s11s02.html" tabindex="1">Topology</a></span></li>
                                    <li><span class="file"><a href="ch10s11s03.html" tabindex="1">Creating a Multi-Vendor Service</a></span><ul>
                                          <li><span class="file"><a href="ch10s11s03.html#d0e9646" tabindex="1">YANG Service Model Design</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch10s11s04.html" tabindex="1">Defining the Mapping</a></span><ul>
                                          <li><span class="file"><a href="ch10s11s04.html#d0e9831" tabindex="1">The Java Code</a></span></li>
                                          <li><span class="file"><a href="ch10s11s04.html#d0e9861" tabindex="1">Configuration Templates</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s12.html" tabindex="1">FASTMAP Description</a></span></li>
                              <li><span class="file"><a href="ncs.development.reactive_fastmap.html" tabindex="1">
                                           Reactive FASTMAP
                                         </a></span><ul>
                                    <li id="webhelp-currentid"><span class="file"><a href="ncs.development.reactive_fastmap.plan.html" tabindex="1">Progress reporting using plan-data</a></span><ul>
                                          <li><span class="file"><a href="ncs.development.reactive_fastmap.plan.html#d0e10284" tabindex="1">Example: use of plan-data in the virtual-mpls-vpn</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch10s13s02.html" tabindex="1">Performance Considerations</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s14.html" tabindex="1">Services that involve virtual devices, NFV</a></span><ul>
                                    <li><span class="file"><a href="ch10s14s01.html" tabindex="1">
                                                   Starting a virtual machine
                                                 </a></span></li>
                                    <li><span class="file"><a href="ch10s14s02.html" tabindex="1">
                                                   Stopping a virtual machine
                                                 </a></span></li>
                                    <li><span class="file"><a href="ch10s14s03.html" tabindex="1">
                                                   How to handle Licenses
                                                 </a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s15.html" tabindex="1">
                                           Advanced Mapping Techniques
                                         </a></span><ul>
                                    <li><span class="file"><a href="ch10s15s01.html" tabindex="1">
                                                   Create Methods
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.opaque.html" tabindex="1">
                                                   Persistent FASTMAP Properties
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.prepost.html" tabindex="1">
                                                   Pre and post hooks
                                                 </a></span></li>
                                    <li><span class="file"><a href="ncs.development.services.stacked_services.html" tabindex="1">Stacked Services and Shared Structures</a></span></li>
                                    <li><span class="file"><a href="ch10s15s05.html" tabindex="1">FASTMAP pre-lock create option</a></span></li>
                                    <li><span class="file"><a href="ch10s15s06.html" tabindex="1">
                                                   Service Caveats
                                                 </a></span><ul>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e10914" tabindex="1">
                                                           Finding Caveats
                                                         </a></span></li>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e10942" tabindex="1">delete</a></span></li>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e10993" tabindex="1">leaf-list</a></span></li>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e11008" tabindex="1">set</a></span></li>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e11019" tabindex="1">create</a></span></li>
                                          <li><span class="file"><a href="ch10s15s06.html#d0e11030" tabindex="1">move</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch10s16.html" tabindex="1">Service Discovery</a></span><ul>
                                    <li><span class="file"><a href="ch10s16s01.html" tabindex="1">Discovery basics</a></span></li>
                                    <li><span class="file"><a href="ch10s16s02.html" tabindex="1">Reconciliation caveats</a></span></li>
                                    <li><span class="file"><a href="ch10s16s03.html" tabindex="1">Reconciling in bulk</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.services.partialsync.html" tabindex="1">Partial sync-from</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.templates.html" tabindex="1">Templates</a></span><ul>
                              <li><span class="file"><a href="ncs.development.templates.intro.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.templates.dev.config.templates.html" tabindex="1">Config templates</a></span><ul>
                                    <li><span class="file"><a href="ncs.development.templates.dev.tmpl.html" tabindex="1">Create a Config-template from a Device-template</a></span></li>
                                    <li><span class="file"><a href="ch11s02s02.html" tabindex="1">Create a Config-template from a device configuration</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.basicPrinciples.html" tabindex="1">Basic principles</a></span><ul>
                                    <li><span class="file"><a href="ch11s03s01.html" tabindex="1">Values in a template</a></span></li>
                                    <li><span class="file"><a href="ncs.development.templates.contexts.html" tabindex="1">XPath Context in config-templates</a></span></li>
                                    <li><span class="file"><a href="ch11s03s03.html" tabindex="1">Conditional Statements</a></span></li>
                                    <li><span class="file"><a href="ch11s03s04.html" tabindex="1">Loop Statements</a></span></li>
                                    <li><span class="file"><a href="ch11s03s05.html" tabindex="1">Capabilities and Namespaces</a></span></li>
                                    <li><span class="file"><a href="ch11s03s06.html" tabindex="1">Template tag operations</a></span></li>
                                    <li><span class="file"><a href="ch11s03s07.html" tabindex="1">Operations on ordered-by user lists and leaf-lists</a></span></li>
                                    <li><span class="file"><a href="ch11s03s08.html" tabindex="1">Debugging templates</a></span><ul>
                                          <li><span class="file"><a href="ch11s03s08.html#d0e12199" tabindex="1">debug template output examples</a></span></li>
                                          <li><span class="file"><a href="ch11s03s08.html#d0e12288" tabindex="1">XPath help</a></span></li>
                                          <li><span class="file"><a href="ch11s03s08.html#d0e12315" tabindex="1">XPath trace log</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ncs.development.templates.service.templates.html" tabindex="1">Service Templates</a></span></li>
                              <li><span class="file"><a href="ncs.development.templates.api.templates.html" tabindex="1">Templates applied from an API</a></span><ul>
                                    <li><span class="file"><a href="ch11s05s01.html" tabindex="1">Feature Template</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.ncs.alarmmgr_dev.html" tabindex="1">Developing Alarm Applications</a></span><ul>
                              <li><span class="file"><a href="ch12s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch12s02.html" tabindex="1">Using the Alarms Sink</a></span></li>
                              <li><span class="file"><a href="ch12s03.html" tabindex="1">Using the Alarms Source</a></span></li>
                              <li><span class="file"><a href="ch12s04.html" tabindex="1">Extending the alarm manager,
                                                  adding user defined alarm types and fields</a></span></li>
                              <li><span class="file"><a href="ch12s05.html" tabindex="1">Mapping alarms to objects</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.development.snmp_notif_recv.html" tabindex="1">SNMP Notification Receiver</a></span><ul>
                              <li><span class="file"><a href="ncs.development.snmp_notf_recv.introduction.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch13s02.html" tabindex="1">Configuring NSO to Receive SNMP Notifications</a></span></li>
                              <li><span class="file"><a href="ch13s03.html" tabindex="1">Built-in Filters</a></span></li>
                              <li><span class="file"><a href="ch13s04.html" tabindex="1">Notification Handlers</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ch14.html" tabindex="1">The web server</a></span><ul>
                              <li><span class="file"><a href="ch14s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch14s02.html" tabindex="1">Web server capabilities</a></span></li>
                              <li><span class="file"><a href="ch14s03.html" tabindex="1">CGI support</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.kicker.html" tabindex="1">Kicker </a></span><ul>
                              <li><span class="file"><a href="ch15s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.kicker.actions.html" tabindex="1">Kicker action invocation</a></span></li>
                              <li><span class="file"><a href="ug.kicker.data-concepts.html" tabindex="1">Data Kicker Concepts</a></span><ul>
                                    <li><span class="file"><a href="ch15s03s01.html" tabindex="1">Generalized Monitors</a></span></li>
                                    <li><span class="file"><a href="ch15s03s02.html" tabindex="1">Kicker Constraints/Filters</a></span></li>
                                    <li><span class="file"><a href="ug.data.kicker.named_xpath.html" tabindex="1">Variable Bindings</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.simple_data_example.html" tabindex="1">A Simple Data Kicker Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.notif-concepts.html" tabindex="1">Notification Kicker Concepts</a></span><ul>
                                    <li><span class="file"><a href="ch15s04s01.html" tabindex="1">Notification selector expression</a></span></li>
                                    <li><span class="file"><a href="ug.notif.kicker.named_xpath.html" tabindex="1">Variable Bindings</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.simple_notif_example.html" tabindex="1">A Simple Notification Kicker Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.rfm.html" tabindex="1">Reactive FastMap with Kicker</a></span><ul>
                                    <li><span class="file"><a href="ug.kicker.rfm.use_cases.html" tabindex="1">Use Cases</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.rfm.example.html" tabindex="1">RFM Example</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.kicker.debugging.html" tabindex="1">Debugging kickers</a></span><ul>
                                    <li><span class="file"><a href="ug.kicker.debugging.pipe.html" tabindex="1">Kicker CLI Debug target</a></span></li>
                                    <li><span class="file"><a href="ug.kicker.debugging.unhide.html" tabindex="1">Unhide Kickers</a></span></li>
                                    <li><span class="file"><a href="ch15s06s03.html" tabindex="1">XPath log</a></span></li>
                                    <li><span class="file"><a href="ch15s06s04.html" tabindex="1">Devel Log</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ch16.html" tabindex="1">Experimental Feature - Nano services</a></span><ul>
                              <li><span class="file"><a href="ch16s01.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ch16s02.html" tabindex="1">Principles</a></span><ul>
                                    <li><span class="file"><a href="ch16s02s01.html" tabindex="1">Normal service</a></span></li>
                                    <li><span class="file"><a href="ch16s02s02.html" tabindex="1">Nano service</a></span></li>
                                    <li><span class="file"><a href="ch16s02s03.html" tabindex="1">Back-tracking</a></span><ul>
                                          <li><span class="file"><a href="ch16s02s03.html#d0e14085" tabindex="1">State pre-condition not satisfied</a></span></li>
                                          <li><span class="file"><a href="ch16s02s03.html#d0e14115" tabindex="1">Plan component is removed</a></span></li>
                                          <li><span class="file"><a href="ch16s02s03.html#d0e14142" tabindex="1">Service is deleted</a></span></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch16s03.html" tabindex="1">Zombie services</a></span></li>
                              <li><span class="file"><a href="ch16s04.html" tabindex="1">Behaviour tree</a></span></li>
                              <li><span class="file"><a href="ch16s05.html" tabindex="1">Nano services</a></span><ul>
                                    <li><span class="file"><a href="ch16s05s01.html" tabindex="1">Nano service opaque</a></span></li>
                                    <li><span class="file"><a href="ch16s05s02.html" tabindex="1">Nano service callbacks</a></span></li>
                                    <li><span class="file"><a href="ch16s05s03.html" tabindex="1">Generic service callbacks</a></span></li>
                                    <li><span class="file"><a href="ch16s05s04.html" tabindex="1">Nano service pre/post modifications</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch16s06.html" tabindex="1">Side effects</a></span></li>
                              <li><span class="file"><a href="ch16s07.html" tabindex="1">How it all comes together</a></span></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>