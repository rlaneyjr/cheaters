<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>confdncs_load -  - NSO 4.4.2.3 Manual Pages</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="index.html" title="NSO 4.4.2.3 Manual Pages" />
      <link rel="up" href="ncs.man.volume.1.html" title="NCS man-pages, Volume 1" />
      <link rel="prev" href="man.1.confd_cmd.html" title="confdncs_cmd" />
      <link rel="next" href="man.1.confdc.html" title="confdc ncsc" />
      <meta xmlns="" name="Section-title" content="confdncs_load" /><script xmlns="" type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-73142";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><link xmlns="" rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/css/positioning.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><style xmlns="" type="text/css">
      
      #noscript{
      font-weight:bold;
      background-color: #55AA55;
      font-weight: bold;
      height: 25spx;
      z-index: 3000;
      top:0px;
      width:100%;
      position: relative;
      border-bottom: solid 5px black;
      text-align:center;
      color: white;
      }
      
      input {
      margin-bottom: 5px;
      margin-top: 2px;
      }
      .folder {
      display: block;
      height: 22px;
      padding-left: 20px;
      background: transparent url(common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
      }
      span.contentsTab {
      padding-left: 20px;
      background: url(common/images/toc-icon.png) no-repeat 0 center;
      }
      span.searchTab {
      padding-left: 20px;
      background: url(common/images/search-icon.png) no-repeat 0 center;
      }
      
      /* Overide jquery treeview's defaults for ul. */
      .treeview ul {
      background-color: transparent;
      margin-top: 4px;
      }		
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #D8D8D8;
      }
      .treeview .hover { color: black; }
      .filetree li span a { text-decoration: none; font-size: 12px; color: #517291; }
      
      /* Override jquery-ui's default css customizations. These are supposed to take precedence over those.*/
      .ui-widget-content {
      border: 0px; 
      background: none; 
      color: none;     
      }
      .ui-widget-header {
      color: #e9e8e9;
      border-left: 1px solid #e5e5e5;
      border-right: 1px solid #e5e5e5;
      border-bottom: 1px solid #bbc4c5;
      border-top: 4px solid #e5e5e5;
      border: medium none;
      background: #F4F4F4; /* old browsers */
      background: -moz-linear-gradient(top, #F4F4F4 0%, #E6E4E5 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E6E4E5)); /* webkit */    
      font-weight: none;
      }
      .ui-widget-header a { color: none; }
      .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { 
      border: none; background: none; font-weight: none; color: none; }
      .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: black; text-decoration: none; }
      .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: none; background: none; font-weight: none; color: none; }
      
      .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: none; background: none; font-weight: none; color: none; }
      .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { 
      color: black; text-decoration: none; 	
      background: #C6C6C6; /* old browsers */
      background: -moz-linear-gradient(top, #C6C6C6 0%, #D8D8D8 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C6C6C6), color-stop(100%,#D8D8D8)); /* webkit */
      -webkit-border-radius:15px; -moz-border-radius:10px;
      border: 1px solid #f1f1f1;
      }    
      .ui-corner-all { border-radius: 0 0 0 0; }
      
      .ui-tabs { padding: .2em;}
      .ui-tabs .ui-tabs-nav li { top: 0px; margin: -2px 0 1px; text-transform: uppercase; font-size: 10.5px;}
      .ui-tabs .ui-tabs-nav li a { padding: .25em 2em .25em 1em; margin: .5em; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
      /**
      *	Basic Layout Theme
      * 
      *	This theme uses the default layout class-names for all classes
      *	Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
      */
      
      .ui-layout-pane { /* all 'panes' */ 
      background: #FFF; 
      border: 1px solid #BBB; 
      padding: 05x; 
      overflow: auto;
      } 
      
      .ui-layout-resizer { /* all 'resizer-bars' */ 
      background: #DDD; 
      top:100px
      } 
      
      .ui-layout-toggler { /* all 'toggler-buttons' */ 
      background: #AAA; 
      } 
      
    </style>
      <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><script xmlns="" type="text/javascript" src="common/browserDetect.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery-1.7.2.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.ui.all.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.cookie.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/layout/jquery.layout.js">
         <!----></script><style type="text/css">
      
      #header {
      /* background: url("../images/header-bg.png") scroll top left repeat-x #4d8c83; */
      background: transparent;
      }
      #leftnavigation {
      /* background-color: #ededed!important; */
      background-color: transparent;
      }
      #navheader {
      visibility: hidden;
      }
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #FFFFFF; /*but must be changed in main.js as well*/
      }
      .filetree span.file {
      /* background: url(images/file.gif) 0 0 no-repeat; */
      background: initial;
      }
      .filetree span.folder, .filetree span.file {
      padding: 1px 0 1px 7px;
      display: block;
      }

      /* borrowed from cisco: clientlib.css */
      .footer {
      margin: 28px 30px 0 15px;
      font-size: 80%;
      line-height: 120%;
      border-top: 1px solid #ccc;
      padding-top: 7px;
      color: #999;
      }
      .footer #footer-legal{display:inline;padding-bottom:18px}
      #framework-footer{margin:0;padding:0 0 15px 0;min-width:900px;width:100%}
      .footer a,.footer a:visited{color:#999}

      /* from ccimr.css */
      a:active  { color: #3366CC}
      a:hover   { color: #3366CC}
      a:link    { color: #3366CC}
      a:visited { color: #3366CC}

      #header img {
      float: left;
      margin-left: 20px;
      margin-top: 0px;
      }

      #header h1 {
      color: #336666;
      margin-top: 4px;
      }
      #content h1, #content h2 {
      color: #336666;
      }
      .title {
      color: #336666;
      }
      p, pre {
      margin-left: 0.1in;
      }
      p, ul, ol, li {
        font-size: 95%;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 1px;
      }
      body {
        font: 80.5% Arial, Helvetica, sans-serif;
      }
      ol {
      display: block;
      list-style-type: decimal;
      -webkit-margin-before: 1em;
      -webkit-margin-after: 1em;
      -webkit-margin-start: 0px;
      -webkit-margin-end: 0px;
      -webkit-padding-start: 40px;
      border: 1;
      }
    </style></head>
   <body>
      <noscript>
         <div id="noscript">JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.</div>
      </noscript>
      <div id="header"><a href="index.html"><img style="margin-right: 2px; width: 110; height: 73; padding-right: 25px; padding-top: 8px" align="right" src="common/images/logo.gif" alt="Cisco Systems, Inc." /></a><h1>NSO 4.4.2.3 Manual Pages
                <br />NCS man-pages, Volume 1
         </h1>
         <div id="navheader">
            <!---->
            <table class="navLinks">
               <tr>
                  <td><a id="showHideButton" href="#" onclick="myLayout.toggle('west')" class="pointLeft" tabindex="5" title="Hide TOC tree">Sidebar
                                                    </a></td>
                  <td><a accesskey="p" class="navLinkPrevious" tabindex="5" href="man.1.confd_cmd.html">Prev</a>
                                                             |
                                                             <a accesskey="u" class="navLinkUp" tabindex="5" href="ncs.man.volume.1.html">Up</a>
                                                         |
                                                         <a accesskey="n" class="navLinkNext" tabindex="5" href="man.1.confdc.html">Next</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div id="content">
         <div class="refentry"><a id="man.1.confd_load"></a><div xmlns="" class="titlepage"></div>
            <div class="refnamediv"><a id="man.1.confd_load.name"></a><h2>Name</h2>
               <p><span class="phrase">confd</span><span class="phrase">ncs</span>_load — Command line utility to load and save NSO configurations
               </p>
            </div>
            <div class="refsynopsisdiv"><a id="man.1.confd_load.synopsis"></a><h2>Synopsis</h2>
               <div class="cmdsynopsis">
                  <p><code class="command"><span class="phrase">confd</span><span class="phrase">ncs</span>_load</code>  [-W] [-S] [<em><a href="#man.1.confd_load.syn.common">(1)</a> common options</em>] [<em class="replaceable"><code>filename</code></em>]
                  </p>
               </div>
               <div class="cmdsynopsis">
                  <p><code class="command"><span class="phrase">confd</span><span class="phrase">ncs</span>_load</code>   -l  [ -m  |   -r  |   -j  |   -n ] [-D] [<em><a href="#man.1.confd_load.syn.common">(1)</a> common options</em>] [<em class="replaceable"><code>filename</code></em>...]
                  </p>
               </div>
               <div class="cmdsynopsis">
                  <p><code class="command"><span class="phrase">confd</span><span class="phrase">ncs</span>_load</code>   
                              -C 
                              [-R]
                              [<em class="replaceable"><code>filename</code></em>...]
                            
                  </p>
               </div>
               <div class="cmdsynopsis">
                  <p><code class="command"><span class="phrase">confd</span><span class="phrase">ncs</span>_load</code>    -h  |   -?  <br /><span><a id="man.1.confd_load.syn.common">(1)</a> [-d] [-t] [-F { x  |   p  |   o  |   j  |   c  |   i }
                                ] [ -H  |   -U ] [-a] [-e] [ 
                                    [-u <em class="replaceable"><code>user</code></em>]
                                     [-g <em class="replaceable"><code>group</code></em>...]
                                     [-c <em class="replaceable"><code>context</code></em>]
                                    |  [-i]] [[-p <em class="replaceable"><code>keypath</code></em>] |  [-P <em class="replaceable"><code>XPath</code></em>]] [-o] [-s] [-O] [-M]</span></p>
               </div>
            </div>
            <div class="refsect1"><a id="d0e5011"></a><h2>DESCRIPTION</h2>
               <p>The confd_load command is a command line
                      interface to the functions
                      <code class="function">maapi_save_config()</code>,
                      <code class="function">maapi_load_config()</code>,
                      <code class="function">maapi_load_config_stream()</code>, and
                      <code class="function">cdb_load_file()</code> respectively.
                      
               </p>
               <p>
                      This command provides a
                      convenient way of loading and saving all or parts of the
                      configuration in different formats. It can be used to initialize
                      or restore configurations as well as in CLI commands.
               </p>
               <p>If you run <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> without any options
                      it will print the current configuration in XML format on
                      stdout. The exit status will be zero on success and non-zero
                      otherwise.
               </p>
               <p>Source code to this utility is included in the distribution
                      as <code class="filename">src/confd/tools/confd_load.c</code>.
               </p>
            </div>
            <div class="refsect1"><a id="d0e5044"></a><h2>COMMON OPTIONS</h2>
               <div class="variablelist">
                  <dl class="variablelist">
                     <dt><span class="term"><code class="option">-d</code></span></dt>
                     <dd>
                        <p>Debug flag. Add more to increase debug level. All
                                     debug output will be to stderr.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-t</code></span></dt>
                     <dd>
                        <p>Measure how long the requested command takes and print
                                     the result on stderr.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-F</code> x | p | o | j | c | i</span></dt>
                     <dd>
                        <p>Selects the format of the configuration, must be set
                                     both when loading and saving. One of XML (x), pretty XML (p),
                                     JSON (o),
                                     curly braces J-style CLI (j), C-style CLI (c), or I-style
                                     CLI (i).  Default is XML.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-H</code></span></dt>
                     <dd>
                        <p>Hide all hidden nodes. By default, no nodes are hidden
                                     unless <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> has attached to an
                                     existing transaction, in which case the hidden nodes are the
                                     same as in that transaction's session.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-U</code></span></dt>
                     <dd>
                        <p>Unhide all hidden nodes. By default, no nodes are hidden
                                     unless <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> has attached to an
                                     existing transaction, in which case the hidden nodes are the
                                     same as in that transaction's session.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-u</code> <em class="replaceable"><code>user</code></em>, </span><span class="term"><code class="option">-g</code> <em class="replaceable"><code>group</code></em> ..., </span><span class="term"><code class="option">-c</code> <em class="replaceable"><code>context</code></em></span></dt>
                     <dd>
                        <p>Loading and saving the configuration is done in a user
                                     session, using these options it is possible to specify which
                                     user, groups (more than one <code class="option">-g</code> can be used
                                     to add groups), and context that should be used when
                                     starting the user session. If only a user is supplied the
                                     user is assumed to belong to a single group with the same
                                     name as the user. This is significant in that AAA rules will
                                     be applied for the specified user / groups / context
                                     combination. The default is to use the
                                     <code class="constant">system</code> context, which implies that AAA
                                     rules will <span class="emphasis"><em>not</em></span> be applied at
                                     all.
                        </p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">Note</h3>
                           <p>If the environment variables <code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_MAAPI_USID</code> and
                                        <code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_MAAPI_THANDLE</code> are set
                                        (see the ENVIRONMENT section), or if the <code class="option">-i</code>
                                        option is used, these options are silently ignored, since
                                        <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> will attach to an
                                        existing transaction.
                           </p>
                        </div>
                     </dd>
                     <dt><span class="term"><code class="option">-i</code></span></dt>
                     <dd>
                        <p>Instead of starting a new user session and transaction,
                                     <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> will try to attach to the init
                                     session. This is only valid when NSO is in start phase 0,
                                     and will fail otherwise. It can be used to load a
                                     <span class="quote">“<span class="quote">factory default</span>”</span>file during startup, or
                                     loading a file during upgrade.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-s</code></span></dt>
                     <dd>
                        <p>Start transaction towards the startup datastore
                                     (instead of the default running). I.e. when loading, the configuration
                                     loaded will be committed to startup, and as such won't take
                                     effect until ConfD is restarted.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="refsect1"><a id="d0e5181"></a><h2>SAVE CONFIGURATION</h2>
               <p>By default the complete current configuration will be output
                      on stdout. To save it in a file add the filename on the command
                      line (the <code class="option">-f</code> option is deprecated). The file is
                      opened by the <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> utility, permissions
                      and ownership will be determined by the user running
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span>. Output format is specified using
                      the <code class="option">-F</code> option.
               </p>
               <p>When saving the configuration in XML format, the context of
                      the user session (see the <code class="option">-c</code> option) will determine
                      which namespaces with export restriction
                      (from <code class="code">tailf:export</code>) that are
                      included. If the
                      <code class="constant">system</code> context is used (this is the default),
                      all namespaces are saved, regardless of export restriction. When
                      saving the configuration in one of the CLI formats, the context used
                      for this selection is always <code class="constant">cli</code>.
               </p>
               <p>A number of options are only applicable, or have a special
                      meaning when saving the configuration:
               </p>
               <div class="variablelist">
                  <dl class="variablelist">
                     <dt><span class="term"><code class="option">-f</code> <em class="replaceable"><code>filename</code></em></span></dt>
                     <dd>
                        <p>Filename to save configuration to (option is
                                     deprecated, just give the filename on the command
                                     line).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-W</code></span></dt>
                     <dd>
                        <p>Include leaves which are unset (set to their default
                                     value) in the output. By default these leaves are not
                                     included in the output. <span class="phrase">
                                        (Corresponds to the
                                        <code class="constant">MAAPI_CONFIG_WITH_DEFAULTS</code>
                                        flag).</span></p>
                     </dd>
                     <dt><span class="term"><code class="option">-S</code></span></dt>
                     <dd>
                        <p>Include the default value of a leaf as a comment (only
                                     works for CLI formats, not XML). (Corresponds to the
                                     <code class="constant">MAAPI_CONFIG_SHOW_DEFAULTS</code>
                                     flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-p</code> <em class="replaceable"><code>keypath</code></em></span></dt>
                     <dd>
                        <p>Only include the configuration below
                                     <em class="replaceable"><code>keypath</code></em> in the output.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-P</code> <em class="replaceable"><code>XPath</code></em></span></dt>
                     <dd>
                        <p>Filter the configuration using the
                                     <em class="replaceable"><code>XPath</code></em> expression. (Only works for
                                     the XML format.)
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-o</code></span></dt>
                     <dd>
                        <p>Include operational data in the output. (Corresponds
                                     to the <code class="constant">MAAPI_CONFIG_WITH_OPER</code>
                                     flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-O</code></span></dt>
                     <dd>
                        <p>Include <span class="emphasis"><em>only</em></span> operational data, and
                                     ancestors to operational data nodes, in the
                                     output. (Corresponds to the
                                     <code class="constant">MAAPI_CONFIG_OPER_ONLY</code> flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-M</code></span></dt>
                     <dd>
                        <p>Include NCS service-meta-data attributes in the output.
                                     (Corresponds to the
                                     <code class="constant">MAAPI_CONFIG_WITH_SERVICE_META</code> flag).
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="refsect1"><a id="d0e5314"></a><h2>LOAD CONFIGURATION</h2>
               <p>When the <code class="option">-l</code> option is present
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> will load all the files listed on
                      the command line <span class="phrase">using the
                         <code class="function">maapi_load_config()</code> function</span>.
                      The file(s) are expected
                      to be in XML format unless otherwise specified using the
                      <code class="option">-F</code> flag. Note that it is the NSO daemon that
                      opens the file(s), it must have permission to do so. However
                      relative pathnames are assumed to be relative to the working
                      directory of the
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> command <span class="phrase">(it will pass an
                         absolute pathname to
                         <code class="function">maapi_load_config()</code>)</span>.
               </p>
               <p>If neither of the <code class="option">-m</code> and <code class="option">-r</code>
                      options are given when multiple files are listed on the command
                      line,
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span>
                      will silently treat the second and subsequent files as if
                      <code class="option">-m</code> had been given, i.e. it will merge in the
                      contents of these files instead of deleting and replacing the
                      configuration for each file. Note, we almost always want the merge
                      behavior. If no file is given, or "-" is given as a filename,
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span>
                      will stream standard input to NSO
                      <span class="phrase">by using <code class="function">maapi_load_config_stream()</code></span>.
               </p>
               <div class="variablelist">
                  <dl class="variablelist">
                     <dt><span class="term"><code class="option">-f</code> <em class="replaceable"><code>filename</code></em></span></dt>
                     <dd>
                        <p>The file to load (deprecated, just list the file after
                                     the options instead).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-m</code></span></dt>
                     <dd>
                        <p>Merge in the contents of
                                     <em class="replaceable"><code>filename</code></em>, the (somewhat unfortunate)
                                     default is to
                                     delete and replace. <span class="phrase">(Corresponds to the
                                        <code class="constant">MAAPI_CONFIG_MERGE</code> flag).</span></p>
                     </dd>
                     <dt><span class="term"><code class="option">-j</code></span></dt>
                     <dd>
                        <p>
                                       Do not run FASTMAP, if FASTMAPPED service data is loaded, we
                                       sometimes do not want to run the mapper code.
                                       One example is a backup saved in XML format that contains
                                       both device data and also service data.
                                     
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-n</code></span></dt>
                     <dd>
                        <p>
                                       Only load data to CDB inside NCS, do not attempt to perform
                                       any update operations towards the managed devices. This corresponds
                                       to the 'no-networking' flag to the commit command in the NCS CLI.
                                     
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-x</code></span></dt>
                     <dd>
                        <p>
                                       Lax loading. Only applies to XML loading. Ignore unknown
                                       namespaces, attributes and elements.
                                     
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-r</code></span></dt>
                     <dd>
                        <p>Replace the part of the configuration that is present in
                                     <em class="replaceable"><code>filename</code></em>, the default is to
                                     delete and replace. (Corresponds to the
                                     <code class="constant">MAAPI_CONFIG_REPLACE</code> flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-a</code></span></dt>
                     <dd>
                        <p>When loading configuration in 'i' or 'c' format, do a
                                     commit operation after each line. Default and recommended is
                                     to only commit when all the configuration has been loaded.
                                     (Corresponds to the
                                     <code class="constant">MAAPI_CONFIG_AUTOCOMMIT</code> flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-e</code></span></dt>
                     <dd>
                        <p>When loading configuration do not abort when
                                     encountering errors (corresponds to the
                                     <code class="constant">MAAPI_CONFIG_CONTINUE_ON_ERROR</code>
                                     flag).
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-D</code></span></dt>
                     <dd>
                        <p>Call
                                     <code class="function">maapi_delete_all</code>
                                     (<em class="parameter"><code>MAAPI_DEL_ALL</code></em>)
                                     before loading the file.
                        </p>
                        <p>
                                       Delete entire config before loading.
                                     
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-p</code> <em class="replaceable"><code>keypath</code></em></span></dt>
                     <dd>
                        <p>Call
                                     <code class="function">maapi_delete(<em class="replaceable"><code>keypath</code></em>)</code>
                                     before loading the file.
                        </p>
                        <p>
                                       Delete everything below <em class="replaceable"><code>keypath</code></em> before
                                       loading the file.
                                     
                        </p>
                     </dd>
                     <dt><span class="term"><code class="option">-o</code></span></dt>
                     <dd>
                        <p>Accept but ignore contents in the file which is
                                     operational data (without this flag it will be an
                                     error). <span class="phrase">(Corresponds to the
                                        <code class="constant">MAAPI_CONFIG_WITH_OPER</code> flag)</span></p>
                     </dd>
                     <dt><span class="term"><code class="option">-O</code></span></dt>
                     <dd>
                        <p>Start an operational transaction and load operational
                                     data (via a transaction instead of via CDB). (Only allowed for
                                     XML format.)
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="refsect1"><a id="d0e5516"></a><h2>LOAD CDB OPERATIONAL</h2>
               <p>
                        The <code class="option">-C</code> option is a direct interface to the
                        <code class="function">cdb_load_file()</code> function.
                      
               </p>
               <p>The <code class="option">-C</code> option is used to load operational
                      data. When you use <code class="option">-C</code> all other options except
                      <code class="option">-R</code> (and <code class="option">-d</code>) are ignored, since
                      they don't apply. Files on the command line must be in XML format
                      <span class="phrase">and will be fed to
                         <code class="function">cdb_load_file()</code> in the order they are
                         listed</span>. If no file is given, or "-" is given as a filename,
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> will read standard input
                      <span class="phrase">and use
                         <code class="function">cdb_load_str()</code> to load the collected
                         data</span>. If the <code class="option">-R</code> option is included, CDB
                      operational subscription notifications will be generated.
               </p>
               <p>Any data which isn't part of CDB operational per
                      the data model will be ignored. This means that you can save a
                      single file with both configuration and operational data and feed
                      it back to <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span>.
               </p>
               <p>If you use a relative path for
                      <em class="replaceable"><code>filename</code></em> it is assumed to be relative to
                      the working directory of the
                      <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> command
                      <span class="phrase">(it will pass an
                         absolute pathname to <code class="function">cdb_load_file()</code>).</span></p>
            </div>
            <div class="refsect1"><a id="d0e5589"></a><h2>EXAMPLES</h2>
               <div class="example"><a id="d0e5592"></a><p class="title"><strong>Example 1. Reloading all xml files in the cdb directory</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -D -m -l cdb/*.xml</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5601"></a><p class="title"><strong>Example 2. Merging in the contents of <code class="filename">conf.cli</code></strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -l -m -F j conf.cli</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5612"></a><p class="title"><strong>Example 3. Print interface config and statistics data in cli format</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F i -o -p /sys:sys/ifc</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5621"></a><p class="title"><strong>Example 4. Using xslt to format output</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F x -p /sys:sys/ifc | xsltproc fmtifc.xsl -</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5630"></a><p class="title"><strong>Example 5. Using xmllint to pretty print the xml output</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F x | xmllint --format -</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5639"></a><p class="title"><strong>Example 6. Saving config and operational data to <code class="filename">/tmp/conf.xml</code></strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F x -o &gt; /tmp/conf.xml</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5650"></a><p class="title"><strong>Example 7. Restoring both config and operational data</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -l -F x -o /tmp/conf.xml
<span class="phrase">confd</span><span class="phrase">ncs</span>_load -C /tmp/conf.xml</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5664"></a><p class="title"><strong>Example 8. Measure how long it takes to fetch config</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -t &gt; /dev/null
elapsed time: 0.011 s</pre></div>
               </div><br class="example-break" /><div class="example"><a id="d0e5673"></a><p class="title"><strong>Example 9. Output all instances in list <code class="sgmltag-element">/foo/table</code> which has <code class="sgmltag-element">ix</code> larger than 10</strong></p>
                  <div class="example-contents"><pre class="screen"><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F x -P "/foo/table[ix &gt; 10]"</pre></div>
               </div><br class="example-break" /></div>
            <div class="refsect1"><a id="d0e5688"></a><h2>ENVIRONMENT</h2>
               <div class="variablelist">
                  <dl class="variablelist">
                     <dt><span class="term"><code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_IPC_ADDR</code>, </span><span class="term"><code class="envar">CONFD_IPC_EXTADDR</code></span></dt>
                     <dd>
                        <p>The address used to connect to the NSO daemon,
                                     overrides the compiled in default.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_IPC_PORT</code></span></dt>
                     <dd>
                        <p>The port number to connect to the NSO daemon on,
                                     overrides the compiled in default.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="envar">CONFD_IPC_EXTSOPATH</code></span></dt>
                     <dd>
                        <p>The absolute path to the shared object to use for a
                                     connection using external IPC when
                                     <code class="envar">CONFD_IPC_EXTADDR</code> is given.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_MAAPI_USID</code>, </span><span class="term"><code class="envar"><span class="phrase">CONFD</span><span class="phrase">NCS</span>_MAAPI_THANDLE</code></span></dt>
                     <dd>
                        <p>If set <span class="command"><strong>confd_load</strong></span> will use
                                     <code class="function">maapi_attach2()</code> to attach to an
                                     existing transaction in an existing user session instead of
                                     starting a new session.
                        </p>
                        <p>If set <span class="command"><strong>ncs_load</strong></span> will
                                     attach to an
                                     existing transaction in an existing user session instead of
                                     starting a new session.
                        </p>
                        <p>These environment variables are set by the NSO CLI
                                     when it invokes external commands, which means you can run
                                     <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span> directly from the CLI. For
                                     example, the following addition to the
                                     <code class="sgmltag-element">&lt;operationalMode&gt;</code> in a clispec file (see
                                     <a class="link" href="man.5.clispec.html" title="clispec">clispec(5)</a>)
                        </p>
                        <div class="informalexample"><pre class="programlisting">&lt;cmd name="servers" mount="show"&gt;
  &lt;info/&gt;
  &lt;help/&gt;
  &lt;callback&gt;
    &lt;exec&gt;
      &lt;osCommand&gt;confd_load&lt;/osCommand&gt;
          &lt;args&gt;-F j -p /system/servers&lt;/args&gt;
    &lt;/exec&gt;
  &lt;/callback&gt;
&lt;/cmd&gt;</pre></div>
                        <div class="informalexample"><pre class="programlisting">&lt;cmd name="servers" mount="show"&gt;
  &lt;info/&gt;
  &lt;help/&gt;
  &lt;callback&gt;
    &lt;exec&gt;
      &lt;osCommand&gt;ncs_load&lt;/osCommand&gt;
          &lt;args&gt;-F j -p /system/servers&lt;/args&gt;
    &lt;/exec&gt;
  &lt;/callback&gt;
&lt;/cmd&gt;</pre></div>
                        <p>will add a <span class="command"><strong>show servers</strong></span> command
                                     which, when run will invoke <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load -F j -p
                                           /system/servers</strong></span>. This will output the
                                     configuration below <code class="sgmltag-element">/system/servers</code> in curly
                                     braces format.
                        </p>
                        <p>Note that when these environment variables are set, it
                                     means that the configuration will be loaded into the current
                                     CLI transaction (which must be in configure mode, and have
                                     AAA permissions to actually modify the config). To load (or
                                     save) a file in a separate transaction, unset these two
                                     environment variables before invoking the
                                     <span class="command"><strong><span class="phrase">confd</span><span class="phrase">ncs</span>_load</strong></span>
                                     command.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="refsect1"><a id="d0e5801"></a><h2>SEE ALSO</h2>
               <p><span class="citerefentry"><span class="refentrytitle">confd_lib_maapi</span>(3)</span>
                      - Confd MAAPI library
               </p>
               <p><span class="citerefentry"><span class="refentrytitle">confd_lib_cdb</span>(3)</span>
                      - Confd CDB library
               </p>
            </div>
         </div><script type="text/javascript" src="common/main.js">
            <!----></script><script type="text/javascript" src="common/splitterInit.js">
            <!----></script><div class="footer" id="footer-legal">
            <div class="footer-legal framework-footer-cq">
               <div id="framework-footer">
                  <div id="footer-legal"><a href="http://www.cisco.com/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html">Privacy Statement</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/trademark.html">Trademarks</a></div>
               </div>
            </div>
         </div>
      </div>
      <div id="sidebar">
         <div id="leftnavigation" style="padding-top:3px;">
            <div id="tabs">
               <ul style="visibility: hidden;"></ul>
               <div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;" /><div id="ulTreeDiv" style="display:none">
                     <ul id="tree" class="filetree">
                        <li><span class="file"><a href="ncs.man.volume.1.html" tabindex="1">NCS man-pages, Volume 1</a></span><ul>
                              <li><span class="file"><a href="man.1.ncs-backup.html" tabindex="1">ncs-backup</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-collect-tech-report.html" tabindex="1">ncs-collect-tech-report</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-installer.html" tabindex="1">ncs-installer</a></span></li>
                              <li><span class="file"><a href="man.1.maapi.html" tabindex="1">ncs-maapi</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-make-package.html" tabindex="1">ncs-make-package</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-netsim.html" tabindex="1">ncs-netsim</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project-create.html" tabindex="1">ncs-project-create</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project-make-bundle.html" tabindex="1">ncs-project-export</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project-git.html" tabindex="1">ncs-project-git</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project-setup.html" tabindex="1">ncs-project-setup</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project-update.html" tabindex="1">ncs-project-update</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-project.html" tabindex="1">ncs-project</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-setup.html" tabindex="1">ncs-setup</a></span></li>
                              <li><span class="file"><a href="man.1.ncs-uninstall.html" tabindex="1">ncs-uninstall</a></span></li>
                              <li><span class="file"><a href="man.1.ncs.html" tabindex="1">ncs</a></span></li>
                              <li><span class="file"><a href="man.1.confd_cli.html" tabindex="1">confdncs_cli</a></span></li>
                              <li><span class="file"><a href="man.1.confd_cmd.html" tabindex="1">
                                             confdncs_cmd</a></span></li>
                              <li id="webhelp-currentid"><span class="file"><a href="man.1.confd_load.html" tabindex="1">confdncs_load</a></span></li>
                              <li><span class="file"><a href="man.1.confdc.html" tabindex="1">confdc
                                           ncsc</a></span></li>
                              <li><span class="file"><a href="man.1.nct-backup.html" tabindex="1">nct-backup</a></span></li>
                              <li><span class="file"><a href="man.1.nct-check.html" tabindex="1">nct-check</a></span></li>
                              <li><span class="file"><a href="man.1.nct-cli-cmd.html" tabindex="1">nct-cli-cmd</a></span></li>
                              <li><span class="file"><a href="man.1.nct-copy.html" tabindex="1">nct-copy</a></span></li>
                              <li><span class="file"><a href="man.1.nct-get-logs.html" tabindex="1">nct-get-logs</a></span></li>
                              <li><span class="file"><a href="man.1.nct-ha.html" tabindex="1">nct-ha</a></span></li>
                              <li><span class="file"><a href="man.1.nct-hostsfile.html" tabindex="1">nct-hostsfile</a></span></li>
                              <li><span class="file"><a href="man.1.nct-install.html" tabindex="1">nct-install</a></span></li>
                              <li><span class="file"><a href="man.1.nct-load-config.html" tabindex="1">nct-load-config</a></span></li>
                              <li><span class="file"><a href="man.1.nct-move-device.html" tabindex="1">nct-move-device</a></span></li>
                              <li><span class="file"><a href="man.1.nct-packages.html" tabindex="1">nct-packages</a></span></li>
                              <li><span class="file"><a href="man.1.nct-patch.html" tabindex="1">nct-patch</a></span></li>
                              <li><span class="file"><a href="man.1.nct-ssh-cmd.html" tabindex="1">nct-ssh-cmd</a></span></li>
                              <li><span class="file"><a href="man.1.nct-start.html" tabindex="1">nct-start</a></span></li>
                              <li><span class="file"><a href="man.1.nct-stop.html" tabindex="1">nct-stop</a></span></li>
                              <li><span class="file"><a href="man.1.nct-upgrade.html" tabindex="1">nct-upgrade</a></span></li>
                              <li><span class="file"><a href="man.1.nct.html" tabindex="1">nct</a></span></li>
                              <li><span class="file"><a href="man.1.pyang.html" tabindex="1">pyang</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.man.volume.3.html" tabindex="1">NCS man-pages, Volume 3</a></span><ul>
                              <li><span class="file"><a href="man.3.confd_lib.html" tabindex="1">confd_lib</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_cdb.html" tabindex="1">confd_lib_cdb</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_dp.html" tabindex="1">confd_lib_dp</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_events.html" tabindex="1">confd_lib_events</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_ha.html" tabindex="1">confd_lib_ha</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_lib.html" tabindex="1">confd_lib_lib</a></span></li>
                              <li><span class="file"><a href="man.3.confd_lib_maapi.html" tabindex="1">confd_lib_maapi</a></span></li>
                              <li><span class="file"><a href="man.3.confd_types.html" tabindex="1">confd_types</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ncs.man.volume.5.html" tabindex="1">NCS man-pages, Volume 5</a></span><ul>
                              <li><span class="file"><a href="man.5.clispec.html" tabindex="1">clispec</a></span></li>
                              <li><span class="file"><a href="man.5.mib_annotations.html" tabindex="1">mib_annotations</a></span></li>
                              <li><span class="file"><a href="man.5.ncs.conf.html" tabindex="1">ncs.conf</a></span></li>
                              <li><span class="file"><a href="man.5.tailf_yang_cli_extensions.html" tabindex="1">tailf_yang_cli_extensions</a></span></li>
                              <li><span class="file"><a href="man.5.tailf_yang_extensions.html" tabindex="1">tailf_yang_extensions</a></span></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>