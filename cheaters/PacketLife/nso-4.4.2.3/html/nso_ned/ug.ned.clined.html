<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>The CLI NED -  - NSO 4.4.2.3 NED Development</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="index.html" title="NSO 4.4.2.3 NED Development" />
      <link rel="up" href="ug.ned.html" title="Network Element Drivers (NEDs)" />
      <link rel="prev" href="ug.ned.devs.html" title="Dumb versus capable devices" />
      <link rel="next" href="ug.ned.generic.html" title="Generic NED" />
      <meta xmlns="" name="Section-title" content="The CLI NED" /><script xmlns="" type="text/javascript">
      //The id for tree cookie
      var treeCookieId = "treeview-3312";
      var language = "en";
      var w = new Object();
      //Localization
      txt_filesfound = 'Results';
      txt_enter_at_least_1_char = "You must enter at least one character.";
      txt_browser_not_supported = "JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.";
      txt_please_wait = "Please wait. Search in progress...";
      txt_results_for = "Results for: ";
    </script><link xmlns="" rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/css/positioning.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css" />
      <link xmlns="" rel="stylesheet" type="text/css" href="common/jquery/treeview/jquery.treeview.css" /><style xmlns="" type="text/css">
      
      #noscript{
      font-weight:bold;
      background-color: #55AA55;
      font-weight: bold;
      height: 25spx;
      z-index: 3000;
      top:0px;
      width:100%;
      position: relative;
      border-bottom: solid 5px black;
      text-align:center;
      color: white;
      }
      
      input {
      margin-bottom: 5px;
      margin-top: 2px;
      }
      .folder {
      display: block;
      height: 22px;
      padding-left: 20px;
      background: transparent url(common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
      }
      span.contentsTab {
      padding-left: 20px;
      background: url(common/images/toc-icon.png) no-repeat 0 center;
      }
      span.searchTab {
      padding-left: 20px;
      background: url(common/images/search-icon.png) no-repeat 0 center;
      }
      
      /* Overide jquery treeview's defaults for ul. */
      .treeview ul {
      background-color: transparent;
      margin-top: 4px;
      }		
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #D8D8D8;
      }
      .treeview .hover { color: black; }
      .filetree li span a { text-decoration: none; font-size: 12px; color: #517291; }
      
      /* Override jquery-ui's default css customizations. These are supposed to take precedence over those.*/
      .ui-widget-content {
      border: 0px; 
      background: none; 
      color: none;     
      }
      .ui-widget-header {
      color: #e9e8e9;
      border-left: 1px solid #e5e5e5;
      border-right: 1px solid #e5e5e5;
      border-bottom: 1px solid #bbc4c5;
      border-top: 4px solid #e5e5e5;
      border: medium none;
      background: #F4F4F4; /* old browsers */
      background: -moz-linear-gradient(top, #F4F4F4 0%, #E6E4E5 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#F4F4F4), color-stop(100%,#E6E4E5)); /* webkit */    
      font-weight: none;
      }
      .ui-widget-header a { color: none; }
      .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default { 
      border: none; background: none; font-weight: none; color: none; }
      .ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited { color: black; text-decoration: none; }
      .ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus { border: none; background: none; font-weight: none; color: none; }
      
      .ui-state-active, .ui-widget-content .ui-state-active, .ui-widget-header .ui-state-active { border: none; background: none; font-weight: none; color: none; }
      .ui-state-active a, .ui-state-active a:link, .ui-state-active a:visited { 
      color: black; text-decoration: none; 	
      background: #C6C6C6; /* old browsers */
      background: -moz-linear-gradient(top, #C6C6C6 0%, #D8D8D8 100%); /* firefox */
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#C6C6C6), color-stop(100%,#D8D8D8)); /* webkit */
      -webkit-border-radius:15px; -moz-border-radius:10px;
      border: 1px solid #f1f1f1;
      }    
      .ui-corner-all { border-radius: 0 0 0 0; }
      
      .ui-tabs { padding: .2em;}
      .ui-tabs .ui-tabs-nav li { top: 0px; margin: -2px 0 1px; text-transform: uppercase; font-size: 10.5px;}
      .ui-tabs .ui-tabs-nav li a { padding: .25em 2em .25em 1em; margin: .5em; text-shadow: 0 1px 0 rgba(255,255,255,.5); }
      /**
      *	Basic Layout Theme
      * 
      *	This theme uses the default layout class-names for all classes
      *	Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
      */
      
      .ui-layout-pane { /* all 'panes' */ 
      background: #FFF; 
      border: 1px solid #BBB; 
      padding: 05x; 
      overflow: auto;
      } 
      
      .ui-layout-resizer { /* all 'resizer-bars' */ 
      background: #DDD; 
      top:100px
      } 
      
      .ui-layout-toggler { /* all 'toggler-buttons' */ 
      background: #AAA; 
      } 
      
    </style>
      <!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><script xmlns="" type="text/javascript" src="common/browserDetect.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery-1.7.2.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.ui.all.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/jquery.cookie.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/treeview/jquery.treeview.min.js">
         <!----></script><script xmlns="" type="text/javascript" src="common/jquery/layout/jquery.layout.js">
         <!----></script><style type="text/css">
      
      #header {
      /* background: url("../images/header-bg.png") scroll top left repeat-x #4d8c83; */
      background: transparent;
      }
      #leftnavigation {
      /* background-color: #ededed!important; */
      background-color: transparent;
      }
      #navheader {
      visibility: hidden;
      }
      #webhelp-currentid {
      /* background-color: #D8D8D8 !important; */
      background-color: #FFFFFF; /*but must be changed in main.js as well*/
      }
      .filetree span.file {
      /* background: url(images/file.gif) 0 0 no-repeat; */
      background: initial;
      }
      .filetree span.folder, .filetree span.file {
      padding: 1px 0 1px 7px;
      display: block;
      }

      /* borrowed from cisco: clientlib.css */
      .footer {
      margin: 28px 30px 0 15px;
      font-size: 80%;
      line-height: 120%;
      border-top: 1px solid #ccc;
      padding-top: 7px;
      color: #999;
      }
      .footer #footer-legal{display:inline;padding-bottom:18px}
      #framework-footer{margin:0;padding:0 0 15px 0;min-width:900px;width:100%}
      .footer a,.footer a:visited{color:#999}

      /* from ccimr.css */
      a:active  { color: #3366CC}
      a:hover   { color: #3366CC}
      a:link    { color: #3366CC}
      a:visited { color: #3366CC}

      #header img {
      float: left;
      margin-left: 20px;
      margin-top: 0px;
      }

      #header h1 {
      color: #336666;
      margin-top: 4px;
      }
      #content h1, #content h2 {
      color: #336666;
      }
      .title {
      color: #336666;
      }
      p, pre {
      margin-left: 0.1in;
      }
      p, ul, ol, li {
        font-size: 95%;
        font-family: Arial, Helvetica, sans-serif;
        margin-top: 1px;
      }
      body {
        font: 80.5% Arial, Helvetica, sans-serif;
      }
      ol {
      display: block;
      list-style-type: decimal;
      -webkit-margin-before: 1em;
      -webkit-margin-after: 1em;
      -webkit-margin-start: 0px;
      -webkit-margin-end: 0px;
      -webkit-padding-start: 40px;
      border: 1;
      }
    </style></head>
   <body>
      <noscript>
         <div id="noscript">JavaScript is disabled on your browser. Please enable JavaScript to enjoy all the features of this site.</div>
      </noscript>
      <div id="header"><a href="index.html"><img style="margin-right: 2px; width: 110; height: 73; padding-right: 25px; padding-top: 8px" align="right" src="common/images/logo.gif" alt="Cisco Systems, Inc." /></a><h1>NSO 4.4.2.3 NED Development<br />Network Element Drivers (NEDs)
         </h1>
         <div id="navheader">
            <!---->
            <table class="navLinks">
               <tr>
                  <td><a id="showHideButton" href="#" onclick="myLayout.toggle('west')" class="pointLeft" tabindex="5" title="Hide TOC tree">Sidebar
                                                    </a></td>
                  <td><a accesskey="p" class="navLinkPrevious" tabindex="5" href="ug.ned.devs.html">Prev</a>
                                                             |
                                                             <a accesskey="u" class="navLinkUp" tabindex="5" href="ug.ned.html">Up</a>
                                                         |
                                                         <a accesskey="n" class="navLinkNext" tabindex="5" href="ug.ned.generic.html">Next</a></td>
               </tr>
            </table>
         </div>
      </div>
      <div id="content">
         <div class="sect1">
            <div xmlns="" class="titlepage">
               <div>
                  <div>
                     <h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="ug.ned.clined"></a>The CLI NED
                     </h2>
                  </div>
               </div>
            </div>
            <p>
                   The CLI NED is magic, it is an entirely model driven
                   way to CLI script towards all Cisco like devices. The basic
                   idea is that the Cisco CLI engine found in ConfD, can be run
                   in both directions.
                   
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                              A sequence of Cisco CLI commands can be turned into the
                              equivalent manipulation of the internal XML tree that
                              represents the configuration inside NSO/ConfD.
                              This is the normal mode of operations of ConfD, run in Cisco mode.
                              
                     </p>
                     <p>
                              A YANG model, annotated appropriately, will produce a Cisco CLI.
                              The user can enter Cisco commands and ConfD will, using the annotated
                              YANG model, parse the Cisco CLI commands and change the
                              internal XML tree accordingly. Thus this is the CLI parser and
                              interpreter. Model driven.
                              
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                  The reverse operation is also possible. Given two different
                                  XML trees, each representing a configuration state, in the ConfD
                                  case it represents the configuration of a single device, i.e. the
                                  device using ConfD as management framework, whereas in the NSO case,
                                  it represents the entire network configuration, we can generate the
                                  list of Cisco commands that would take us from one XML tree to
                                  another.
                                
                     </p>
                     <p>
                                  This technology is used by NSO to generate CLI commands southbound
                                  when we manage Cisco like devices.
                                
                     </p>
                  </li>
               </ul>
            </div>
            <p>
                     It will become clear later in the examples how the CLI engine is
                     run in forward and also reverse mode. The key point though, is
                     that the Cisco CLI NED Java programmer doesn't have to
                     understand and parse the structure of the CLI, this is entirely
                     done by the NSO CLI engine.
                   
            </p>
            <p>
                     In order to implement a CLI NED, the following components are
                     required:
                   
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                                  A YANG data model that describes the CLI. An important development
                                  tool here is ConfD, the Tail-f on-device management toolkit.
                                  For NSO to manage a CLI device, it needs a YANG file with exactly
                                  the right annotations to produce precisely the CLI of the managed
                                  device. In the NSO example collection we have a few examples
                                  of annotated YANG models that render different variants of Cisco CLI.
                                  See for example
                                  <code class="filename">$NCS_DIR/packages/neds/dell-ftos</code> and
                                  <code class="filename">$NCS_DIR/packages/neds/cisco-nx</code>.
                                
                     </p>
                     <p>
                                  Thus, to create an annotated YANG files for a device with a
                                  Cisco-like CLI, the work procedure is thus to run ConfD
                                  and write a YANG file which renders the correct CLI. This
                                  procedure is well described in the ConfD user guide documentation.
                                
                     </p>
                     <p>
                                  Furthermore, this YANG model must declare an identity with
                                  <span class="emphasis"><em>ned:cli-ned-id</em></span> as base.
                                
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                  The next thing we need is a Java class that implements the NED.
                                  This is typically not a lot of code, and the existing example
                                  NED Java classes are easily extended and modified to fit other needs.
                                  The most important point of Java NED class code though is that the
                                  code can be oblivious of the actual CLI commands sent and received.
                                
                     </p>
                  </li>
               </ul>
            </div>
            <p>
                   Java CLI NED code must implement the <span class="emphasis"><em>CliNed</em></span>
                   interface.
                   
            </p>
            <div class="example"><a id="d0e763"></a><p class="title"><strong>Example 5. NedConnectionBase.java</strong></p>
               <div class="example-contents"><pre class="programlisting">/*    -*- Java -*-
 *
 *  Copyright 2010 Tail-F Systems AB. All rights reserved.
 *
 *  This software is the confidential and proprietary
 *  information of Tail-F Systems AB.
 *
 *  $Id$
 *
 */
package com.tailf.ned;

import java.util.Calendar;

import com.tailf.conf.ConfPath;
import com.tailf.conf.ConfXMLParam;
import com.tailf.ned.NedWorker.TransactionIdMode;

/**
 * A NedConnection is the interface used by the NedMux for keeping
 * track of connections to different devices. One instance of each
 * type should be registered with the NedMux before the NedMux is
 * started. Specific sub-classes are defined for cli and generic
 * neds, see NedCli and NedGeneric.
 *
 * The life of a specific connection to a backend device is as
 * follows.
 *
 * 1 Initially an instance is created through the invocation of
 *   the create method, and a connection to the backend
 *   device is set up.
 * 2 a mix of prepare/abort/revert/commit/persist/show/getTransId/
 *   showStats/showStatsList, etc
 * 3 possibly get invocations to the isAlive() method. This method
 *   is involved when the connection is pooled.
 * 4 possibly get an invocation to the reconnect method, and start
 *   over at 2
 * 5 finally one of the close() methods will be involved. The
 *   connection should close the connection to the device and
 *   release all resources.
 *
 * If the connection is poolable then it may live in the connection
 * pool. The state of the connection is polled by the connection
 * pool manager using the isAlive() method.
 *
 */

abstract public class NedConnectionBase {

    private NedCapability[] capas;
    private NedCapability[] statscapas;
    private boolean wantRevertDiff;
    private TransactionIdMode transMode = TransactionIdMode.NONE;
    private ConfXMLParam[] platformData;
    private int connectionId;
    private long poolTimestamp = Long.MAX_VALUE;
    private boolean useStoredCapas = false;

    protected void setPoolTimestamp(long timestamp) {
        this.poolTimestamp = timestamp;
    }

    public long getTimeInPool() {
        return Calendar.getInstance().getTimeInMillis() - poolTimestamp;
    }

    /**
     * This function is used to set the parameters of NedConnection for
     * a specific NED.
     *
     * @param capas
     *  an array of capabilities for config data
     * @param statscapas
     *  an array of capabilities for stats data
     * @param wantRevertDiff
     *  Indicates if the NED should be provided with the edit operations
     *    needed to undo the configuration changes done in
     *    the prepare method when a transaction is aborted.
     * @param transMode
     *  Indicates the mode of Transaction ID supported by the NED.
     *    NONE if not supported. If supported, then getTransId()
     *    should be implemented. Support for Transaction IDs is required
     *    for check-sync action.
     */
    public void setConnectionData(NedCapability[] capas,
                                  NedCapability[] statscapas,
                                  boolean wantRevertDiff,
                                  TransactionIdMode transMode) {
        this.capas = capas;
        this.statscapas = statscapas;
        this.wantRevertDiff = wantRevertDiff;
        this.transMode = transMode;
    }

    /**
     * This function is used to set the capabilities for a specific NED.
     * It has the same functionality as setConnectionData, but only for
     * config capabilities. This is useful when initializing a NED instance
     * without establishing connection to the device because other connection
     * parameters such as stats capabilities, reverse diff and
     * transaction id mode are irrelevant in this case
     *
     * @param capas
     *  an array of capabilities for config data
     */
    public void setCapabilities(NedCapability[] capas) {
        this.capas = capas;
    }

    /**
     * This function is used to set the same capabilities as stored in
     * CDB for a particular device. This method can only be used when
     * initializing a NED instance without establishing connection to
     * the device.
     */
    public void useStoredCapabilities() {
        this.useStoredCapas = true;
    }

    /**
     * This function is used to set the platform operational data for
     * a specific NED. This is optional data that can be retrieved and
     * used for instance in service code.
     *
     * It is possible to augment NED specific data into the platform container
     * in the NCS device model. This method is then used to set both standard
     * and augmented data.
     *
     * The ConfXMLParam[] array is expected to start with the platform tag:
     *
     * The following is an example of how the platformData array would
     * be structured in an example with both the NCS standard name,
     * model and version leaves as well as a augmented inventory list
     * with three list elements:
     * &lt;pre&gt;
     * ConfXMLParam[] platformData =
     *     new ConfXMLParam[] {
     *         new ConfXMLParamStart("ncs", "platform"),
     *         new ConfXMLParamValue("ncs", "name",
     *                               new ConfBuf("ios")),
     *         new ConfXMLParamValue("ncs", "version",
     *                               new ConfBuf("15.0M")),
     *         new ConfXMLParamValue("ncs", "model",
     *                               new ConfBuf("7200")),
     *
     *         new ConfXMLParamStart("ginv", "inventory"),
     *         new ConfXMLParamValue("ginv", "name",
     *                               new ConfBuf("lx-345")),
     *         new ConfXMLParamValue("ginv", "value",
     *                               new ConfBuf("line-card")),
     *         new ConfXMLParamStop("ginv", "inventory"),
     *         new ConfXMLParamStart("ginv", "inventory"),
     *         new ConfXMLParamValue("ginv", nameStr,
     *                               new ConfBuf("lx-1001")),
     *         new ConfXMLParamValue("ginv", "value",
     *                               new ConfBuf("line-card")),
     *         new ConfXMLParamStop("ginv", "inventory"),
     *         new ConfXMLParamStart("ginv", "inventory"),
     *         new ConfXMLParamValue("ginv", "name",
     *                               new ConfBuf("FA1209A4E389")),
     *         new ConfXMLParamValue("ginv", "value",
     *                               new ConfBuf("licence")),
     *         new ConfXMLParamStop("ginv", "inventory"),
     *
     *         new ConfXMLParamStop("ncs", "platform")
     *     };
     *
     *      setPlatformData(platformData);
     *
     * &lt;/pre&gt;
     *
     * @param platformData
     *  An ConfXMLParam array containing operational data to be set under
     *  the platform container in the device model. Expected to start with
     *  the platform tag. If the platform container is augmented with some user
     *  specific model such data should also be part of this array to be set at
     *  connection time.
     */
    public void setPlatformData(ConfXMLParam[] platformData) {
        this.platformData = platformData;
    }

    public int connection_id() {
        return getConnectionId();
    }

    protected void setConnectionId(int connectionId) {
        this.connectionId = connectionId;
    }

    public int getConnectionId() {
        return connectionId;
    }

    public NedCapability[] getCapas() {
        return capas;
    }

    public NedCapability[] getStatsCapas() {
        return statscapas;
    }

    public boolean getWantRevertDiff() {
        return wantRevertDiff;
    }

    public TransactionIdMode getTransactionIdMode() {
        return transMode;
    }

    public ConfXMLParam[] getSystemStateData() {
        return platformData;
    }

    public boolean getUseStoredCapas() {
        return useStoredCapas;
    }

    /**
     * The device_id is originally provided by the NCS to properly identify
     * the device. It is the named used for the device by the NCS in the
     * list of devices.
     */

    abstract public String device_id();

    /**
     * The type is one of "cli" and "generic". This information is sent to
     * the NCS when the NedMux is started to let the NCS know how to communicate
     * with each device.
     */
    abstract public String type();

    /**
     * Which Yang modules are covered by the class instance. This information
     * is defined by the setConnectionData() call and is sent to the NCS after
     * initiating a new connection, or when re-establishing a connection.
     * The modules() method is not actually used.
     */
    abstract public String [] modules();

    /**
     * This should return the a unique (among registered NedConnection classes)
     * identity. It will be used by the NCS when creating new connections to
     * control which of the registered NedConnection classes to use.
     */
    abstract public String identity();

    /**
     * This indicates that the current set of operations should be
     * committed to the running configuration. When completed the
     * w.commitResponse() method should be invoked. Devices that does
     * not support commit() should invoke the w.commitResponse() method
     * without delay. On error invoke the w.error(NedCmd.COMMIT,
     * Error, Reason) method.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     * @param timeout
     *    If the commit operation does not complete within 'timeout' seconds
     *    the operation should be aborted.
     */

    abstract public void commit(NedWorker w, int timeout) throws Exception;

    /**
     * This method is invoked when the currently committed change set
     * should be made permanent. This corresponds to copying the
     * running configuration to the startup configuration, on a
     * running/startup device, or issuing the confirming commit operation
     * on a device that supports that. When completed the
     * w.persistResponse() should be invoked. On error invoke the
     * w.error(NedCmd.PERSIST,Error, Reason) method.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */

    abstract public void persist(NedWorker w) throws Exception;

    /**
     * This method is invoked when the connection is terminated. It is
     * not invoked when placing the connection in the connection pool.
     * No response is required, but trace messages may be generated
     * during the close down.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */

    abstract public void close(NedWorker w) throws Exception;

    /**
     * This method is invoked when a connection close is forced and no
     * NedWorker is involved. This typically occurs when a connection
     * is removed from the connection pool. No response or trace
     * messages can be sent during the operation.
     */
    abstract public void close();

    /**
     * This method is invoked to check if a connection is still
     * alive. When a connection is stored in the connection pool
     * it will periodically be polled to see if it is alive. If
     * false is returned the connection will be closed using the
     * close() method invocation.
     */
    abstract public boolean isAlive();

    protected void isAlive(NedWorker w) throws Exception {
        boolean alive = false;
        try {
            alive = this.isAlive();
        } catch (Exception e) {
            alive = false;
        }
        w.isAliveResponse(alive);
    }

    /**
     * This is for any optional commands on the device that are
     * not part of the yang files config data, but is modeled as
     * tailf:actions or rpcs in the device yang files.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     * @param cmdName
     *    Name of the command (path to action?)
     * @param params
     *
     */

    abstract public void command(NedWorker w, String cmdName,
                                 ConfXMLParam[] params) throws Exception;

    /**
     * When this method is invoked the NED should write the value
     * of the leaf, indicated by the path, to the provided transaction
     * handler (th) using MAAPI. The worker is free to
     * write other values as well, for example, if a larger chunk of
     * data is read from the backend device. NCS will then not
     * request those paths but read them directly from the transaction.
     * Different timeouts can be provided for different paths. Note
     * however, that all data under a subtree will be removed from the
     * cache once the timeout triggers.
     *
     * The only drawback of this approach is that there is no way
     * for the NED to indicate that a leaf does not exist other than
     * not providing the value when directly asked for its path.
     * Consequently, if a NED writes a larger set of data then the path
     * requested in the method, NCS may still ask for leafs in
     * that data-set if no value has been provided for them (due to
     * them not existing).
     *
     * The method should indicate its return status by invoking
     * the method w.error() or w.showStatsResponse()
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     * @param th
     *    a transaction handler that can be used in Maapi
     * @param path
     *    a ConfPath indication which element is requested
     *
     */

    abstract public void showStats(NedWorker w, int th, ConfPath path)
        throws Exception;

    /**
     * When this method is invoked the NED should write the full
     * list to the transaction (th), but it is not required to write
     * any data for any of the the instances. It may, however, choose to write
     * more than the requested list, if that is convenient. Often
     * a larger chunk of data is provided by the backend and the NED
     * may then write that to the cache (the transaction th provided).
     *
     * Note that even if the data for a list is written during another
     * invocation, NCS will still invoke the showStatsList() method
     * to make sure that the list instances are written in full.
     * The NED may then just respond with a new timeout and does not
     * have to write the data again to the transaction (but it is
     * a good idea to make sure the data is still stored in the
     * cache (transaction th) using MAAPI.
     *
     *    The method should indicate its return status by invoking
     *    the method w.error() or w.showStatsResponse()
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     * @param th
     *    a transaction handler that can be used in Maapi
     * @param path
     *    a ConfPath indication which list is requested
     *
     */

    abstract public void showStatsList(NedWorker w, int th, ConfPath path)
        throws Exception;


    /**
     * When this method is invoked the NED should produce a transaction
     * id that must be changed if any changes has been made to the
     * configuration since the last time the transaction id was requested.
     * The transaction id can either be requested from the system,
     * or calculated by the callback, for example by calculating an
     * MD5 checksum of the configuration text.
     *
     *    The method should indicate its return status by invoking
     *    the method w.error() or w.getTransIdResponse()
     *
     *    The method should be implemented if the NED claimed
     *    a NedWorker.TransactionIdMode which is not NONE
     *    in setConnectionData().
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     */

    abstract public void getTransId(NedWorker w) throws Exception;

    /**
     * Used for resuming a connection found in the connection pool.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */
    abstract public void reconnect(NedWorker w) throws Exception;


    /**
     * Used for initializing an transaction. For instance if locking
     * or other transaction preparations are necessary,
     * they should be performed here.
     * Note, that this method has a proper implementation in the base class
     * and is therefore not necessary to override if no NED specific
     * transaction preparations are needed.
     *
     *    The method should indicate its return status by invoking
     *    the method w.error() or w.initializeResponse()
     *
     *    If the NED has claimed a NedWorker.TransactionIdMode other than
     *    not NONE a transaction id must be produced in the response same
     *    as for the getTransId() call.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */
    public void initialize(NedWorker w) throws Exception {
        if (transMode == TransactionIdMode.NONE || w.isSuppressTransId()) {
            w.initializeResponse("");
        } else {
            getTransId(w);
        }
    }

    /**
     * If the transaction is not completed and the NED has done initialize
     * this method is called to undo the transaction preparations.
     * That is restoring the NED to the state before initialize.
     * Note, that this method has a proper implementation in the base class
     * and is therefore not necessary to override if no NED specific operations
     * was performed in initialize.
     *
     *    The method should indicate its return status by invoking
     *    the method w.error() or w.uninitializeResponse()
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */
    public void uninitialize(NedWorker w) throws Exception {
        w.uninitializeResponse();
    }
}</pre></div>
            </div><br class="example-break" /><div class="example"><a id="d0e768"></a><p class="title"><strong>Example 6. NedCliBase.java</strong></p>
               <div class="example-contents"><pre class="programlisting">/*    -*- Java -*-
 *
 *  Copyright 2010 Tail-F Systems AB. All rights reserved.
 *
 *  This software is the confidential and proprietary
 *  information of Tail-F Systems AB.
 *
 *  $Id$
 *
 */
package com.tailf.ned;

import java.net.InetAddress;
import com.tailf.conf.ConfPath;

/**
 * This class is used for connections between the NCS and CLI based
 * NEDs. A NedCli instance must be combined with a YANG data model
 * that models the data and CLI commands used for talking to the device.
 */

abstract public class NedCliBase extends NedConnectionBase {
    // mangle output, we're invoked during prepare phase
    // of NCS

    /**
     * Is invoked by NCS to take the configuration to a new state. The Ned may
     * choose to apply the changes directly to the device, preferably to a
     * candidate
     * configuration, but if the device lacks candidate support it may choose
     * to apply the changes directly to the running config (typically the case
     * on IOS like boxes). If the configuration changes are later aborted, or
     * reverted, the NCS will provide the necessary commands for restoring the
     * configuration to its previous state. The device should invoke the
     * w.prepareResponse() when the operation is completed.
     *
     *        initialize (prepare transaction)
     *              / \
     *             /   uninitialize (undo preparations)
     *            v
     *        prepare (send data to device)
     *            /   \
     *           v     v
     *        abort | commit(send confirmed commit (ios would do noop))
     *                 /   \
     *                v     v
     *            revert | persist (send confirming commit)
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param data
     *    is the CLI commands for transforming the configuration to
     *    a new state. The commands are generated using the YANG data
     *    model in combination with the tailf: extensions to guide the
     *    mapping.
     */
    abstract public void prepare(NedWorker w, String data) throws Exception;

    /**
     * Is invoked by NCS to tell the NED what actions it should take towards
     * the device if it should do a prepare.
     *
     * The NED should invoke the method
     * {@link com.tailf.ned.NedWorker#prepareDryResponse(String)
     * prepareDryResponse()}
     * when the operation is completed. If no changes needs to be done
     * just answer &lt;code&gt;prepareDryResponse(data)&lt;/code&gt;
     *
     * If an error is detected answer this through a call to
     * {@link com.tailf.ned.NedWorker#error(int,String,String) error()}
     * in &lt;code&gt;NedWorker w&lt;/code&gt;.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the
     *    {@link NedTracer}
     *    API and can be used in, for example, the {@link SSHSession}
     *    as a tracer.
     *
     * @param data
     *    is the CLI commands for transforming the configuration to
     *    a new state. The commands are generated using the YANG data
     *    model in combination with the tailf: extensions to guide the
     *    mapping.
     */
    abstract public void prepareDry(NedWorker w, String data)
        throws Exception;

    /**
     * Is invoked by NCS to abort the configuration to the state before the
     * previous prepare() invocation. The NCS has calculated the commands needed
     * to reach that state from the current state. The instance may choose
     * to use there commands, or use some other mechanism to reach the same
     * state. When the operation is completed it should invoke the
     * w.abortResponse() method in the NedWorker.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param data
     *    is the commands for taking the config back to the previous
     *    state. The commands are generated using the YANG data
     *    model in combination with the tailf: extensions to guide the
     *    mapping.
     */
    abstract public void abort(NedWorker w, String data) throws Exception;

    /**
     * Is invoked by NCS to undo the changes introduced in the last commit
     * operation (communicated to the NED in the prepare method invocation).
     * The difference between abort() and revert() is that revert() is invoked
     * after commit() (but before persist), whereas abort() is invoked before
     * commit(). Once the configuration has been made persistent by persist()
     * it can no longer be restored to any previous  (potentially saved) state.
     * When the revert operation has been completed the w.revertResponse()
     * method should be called.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param data
     *    is the commands for taking the config back to the previous
     *    state.
     */
    abstract public void revert(NedWorker w, String data) throws Exception;

    /**
     * Extract parts of the configuration and send it to NCS. The response
     * is sent by invoking the w.showCliResponse() method in the provided
     * NedWorker.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param toptag
     *    is the top level tag indicating which part of the config
     *    should be extracted.
     */
    abstract public void show(NedWorker w, String toptag) throws Exception;

    /**
     * Extract parts of the configuration and send it to NCS. The response
     * is sent by invoking the w.showCliResponse() method in the provided
     * NedWorker.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param cmdpaths
     *    are cmd paths to filter the various parts of the configuration tree
     *    that should be extracted.
     */
    public void showPartial(NedWorker w, String[] cmdpaths)
        throws Exception {
        w.error(NedCmd.SHOW_PARTIAL_CLI, "not implemented");
    }

    /**
     * Extract parts of the configuration and send it to NCS. The response
     * is sent by invoking the w.showCliResponse() method in the provided
     * NedWorker.
     *
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     *
     * @param paths
     *    are paths to filter the various parts of the configuration tree
     *    that should be extracted.
     */
    public void showPartial(NedWorker w, ConfPath[] paths)
        throws Exception {
        w.error(NedCmd.SHOW_PARTIAL_CLI, "not implemented");
    }

    /**
     * Used by the connection pool to find a matching connection. If
     * the current connection is has the same parameters it should return
     * true, otherwise false.
     *
     * @param deviceId name of device
     * @param ip address to connect to device
     * @param port port to connect to
     * @param proto ssh or telnet
     * @param ruser name of user to connect as
     * @param pass password to use when connecting
     * @param secpass secondary password to use when entering config mode,
     *        set to empty string if not configured in the authgroup
     * @param trace indicates if raw trace messages should be generated or not
     * @param connectTimeout in milliseconds
     * @param readTimeout in milliseconds
     * @param writeTimeout in milliseconds
     */
    abstract public boolean isConnection(String deviceId,
                                         InetAddress ip,
                                         int port,
                                         String proto,  // ssh or telnet
                                         String ruser,
                                         String pass,
                                         String secpass,
                                         String keydir,
                                         boolean trace,
                                         int connectTimeout, // msecs
                                         int readTimeout,    // msecs
                                         int writeTimeout    // msecs
                                        );

    /**
     * Establish a new connection to a device and send response to
     * NCS with information about the device. This information is set by
     * using the setConnectionData() method.
     * A new instance representing the new connection should
     * be returned. That instance will then be used for further communication
     * with the device. Different worker instances may be used for that
     * communication and the instance cannot assume that the worker used in
     * this invocation will be the same used for the invocations of the
     * prepare, abort, revert, persist, show, etc methods.
     *
     * @return the connection instance
     * @param deviceId name of device
     * @param ip address to connect to device
     * @param port port to connect to
     * @param proto ssh or telnet
     * @param ruser name of user to connect as
     * @param pass password to use when connecting
     * @param secpass secondary password to use when entering config mode,
     *        set to empty string if not configured in the authgroup
     * @param publicKeyDir directory to read public keys. null if password is
     *        given
     * @param trace indicates if raw trace messages should be generated or not
     * @param connectTimeout in milliseconds
     * @param readTimeout in milliseconds
     * @param writeTimeout in milliseconds
     * @param mux
     * @param w
     *    The NedWorker instance currently responsible for driving the
     *    communication
     *    between NCS and the device. This NedWorker instance should be
     *    used when communicating with the NCS, ie for sending responses,
     *    errors, and trace messages. It is also implements the NedTracer
     *    API and can be used in, for example, the SSHSession as a tracer.
     */
    abstract public NedCliBase newConnection(String deviceId,
                                         InetAddress ip,
                                         int port,
                                         String proto,  // ssh or telnet
                                         String ruser,
                                         String pass,
                                         String secpass,
                                         String publicKeyDir,
                                         boolean trace,
                                         int connectTimeout, // msecs
                                         int readTimeout,    // msecs
                                         int writeTimeout,   // msecs
                                         NedMux mux,
                                         NedWorker w
                                        );

    /**
     * Make a new instance of Ned object without establishing a connection
     * towards the device. The NED should use previously stored information
     * about the device to initialize its state if needed or throw
     * NedWorker.NotEnoughDataException. It should then send the information
     * about the device using the setConnectionData() method.  A new instance
     * representing the new connection should be returned. That instance can
     * only be used for invoking prepareDry() callback and not for actual
     * communication with the device. close() callback will be invoked
     * before destroying the NED instance, so the implementation of the close()
     * callback should handle cleanup both for instances created with
     * newConnection() and instanced created with initNoConnect()
     *
     * @return the NED instance
     * @param deviceId name of device
     * @param mux
     * @param worker
     *    The NedWorker instance currently responsible for driving the
     *    communication between NCS and the device. This NedWorker instance
     *    should be used when communicating with the NCS, ie for sending
     *    responses, errors, and trace messages.
     */
    public NedCliBase initNoConnect(String device_id,
                                    NedMux mux,
                                    NedWorker worker)
        throws NedWorker.NotEnoughDataException {
        throw new NedWorker.NotEnoughDataException();
    }
}</pre></div>
            </div><br class="example-break" /><p>
                   Thus the Java NED class has the following responsibilities.
                   
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                                  It must implement the identification callbacks, i.e
                                  <span class="emphasis"><em>modules()</em></span>,
                                  <span class="emphasis"><em>type()</em></span>, and
                                  <span class="emphasis"><em>identity()</em></span>
                                
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                  It must implement the connection related callback methods
                                  <span class="emphasis"><em>newConnection()</em></span>,
                                  <span class="emphasis"><em>isConnection()</em></span> and
                                  <span class="emphasis"><em>reconnect()</em></span>
                                
                     </p>
                     <p>
                                  NSO will invoke the <span class="emphasis"><em>newConnection()</em></span>
                                  when it requires a connection to a managed device. It is the
                                  responsibility of the <span class="emphasis"><em>newConnection()</em></span>
                                  method to connect to the device, figure out exactly what
                                  type of device it is and return an array of
                                  <span class="emphasis"><em>NedCapability</em></span> objects.
                                
                     </p>
                     <div class="informalexample"><pre class="programlisting">public class NedCapability {

    public String str;
    public String uri;
    public String module;
    public String features;
    public String revision;
    public String deviations;

    ....</pre></div>
                     <p>
                                  This is very much in line with how a NETCONF connect works and
                                  how the NETCONF client and server exchange hello messages.
                                
                     </p>
                  </li>
                  <li class="listitem">
                     <p>
                                  Finally the NED code must implement a series of data methods.
                                  For example the method
                                  <span class="emphasis"><em>void prepare(NedWorker w, String data)</em></span>
                                  get a <span class="emphasis"><em>String</em></span> object which is the set of
                                  Cisco CLI commands it shall send to the device.
                                
                     </p>
                     <p>
                                  In the other direction, when NSO wants to collect data from
                                  the device, it will invoke <span class="emphasis"><em>void show(NedWorker w,
                                        String toptag)</em></span> for each tag found at the top of
                                  data model(s) loaded for that device.  For example if the
                                  NED gets invoked with <span class="emphasis"><em>show(w,
                                        "interface")</em></span> it's responsibility is to invoke the
                                  relevant show configuration command for "interface", i.e
                                  <span class="emphasis"><em>show running-config interface</em></span> over the
                                  connection to the device, and then dumbly reply with all
                                  data the device replies with. NSO will parse the output data
                                  and feed it into its internal XML trees.
                                
                     </p>
                  </li>
               </ul>
            </div>
         </div><script type="text/javascript" src="common/main.js">
            <!----></script><script type="text/javascript" src="common/splitterInit.js">
            <!----></script><div class="footer" id="footer-legal">
            <div class="footer-legal framework-footer-cq">
               <div id="framework-footer">
                  <div id="footer-legal"><a href="http://www.cisco.com/web/siteassets/legal/terms_condition.html">Terms &amp; Conditions</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html">Privacy Statement</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/privacy.html#cookies">Cookie Policy</a> |
                                 <a href="http://www.cisco.com/web/siteassets/legal/trademark.html">Trademarks</a></div>
               </div>
            </div>
         </div>
      </div>
      <div id="sidebar">
         <div id="leftnavigation" style="padding-top:3px;">
            <div id="tabs">
               <ul style="visibility: hidden;"></ul>
               <div id="treeDiv"><img src="common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;" /><div id="ulTreeDiv" style="display:none">
                     <ul id="tree" class="filetree">
                        <li><span class="file"><a href="ch01.html" tabindex="1">Introduction</a></span></li>
                        <li><span class="file"><a href="ug.ned.html" tabindex="1">Network Element Drivers (NEDs)</a></span><ul>
                              <li><span class="file"><a href="ug.ned.introduction.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.ned.snmpned.html" tabindex="1">The SNMP NED</a></span><ul>
                                    <li><span class="file"><a href="ch02s02s01.html" tabindex="1">Introduction</a></span></li>
                                    <li><span class="file"><a href="ch02s02s02.html" tabindex="1">Overview</a></span></li>
                                    <li><span class="file"><a href="ch02s02s03.html" tabindex="1">Compiling and loading MIBs</a></span></li>
                                    <li><span class="file"><a href="ch02s02s04.html" tabindex="1">Configuring NSO to speak SNMP southbound</a></span><ul>
                                          <li><span class="file"><a href="ch02s02s04.html#d0e240" tabindex="1">Configure MIB groups</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch02s02s05.html" tabindex="1">Annotations for MIB objects</a></span></li>
                                    <li><span class="file"><a href="ch02s02s06.html" tabindex="1"> Using the SNMP NED</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ug.ned.identification.html" tabindex="1">NED identification</a></span></li>
                              <li><span class="file"><a href="ug.ned.devs.html" tabindex="1">Dumb versus capable devices</a></span></li>
                              <li id="webhelp-currentid"><span class="file"><a href="ug.ned.clined.html" tabindex="1">The CLI NED</a></span></li>
                              <li><span class="file"><a href="ug.ned.generic.html" tabindex="1">Generic NED</a></span></li>
                              <li><span class="file"><a href="ug.ned.starting.generic.html" tabindex="1">Getting started with a CLI NED</a></span></li>
                              <li><span class="file"><a href="ug.ned.generic.gettingstarted.html" tabindex="1">Getting started with a generic NED</a></span></li>
                              <li><span class="file"><a href="ug.ned.commands.html" tabindex="1">NED commands</a></span></li>
                              <li><span class="file"><a href="ug.ned.stats.html" tabindex="1">Statistics</a></span></li>
                              <li><span class="file"><a href="ug.ned.stats2.html" tabindex="1">Multi NEDs for Statistics</a></span></li>
                              <li><span class="file"><a href="ug.ned.defaultvalues.html" tabindex="1">Making the NED handle default values properly</a></span></li>
                              <li><span class="file"><a href="ch02s13.html" tabindex="1">Using set hooks in the NED</a></span></li>
                              <li><span class="file"><a href="ch02s14.html" tabindex="1">Dry-run considerations</a></span></li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.cli_ned.html" tabindex="1">Writing a data model for a CLI NED</a></span><ul>
                              <li><span class="file"><a href="ch03s01.html" tabindex="1">Overview</a></span></li>
                              <li><span class="file"><a href="ch03s02.html" tabindex="1">Tweaking the basic rendering scheme</a></span><ul>
                                    <li><span class="file"><a href="ch03s02s01.html" tabindex="1">Suppressing submodes</a></span></li>
                                    <li><span class="file"><a href="ch03s02s02.html" tabindex="1">Adding  a submode</a></span></li>
                                    <li><span class="file"><a href="ch03s02s03.html" tabindex="1">Commands with multiple parameters</a></span></li>
                                    <li><span class="file"><a href="ch03s02s04.html" tabindex="1">Leaf values not really part of the key</a></span></li>
                                    <li><span class="file"><a href="ch03s02s05.html" tabindex="1">Change controlling annotations</a></span></li>
                                    <li><span class="file"><a href="ch03s02s06.html" tabindex="1">Ordered-by user lists</a></span></li>
                                    <li><span class="file"><a href="ch03s02s07.html" tabindex="1">Default values</a></span></li>
                                    <li><span class="file"><a href="ch03s02s08.html" tabindex="1">Understanding how the diffs are generated</a></span></li>
                                 </ul>
                              </li>
                              <li><span class="file"><a href="ch03s03.html" tabindex="1">Modifying the Java part of the CLI NED</a></span><ul>
                                    <li><span class="file"><a href="ch03s03s01.html" tabindex="1">Connecting to a device</a></span></li>
                                    <li><span class="file"><a href="ch03s03s02.html" tabindex="1">Displaying the configuration of a device</a></span><ul>
                                          <li><span class="file"><a href="ch03s03s02.html#d0e1845" tabindex="1">Stripping sections, headers and footers</a></span></li>
                                          <li><span class="file"><a href="ch03s03s02.html#d0e1868" tabindex="1">Removing keywords</a></span></li>
                                          <li><span class="file"><a href="ch03s03s02.html#d0e1885" tabindex="1">Replacing keywords</a></span></li>
                                          <li><span class="file"><a href="ch03s03s02.html#d0e1928" tabindex="1">Different quoting practices</a></span></li>
                                       </ul>
                                    </li>
                                    <li><span class="file"><a href="ch03s03s03.html" tabindex="1">Applying a config</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><span class="file"><a href="ug.cli-annot.html" tabindex="1">Tail-f CLI NED Annotations</a></span><ul>
                              <li><span class="file"><a href="ug.cli-annot.introduction.html" tabindex="1">Introduction</a></span></li>
                              <li><span class="file"><a href="ug.cli-annot.annotations.html" tabindex="1">Annotations</a></span><ul>
                                    <li><span class="file"><a href="ch04s02s01.html" tabindex="1">tailf:cli-add-mode</a></span></li>
                                    <li><span class="file"><a href="ch04s02s02.html" tabindex="1">tailf:cli-allow-join-with-key</a></span></li>
                                    <li><span class="file"><a href="ch04s02s03.html" tabindex="1">tailf:cli-allow-join-with-value</a></span></li>
                                    <li><span class="file"><a href="ch04s02s04.html" tabindex="1">tailf:cli-prefix-key and tailf:cli-before-key</a></span></li>
                                    <li><span class="file"><a href="ch04s02s05.html" tabindex="1">tailf:cli-boolean-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s06.html" tabindex="1">tailf:cli-sequence-commands and tailf:cli-break-sequence-commands</a></span></li>
                                    <li><span class="file"><a href="ch04s02s07.html" tabindex="1">tailf:cli-case-insensitive</a></span></li>
                                    <li><span class="file"><a href="ch04s02s08.html" tabindex="1">tailf:cli-compact-syntax</a></span></li>
                                    <li><span class="file"><a href="ch04s02s09.html" tabindex="1">tailf:cli-delete-container-on-delete</a></span></li>
                                    <li><span class="file"><a href="ch04s02s10.html" tabindex="1">tailf:cli-delete-when-empty</a></span></li>
                                    <li><span class="file"><a href="ch04s02s11.html" tabindex="1">tailf:cli-diff-dependency</a></span></li>
                                    <li><span class="file"><a href="ch04s02s12.html" tabindex="1">tailf:cli-disallow-value</a></span></li>
                                    <li><span class="file"><a href="ch04s02s13.html" tabindex="1">tailf:cli-display-joined</a></span></li>
                                    <li><span class="file"><a href="ch04s02s14.html" tabindex="1">tailf:cli-display-separated</a></span></li>
                                    <li><span class="file"><a href="ch04s02s15.html" tabindex="1">tailf:cli-drop-node-name</a></span></li>
                                    <li><span class="file"><a href="ch04s02s16.html" tabindex="1">tailf:cli-exit-command</a></span></li>
                                    <li><span class="file"><a href="ch04s02s17.html" tabindex="1">tailf:cli-explicit-exit</a></span></li>
                                    <li><span class="file"><a href="ch04s02s18.html" tabindex="1">tailf:cli-expose-key-name</a></span></li>
                                    <li><span class="file"><a href="ch04s02s19.html" tabindex="1">tailf:cli-flat-list-syntax</a></span></li>
                                    <li><span class="file"><a href="ch04s02s20.html" tabindex="1">tailf:cli-flatten-container</a></span></li>
                                    <li><span class="file"><a href="ch04s02s21.html" tabindex="1">tailf:cli-full-command</a></span></li>
                                    <li><span class="file"><a href="ch04s02s22.html" tabindex="1">tailf:cli-full-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s23.html" tabindex="1">tailf:cli-hide-in-submode</a></span></li>
                                    <li><span class="file"><a href="ch04s02s24.html" tabindex="1">tailf:cli-incomplete-command</a></span></li>
                                    <li><span class="file"><a href="ch04s02s25.html" tabindex="1">tailf:cli-incomplete-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s26.html" tabindex="1">tailf:cli-list-syntax</a></span></li>
                                    <li><span class="file"><a href="ch04s02s27.html" tabindex="1">tailf:cli-mode-name</a></span></li>
                                    <li><span class="file"><a href="ch04s02s28.html" tabindex="1">tailf:cli-multi-value</a></span></li>
                                    <li><span class="file"><a href="ch04s02s29.html" tabindex="1">tailf:cli-multi-word-key and tailf:cli-max-words</a></span></li>
                                    <li><span class="file"><a href="ch04s02s30.html" tabindex="1">tailf:cli-no-name-on-delete and tailf:cli-no-value-on-delete</a></span></li>
                                    <li><span class="file"><a href="ch04s02s31.html" tabindex="1">tailf:cli-optional-in-sequence</a></span></li>
                                    <li><span class="file"><a href="ch04s02s32.html" tabindex="1">tailf:cli-prefix-key</a></span></li>
                                    <li><span class="file"><a href="ch04s02s33.html" tabindex="1">tailf:cli-range-list-syntax</a></span></li>
                                    <li><span class="file"><a href="ch04s02s34.html" tabindex="1">tailf:cli-remove-before-change</a></span></li>
                                    <li><span class="file"><a href="ch04s02s35.html" tabindex="1">tailf:cli-replace-all</a></span></li>
                                    <li><span class="file"><a href="ch04s02s36.html" tabindex="1">tailf:cli-reset-siblings and tailf:cli-reset-all-siblings</a></span></li>
                                    <li><span class="file"><a href="ch04s02s37.html" tabindex="1">tailf:cli-reset-container</a></span></li>
                                    <li><span class="file"><a href="ch04s02s38.html" tabindex="1">tailf:cli-show-long-obu-diffs</a></span></li>
                                    <li><span class="file"><a href="ch04s02s39.html" tabindex="1">tailf:cli-show-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s40.html" tabindex="1">tailf:cli-show-with-default</a></span></li>
                                    <li><span class="file"><a href="ch04s02s41.html" tabindex="1">tailf:cli-suppress-list-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s42.html" tabindex="1">tailf:cli-suppress-mode</a></span></li>
                                    <li><span class="file"><a href="ch04s02s43.html" tabindex="1">tailf:cli-key-format</a></span></li>
                                    <li><span class="file"><a href="ch04s02s44.html" tabindex="1">tailf:cli-recursive-delete</a></span></li>
                                    <li><span class="file"><a href="ch04s02s45.html" tabindex="1">tailf:cli-suppress-no</a></span></li>
                                    <li><span class="file"><a href="ch04s02s46.html" tabindex="1">tailf:cli-trim-default</a></span></li>
                                    <li><span class="file"><a href="ch04s02s47.html" tabindex="1">tailf:cli-embed-no-on-delete</a></span></li>
                                    <li><span class="file"><a href="ch04s02s48.html" tabindex="1">tailf:cli-allow-range</a></span></li>
                                    <li><span class="file"><a href="ch04s02s49.html" tabindex="1">tailf:cli-case-sensitive</a></span></li>
                                    <li><span class="file"><a href="ch04s02s50.html" tabindex="1">tailf:cli-expose-ns-prefix</a></span></li>
                                    <li><span class="file"><a href="ch04s02s51.html" tabindex="1">tailf:cli-show-obu-comments</a></span></li>
                                    <li><span class="file"><a href="ch04s02s52.html" tabindex="1">tailf:cli-multi-line-prompt</a></span></li>
                                    <li><span class="file"><a href="ch04s02s53.html" tabindex="1">tailf:link target</a></span></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>
</html>