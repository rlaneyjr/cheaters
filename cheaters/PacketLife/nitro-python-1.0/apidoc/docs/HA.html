<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Citrix NetScaler XML API User&#39;s Guide - HA</title>
<link rel="stylesheet" type="text/css" href="help_ns.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body onload="return true;" class="ns_body">
<div class="ns_content"><table cellpadding="0" cellspacing="0"><tr><td><div><a href='introduction.html'>Home</a> > <a href="APIIndex.htm">Configuration</a> > High Availability</div></td></tr><tr><td><br></td></tr><tr class="ns_wp_header"><td>High Availability</td></tr><tr><td><br></td></tr><tr><td><div class="bottom_border">high-availability commands.</div></td></tr><tr><td><br></td></tr><tr><td><div><b>Configuration APIs</b></div></td></tr><tr><td><br></td></tr><tr><td><div><a href="addhanode.html">addhanode</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to adds a peer node to an HA configuration. Each node must add the other as a peer. An algorithm determines which node becomes primary and which becomes secondary.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="bindhanode_routemonitor.html">bindhanode_routemonitor</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to bind routemonitor to HA node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="forcehafailover.html">forcehafailover</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to forces an HA failover. Can be initiated from either node. A forced failover is not propagated or synchronized., <br>Note: This method fails under any of the following conditions:<br>* The secondary node is disabled or configured to remain secondary.<br>* The primary node is configured to remain primary.<br>* The state of the peer node is unknown.<br>* You run the method on a standalone appliance.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="forcehasync.html">forcehasync</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to forces duplication of the primary node's configuration on the secondary node. Can be executed from either node.<br>Note: This method fails under any of the following conditions:<br>* Synchronization is already in progress.<br>* The secondary node is disabled.<br>* Synchronization is disabled on either node<br>* The secondary node is not accessible from the primary.<br>* You run the method on a standalone appliance.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="forcehasyncEx.html">forcehasyncEx</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to forces duplication of the primary node's configuration on the secondary node. Can be executed from either node.<br>Note: This method fails under any of the following conditions:<br>* Synchronization is already in progress.<br>* The secondary node is disabled.<br>* Synchronization is disabled on either node<br>* The secondary node is not accessible from the primary.<br>* You run the method on a standalone appliance.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="gethanode.html">gethanode</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to get  the HA settings of both nodes or, if you specify a node, just the specified node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="rmhanode.html">rmhanode</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to removes the peer node from the HA configuration. To completely remove both the nodes from the HA configuration, you have to log on to each node and remove its peer node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_deadinterval.html">sethanode_deadinterval</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set number of seconds after which a peer node is marked DOWN if heartbeat messages are not received from the peer node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_failsafe.html">sethanode_failsafe</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set keep one node primary if both nodes fail the health check, so that a partially available node can back up data and handle traffic. This mode is set independently on each node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_haprop.html">sethanode_haprop</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set automatically propagate all methods from the primary to the secondary node, except the following:<br>* All HA configuration related methods. For example, add ha node, set ha node, and bind ha node. <br>* All Interface related methods. For example, set interface and unset interface.<br>* All channels related methods. For example, add channel, set channel, and bind channel.<br>The propagated method is executed on the secondary node before it is executed on the primary. If method propagation fails, or if method execution fails on the secondary, the primary node executes the method and logs an error.  Command propagation uses port 3010.<br>Note: After enabling propagation, run force synchronization on either node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_hastatus.html">sethanode_hastatus</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set the HA status of the node. The HA status STAYSECONDARY is used to force the secondary device stay as secondary independent of the state of the Primary device. For example, in an existing HA setup, the Primary node has to be upgraded and this process would take few seconds. During the upgradation, it is possible that the Primary node may suffer from a downtime for a few seconds. However, the Secondary should not take over as the Primary node. Thus, the Secondary node should remain as Secondary even if there is a failure in the Primary node.<br>	 STAYPRIMARY configuration keeps the node in primary state in case if it is healthy, even if the peer node was the primary node initially. If the node with STAYPRIMARY setting (and no peer node) is added to a primary node (which has this node as the peer) then this node takes over as the new primary and the older node becomes secondary. ENABLED state means normal HA operation without any constraints/preferences. DISABLED state disables the normal HA operation of the node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_hasync.html">sethanode_hasync</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set automatically maintain synchronization by duplicating the configuration of the primary node on the secondary node. This setting is not propagated. Automatic synchronization requires that this setting be enabled (the default) on the current secondary node. Synchronization uses TCP port 3010.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_hellointerval.html">sethanode_hellointerval</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set interval, in milliseconds, between heartbeat messages sent to the peer node. The heartbeat messages are UDP packets sent to port 3003 of the peer node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_maxflips.html">sethanode_maxflips</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set max number of flips allowed before becoming sticky primary</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_maxfliptime.html">sethanode_maxfliptime</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set interval after which flipping of node states can again start</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="sethanode_syncvlan.html">sethanode_syncvlan</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to set vlan on which HA related communication is sent. This include sync, propagation , connection mirroring , LB persistency config sync, persistent session sync and session state sync. However HA heartbeats can go all interfaces.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="synchafiles.html">synchafiles</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to synchronize various configuration files from the primary node to the secondary. You can run this method from either node. Files that are present on only the secondary and are specific to the secondary are not deleted. This method fails if the secondary node is disabled, the secondary node is not accessible from the primary, or you enter the method on a standalone appliance.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unbindhanode_routemonitor.html">unbindhanode_routemonitor</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Use this method to unbind routemonitor from HA node.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_deadinterval.html">unsethanode_deadinterval</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node deadinterval setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_failsafe.html">unsethanode_failsafe</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node failsafe setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_haprop.html">unsethanode_haprop</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node haprop setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_hastatus.html">unsethanode_hastatus</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node hastatus setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_hasync.html">unsethanode_hasync</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node hasync setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_hellointerval.html">unsethanode_hellointerval</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node hellointerval setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_maxflips.html">unsethanode_maxflips</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node maxflips setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_maxfliptime.html">unsethanode_maxfliptime</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node maxfliptime setting.</div></td></tr><tr><td><br></td></tr><tr><td><div><a href="unsethanode_syncvlan.html">unsethanode_syncvlan</a></div></td></tr><tr><td><br></td></tr><tr><td><div>Remove HA node syncvlan setting.</div></td></tr><tr><td><br></td></tr></table></div>
</body>
</html>