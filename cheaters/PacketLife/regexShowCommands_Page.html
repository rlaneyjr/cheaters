<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8" />
<title>Rocking Your &quot;Show&quot; Commands with Regex - Packet Pushers -</title><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="canonical" href="http://packetpushers.net/rocking-your-show-commands-with-regex/" />
</head>
<body class="single single-post postid-43 single-format-standard gppro-custom custom-header content-sidebar metro-pro-blue" itemscope="itemscope" itemtype="http://schema.org/WebPage"><nav class="nav-secondary" role="navigation" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement"><div class="wrap"><ul id="menu-podcast-roster" class="menu genesis-nav-menu menu-secondary"><li id="menu-item-15109" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15109"><a>Podcasts:</a></li>
<li id="menu-item-14104" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14104"><a href="/series/weekly-show/">Weekly</a></li>
<li id="menu-item-14103" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14103"><a href="/series/priority-queue/">Priority Queue</a></li>
<li id="menu-item-15108" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15108"><a href="/series/network-break-podcast-post/">Network Break</a></li>
<li id="menu-item-15107" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15107"><a href="/series/datanauts-podcast/">Datanauts</a></li>
<li id="menu-item-17668" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17668"><a href="http://packetpushers.net/series/community-podcast/">Community Show</a></li>
</ul></div></nav><div class="site-container"><header class="site-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader"><div class="wrap"><div class="title-area"><p class="site-title" itemprop="headline"><a href="http://packetpushers.net/">Packet Pushers</a></p><p class="site-description" itemprop="description">Where Too Much Networking Would Be Barely Enough</p></div><aside class="widget-area header-widget-area"><section id="search-4" class="widget widget_search"><div class="widget-wrap"><form method="get" class="search-form" action="http://packetpushers.net/" role="search"><input type="search" name="s" placeholder="Search this website&#x2026;" /><input type="submit" value="Search" /></form></div></section></aside></div></header><nav class="nav-primary" role="navigation" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement"><div class="wrap"><ul id="menu-pages" class="menu genesis-nav-menu menu-primary"><li id="menu-item-14069" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-14069"><a href="http://packetpushers.net/">Home</a></li>
<li id="menu-item-15463" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15463"><a href="/forums/">Forums</a></li>
<li id="menu-item-16132" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-16132"><a href="/virtual-toolbox/">Toolbox</a>
<ul class="sub-menu">
	<li id="menu-item-17163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17163"><a href="http://packetpushers.net/virtual-toolbox/list-merchant-silicon-manufacturers-chips/">List of Merchant Silicon Manufacturers and Chips</a></li>
	<li id="menu-item-17164" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17164"><a href="http://packetpushers.net/virtual-toolbox/open-source-networking-projects/">Open Source Networking Projects</a></li>
	<li id="menu-item-17167" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17167"><a href="http://packetpushers.net/virtual-toolbox/list-network-operating-systems/">List of Network Operating Systems</a></li>
	<li id="menu-item-17169" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17169"><a href="http://packetpushers.net/virtual-toolbox/free-books-networking-virtual-toolbox/">Free Books On Networking &#8211; Virtual Toolbox</a></li>
	<li id="menu-item-17166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17166"><a href="http://packetpushers.net/virtual-toolbox/list-sd-wan-vendors/">List of SD-WAN Vendors</a></li>
	<li id="menu-item-17168" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17168"><a href="http://packetpushers.net/virtual-toolbox/research-data-sources/">Research &#038; Data</a></li>
	<li id="menu-item-17165" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17165"><a href="http://packetpushers.net/virtual-toolbox/general-websites/">Useful Sites</a></li>
</ul>
</li>
<li id="menu-item-14111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14111"><a href="http://packetpushers.net/faq/">FAQ</a></li>
<li id="menu-item-14112" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-14112"><a href="http://packetpushers.net/contact-2/">Contact</a>
<ul class="sub-menu">
	<li id="menu-item-14116" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14116"><a href="http://packetpushers.net/contact-2/">Main Contact Page</a></li>
	<li id="menu-item-15820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15820"><a href="http://packetpushers.net/commentforum-moderation-policy/">Comment/Forum Moderation Policy</a></li>
	<li id="menu-item-14110" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14110"><a href="http://packetpushers.net/advertise/">Vendor Relations &#038; Advertising</a></li>
	<li id="menu-item-15464" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15464"><a href="http://packetpushers.net/follow/">Follow</a></li>
	<li id="menu-item-14113" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14113"><a href="http://packetpushers.net/supporters/">Support The Show</a></li>
</ul>
</li>
<li id="menu-item-18799" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-18799"><a href="http://packetpushers.net/sponsors/">Our Sponsors</a></li>
<li id="menu-item-14114" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14114"><a href="http://packetpushers.net/subscribe/">Subscribe</a></li>
<li id="menu-item-15297" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15297"><a href="http://packetpushers.net/login/">Member Login</a></li>
</ul></div></nav><div class="site-inner"><div class="content-sidebar-wrap"><main class="content" role="main" itemprop="mainContentOfPage"><div class="breadcrumb">You are here: <a href="http://packetpushers.net/">Home</a> / <a href="http://packetpushers.net/blogs/">Blogs</a> / Rocking Your &#8220;Show&#8221; Commands with Regex</div><article class="post-43 post type-post status-publish format-standard category-blogs category-network-management entry" itemscope="itemscope" itemtype="http://schema.org/CreativeWork"><header class="entry-header"><h1 class="entry-title" itemprop="headline">Rocking Your &#8220;Show&#8221; Commands with Regex</h1> 
<p class="entry-meta"><time class="entry-time" itemprop="datePublished" datetime="2010-05-10T20:55:09+00:00">May 10, 2010</time> by <span class="entry-author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><a href="http://packetpushers.net/author/ethan-banks/" class="entry-author-link" itemprop="url" rel="author"><span class="entry-author-name" itemprop="name">Ethan Banks</span></a></span> </p></header><div class="entry-content" itemprop="text"><p>Here&#8217;s a few <strong>show</strong> commands I put together that pipe to &#8220;include&#8221; or &#8220;exclude&#8221; and use regular expressions to give you just the output you&#8217;re looking for at the Cisco IOS CLI.</p>
<p><strong>show run | i ^interface|^_ip address</strong><br />
<span style="color:#3366ff"><em>! Gives you the every line in your running config that starts with (that&#8217;s what the ^ is all about) &#8220;interface&#8221; or &#8221; ip address&#8221;, essentially giving you all of your interface IP&#8217;s in an IOS-pastable format.  The underscore represents a space.  Useful for displaying IP addresses with their associated masks and interfaces.</em></span></p>
<p><strong>show ip interf brief | e unassigned</strong><br />
<em><span style="color:#3366ff">! Shows you all of the IP-capable interfaces on the box, except for the ones that have not been assigned an IP address.  I use this often, especially on big switch/routers where most of the physical interfaces do not have an IP addresses, but the SVIs do.</span></em></p>
<p><strong>show run | i ip route.*Serial1/1</strong><br />
<em><span style="color:#3366ff">! Shows you all static routes in your configuration pointing out Serial1/1, no matter what they are.  Substitute your own interface name.  Useful if you&#8217;re doing clean up after decommissioning an interface where you didn&#8217;t run a dynamic routing protocol.</span></em></p>
<p><strong>show interf status | i Gi[2-6]/20</strong><br />
<span style="color:#3366ff"><em>! Shows you the status of all port 20s in slots 2-6 of a chassis with gig cards.  Putting the 2-6 in square brackets is a regex telling the parser that any character that&#8217;s 2 through 6 inclusive is a match.</em></span></p>
<p><strong>show interf status | i Gi[246]/20</strong><br />
<em><span style="color:#3366ff">! Shows you the status of all port 20s in slots 2, 4, and 6 of a chassis with gig cards.  Here, [246] tells the parser that values 2, 4, or 6 are all matches for that position.</span></em></p>
<p><strong>show interf status | i Gi./2_</strong><br />
<em><span style="color:#3366ff">! Shows you the status of all ports ending in 2.  The underscore represents a space, so this makes sure you don&#8217;t get a match for &#8220;20&#8221; or &#8220;22&#8221; when all you really want is &#8220;2&#8221;.  The dot is a wildcard, allowing for any single character in that position.  If you want to match a random number of additional wildcard characters, follow the dot with an asterisk.</span></em></p>
<p><strong>show interf status | i Gi7/(29|3[0-9])</strong><br />
<span style="color:#3366ff"><em>! Shows you the status of all ports in slot 7, 29 &#8211; 39 inclusive.  You get the &#8220;Gi7/&#8221;, right?  No regex magic there.  The &#8220;29|&#8221; could be translated &#8220;29 or&#8221;.  The &#8220;3[0-9]&#8221; could be translated &#8220;3 followed by any of the digits 0 through 9 inclusive&#8221;.  Put it all together, and you get a match for any line containing Gi7/, followed by 29 or 30-39.</em></span></p>
<p><strong>show interf status | i _101_</strong><br />
<em><span style="color:#3366ff">! Displays all lines contain the number 101 with a leading and trailing space.  Useful if you want to show all the ports in a particular VLAN, in this case 101.</span></em></p>
<p><strong>show inter status | i a-100_|_100_</strong><br />
<span style="color:#3366ff"><em>! Displays all the ports that are running at 100Mbps, whether statically defined or auto-negotiated.  Will also match interfaces in Vlan100, though.  Sadly, Cisco does not allow you to pipe to &#8220;include&#8221; and then further pipe to &#8220;exclude&#8221;, such as you can do in *nix by nesting piped greps.  If you could nest your pipe commands in the IOS CLI, there could be some very interesting output filters generated.</em></span></p>
<p><strong>show interface | i line|escription|bits</strong><br />
<span style="color:#3366ff"><em>! Presents all interfaces, their descriptions, and the bits per second flowing through them, both input and output.  Does not distinguish between up/down status.</em></span></p>
<p>I view this list as &#8220;a good start&#8221;, leveraging basic regex features.  I use these features all the time to more quickly parse through router and switch output.  How about you?  I&#8217;d love to see your clever commands in the comments.  What I posted was just a warm up for what could be done, I&#8217;m sure.</p>

		<div class="comment-content" itemprop="commentText">
			
			<p>I find it more flexible to use parens to enclose expressions, instead of relying on just underscores.<br />
One way to rewrite  &#8221; show inter status | i a-100_|_100_ &#8221; would be<br />
show int status | inc (a-100| 100)<br />
To exclude vlan 100, you should be able to do something like:<br />
show int status | inc (full|half|auto).*(a-100| 100)</p>
<p>One of my favorites:<br />
sh cdp ne d | inc (&#8212;|e ID|IP add|Plat)</p>
<p>Another from my bloog ( <a href="http://www.handsomeplanet.com/archives/7" rel="nofollow">http://www.handsomeplanet.com/archives/7</a> ) :<br />
This should show the physical interfaces and whether access-lists have been applied   using the “access-group” command:<br />
sh run | include (^interface [A-Z])|(ip access-group [0-9a-zA-Z])</p>
		</div>


		<div class="comment-content" itemprop="commentText">
			
			<p>If you only want to see interfaces whose protocol is down:</p>
<p>show ip int brie | i down____$</p>
<p>That&#8217;s right. Cisco tacks on 4 blank spaces at the end of each line!</p>
		</div>


		<div class="comment-content" itemprop="commentText">
			
			<p>R1#sh int | inc (Ethernet)|(error)|(packet)<br />
FastEthernet0/0 is up, line protocol is up<br />
  5 minute input rate 0 bits/sec, 0 packets/sec<br />
  5 minute output rate 0 bits/sec, 0 packets/sec<br />
     39 packets input, 4966 bytes<br />
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored<br />
     0 input packets with dribble condition detected<br />
     49 packets output, 5445 bytes, 0 underruns<br />
     0 output errors, 0 collisions, 0 interface resets</p>
<p>Useful for seeing if there are any really bad errored interfaces</p>
<p>Also, I like </p>
<p>sh int status | inc (.*not.*VLANID.*) </p>
<p>where VLANID is something like 520 to find down interfaces that have been assigned for a VLAN, handy for finding ports that are free &#8211; you can then check out the interface to see if it is really free or not</p>
		</div>

		<div class="comment-content" itemprop="commentText">
			
			<p>I&#8217;ve found part of the answer to the question I&#8217;ve posted few minutes ago&#8230;</p>
<p>#show int status | i notconnect   201<br />
Gi2/35    mgmt  WLAN      notconnect   201          auto   auto 10/100/1000-TX<br />
Gi2/37    mgmt WLAN      notconnect   201          auto   auto 10/100/1000-TX<br />
Gi2/38    mgmt WLAN      notconnect   201          auto   auto 10/100/1000-TX<br />
Gi4/16    mgmt WLAN      notconnect   201          auto   auto 10/100/1000-TX<br />
Gi4/19    mgmt WLAN      notconnect   201          auto   auto 10/100/1000-TX</p>
<p>The show int status output is formed by the following columns:<br />
Port      Name               Status       Vlan       Duplex  Speed Type</p>
<p>So I gathered the columns that I was searching for (vlan + portstatus) and put it together after the &#8220;| include&#8221;.  </p>
<p>Ok, part of the problem was solved. But what if I was looking for columns that are not sequencial? In other words, how to filtering for instance &#8220;port name&#8221; and &#8220;vlan&#8221; at sime time?</p>
		</div>

		<div class="comment-content" itemprop="commentText">
			
			<p>For the show ip, I prefer, &#8220;show ip int brief | ex unass&#8221;.  <img src="http://packetpushers.net/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" />  It&#8217;s just a little more fun.  And I run &#8220;show ip int brief&#8221; so much, I created an alias for it &#8211; alias exec sib show ip int brief | ex unass.</p>
<p>Here&#8217;s a helpful one for large switches with lots of interfaces &#8211; show me all the ports with at least one error on them.</p>
<p>sh int count error | i Port|_[1-9]+</p>
<p>I include the &#8220;Port&#8221; for the column headers.</p>
		</div>


		<div class="comment-content" itemprop="commentText">
			
			<p>Bkboom, to only get interfaces that are down, you need to write it as follows.</p>
<p>sh int desc | ex admin|up | inc down</p>
<p>Hope that helps.</p>
		</div>


		<div class="comment-content" itemprop="commentText">
			
			<p>How about&#8230;for any line containing something that looks like an IP address:</p>
<p># show  | include [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+<br />
e.g.<br />
# show running-config | include [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+</p>
<p>will display all lines of the running configuration that contain an IP address.</p>
		</div>

		
	</article>
	</li><!-- #comment-## -->
</ol></div>						
</div>
</body>
</html>
